/*! For license information please see main.1c741338.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var s=n(853),r=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var P=Array.isArray,R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},L=[],F=-1;function V(e){return{current:e}}function z(e){0>F||(e.current=L[F],L[F]=null,F--)}function U(e,t){F++,L[F]=e.current,e.current=t}var B=V(null),q=V(null),H=V(null),W=V(null);function K(e,t){switch(U(H,t),U(q,e),U(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(B),U(B,e)}function G(){z(B),z(q),z(H)}function Q(e){null!==e.memoizedState&&U(W,e);var t=B.current,n=ad(t,e.type);t!==n&&(U(q,e),U(B,n))}function Y(e){q.current===e&&(z(B),z(q)),W.current===e&&(z(W),Yd._currentValue=O)}var X=Object.prototype.hasOwnProperty,$=s.unstable_scheduleCallback,J=s.unstable_cancelCallback,Z=s.unstable_shouldYield,ee=s.unstable_requestPaint,te=s.unstable_now,ne=s.unstable_getCurrentPriorityLevel,se=s.unstable_ImmediatePriority,re=s.unstable_UserBlockingPriority,ie=s.unstable_NormalPriority,ae=s.unstable_LowPriority,oe=s.unstable_IdlePriority,le=s.log,ce=s.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/pe|0)|0},me=Math.log,pe=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var s=e.pendingLanes;if(0===s)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&s;return 0!==o?0!==(s=o&~i)?r=ye(s):0!==(a&=o)?r=ye(a):n||0!==(n=o&~e)&&(r=ye(n)):0!==(o=s&~i)?r=ye(o):0!==a?r=ye(a):n||0!==(n=s&~e)&&(r=ye(n)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:r}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function je(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-fe(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-fe(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Ie=Math.random().toString(36).slice(2),De="__reactFiber$"+Ie,Pe="__reactProps$"+Ie,Re="__reactContainer$"+Ie,Me="__reactEvents$"+Ie,Oe="__reactListeners$"+Ie,Le="__reactHandles$"+Ie,Fe="__reactResources$"+Ie,Ve="__reactMarker$"+Ie;function ze(e){delete e[De],delete e[Pe],delete e[Me],delete e[Oe],delete e[Le]}function Ue(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[De]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xd(e);null!==e;){if(n=e[De])return n;e=xd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[De]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ve]=!0}var Ke=new Set,Ge={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Xe,$e,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(r=t,X.call(et,r)||!X.call(Ze,r)&&(Je.test(r)?et[r]=!0:(Ze[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function st(e,t,n,s){if(null===s)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+s)}}function rt(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+$e}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var s=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){s=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){s=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(Ia){if(Ia&&s&&"string"===typeof Ia.stack)return[Ia.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(r=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(s===l.length||r===c.length)for(s=l.length-1,r=c.length-1;1<=s&&0<=r&&l[s]!==c[r];)r--;for(;1<=s&&0<=r;s--,r--)if(l[s]!==c[r]){if(1!==s||1!==r)do{if(s--,0>--r||l[s]!==c[r]){var u="\n"+l[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=r);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return rt("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=ut(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function pt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,s,r,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=s&&e.removeAttribute("value"),null==r&&null!=i&&(e.defaultChecked=!!i),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,s,r,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}s="function"!==typeof(s=null!=s?s:r)&&"symbol"!==typeof s&&!!s,e.checked=o?e.checked:!!s,e.defaultChecked=!!s,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(a(92));if(P(s)){if(1<s.length)throw Error(a(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var s=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&n[r]!==s&&kt(e,r,s)}else for(var i in t)t.hasOwnProperty(i)&&kt(e,i,t[i])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Pt=null;function Rt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=s[Pe]||null;if(!r)throw Error(a(90));gt(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&ht(s)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Ot(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Dt||null!==Pt)&&(Bc(),Dt&&(t=Dt,e=Pt,Pt=Dt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var s=n[Pe]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ft)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Rh){Vt=!1}var Ut=null,Bt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=Bt,s=n.length,r="value"in Ut?Ut.value:Ut.textContent,i=r.length;for(e=0;e<s&&n[e]===r[e];e++);var a=s-e;for(t=1;t<=a&&n[s-t]===r[i-t];t++);return qt=r.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Qt(e){function t(t,n,s,r,i){for(var a in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Xt,$t,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Xt=e.screenY-$t.screenY):Xt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),sn=Qt(nn),rn=Qt(h({},nn,{dataTransfer:0})),an=Qt(h({},en,{relatedTarget:0})),on=Qt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return fn}var pn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),yn=Qt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Qt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],_n=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var kn=Ft&&"TextEvent"in window&&!Sn,Nn=Ft&&(!_n||Sn&&8<Sn&&11>=Sn),jn=String.fromCharCode(32),En=!1;function Cn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Pn(e,t,n,s){Dt?Pt?Pt.push(s):Pt=[s]:Dt=s,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Rn=null,Mn=null;function On(e){Lu(e,0)}function Ln(e){if(ht(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var zn;if(Ft){var Un="oninput"in document;if(!Un){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Un="function"===typeof Bn.oninput}zn=Un}else zn=!1;Vn=zn&&(!document.documentMode||9<document.documentMode)}function qn(){Rn&&(Rn.detachEvent("onpropertychange",Hn),Mn=Rn=null)}function Hn(e){if("value"===e.propertyName&&Ln(Mn)){var t=[];Pn(t,Mn,e,It(e)),Ot(On,t)}}function Wn(e,t,n){"focusin"===e?(qn(),Mn=n,(Rn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Mn)}function Gn(e,t){if("click"===e)return Ln(t)}function Qn(e,t){if("input"===e||"change"===e)return Ln(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!X.call(t,r)||!Yn(e[r],t[r]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,s=$n(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$n(s)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function es(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ts(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ns=Ft&&"documentMode"in document&&11>=document.documentMode,ss=null,rs=null,is=null,as=!1;function os(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;as||null==ss||ss!==ft(s)||("selectionStart"in(s=ss)&&ts(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},is&&Xn(is,s)||(is=s,0<(s=Wu(rs,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ss)))}function ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cs={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},us={},ds={};function hs(e){if(us[e])return us[e];if(!cs[e])return e;var t,n=cs[e];for(t in n)if(n.hasOwnProperty(t)&&t in ds)return us[e]=n[t];return e}Ft&&(ds=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);var fs=hs("animationend"),ms=hs("animationiteration"),ps=hs("animationstart"),gs=hs("transitionrun"),vs=hs("transitionstart"),ys=hs("transitioncancel"),bs=hs("transitionend"),xs=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(e,t){xs.set(e,t),Qe(t,[e])}ws.push("scrollEnd");var Ss=new WeakMap;function ks(e,t){if("object"===typeof e&&null!==e){var n=Ss.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Ss.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ns=[],js=0,Es=0;function Cs(){for(var e=js,t=Es=js=0;t<e;){var n=Ns[t];Ns[t++]=null;var s=Ns[t];Ns[t++]=null;var r=Ns[t];Ns[t++]=null;var i=Ns[t];if(Ns[t++]=null,null!==s&&null!==r){var a=s.pending;null===a?r.next=r:(r.next=a.next,a.next=r),s.pending=r}0!==i&&Ds(n,r,i)}}function As(e,t,n,s){Ns[js++]=e,Ns[js++]=t,Ns[js++]=n,Ns[js++]=s,Es|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Ts(e,t,n,s){return As(e,t,n,s),Ps(e)}function Is(e,t){return As(e,null,null,t),Ps(e)}function Ds(e,t,n){e.lanes|=n;var s=e.alternate;null!==s&&(s.lanes|=n);for(var r=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(s=i.alternate)&&(s.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(r=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,r&&null!==t&&(r=31-fe(n),null===(s=(e=i.hiddenUpdates)[r])?e[r]=[t]:s.push(t),t.lane=536870912|n),i):null}function Ps(e){if(50<Pc)throw Pc=0,Rc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rs={};function Ms(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,t,n,s){return new Ms(e,t,n,s)}function Ls(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fs(e,t){var n=e.alternate;return null===n?((n=Os(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vs(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zs(e,t,n,s,r,i){var o=0;if(s=e,"function"===typeof e)Ls(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Os(31,n,t,r)).elementType=E,e.lanes=i,e;case g:return Us(n.children,r,i,t);case v:o=8,r|=24;break;case y:return(e=Os(12,n,t,2|r)).elementType=y,e.lanes=i,e;case S:return(e=Os(13,n,t,r)).elementType=S,e.lanes=i,e;case k:return(e=Os(19,n,t,r)).elementType=k,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:o=10;break e;case x:o=9;break e;case _:o=11;break e;case N:o=14;break e;case j:o=16,s=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),s=null}return(t=Os(o,n,t,r)).elementType=e,t.type=s,t.lanes=i,t}function Us(e,t,n,s){return(e=Os(7,e,s,t)).lanes=n,e}function Bs(e,t,n){return(e=Os(6,e,null,t)).lanes=n,e}function qs(e,t,n){return(t=Os(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hs=[],Ws=0,Ks=null,Gs=0,Qs=[],Ys=0,Xs=null,$s=1,Js="";function Zs(e,t){Hs[Ws++]=Gs,Hs[Ws++]=Ks,Ks=e,Gs=t}function er(e,t,n){Qs[Ys++]=$s,Qs[Ys++]=Js,Qs[Ys++]=Xs,Xs=e;var s=$s;e=Js;var r=32-fe(s)-1;s&=~(1<<r),n+=1;var i=32-fe(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,$s=1<<32-fe(t)+r|n<<r|s,Js=i+e}else $s=1<<i|n<<r|s,Js=e}function tr(e){null!==e.return&&(Zs(e,1),er(e,1,0))}function nr(e){for(;e===Ks;)Ks=Hs[--Ws],Hs[Ws]=null,Gs=Hs[--Ws],Hs[Ws]=null;for(;e===Xs;)Xs=Qs[--Ys],Qs[Ys]=null,Js=Qs[--Ys],Qs[Ys]=null,$s=Qs[--Ys],Qs[Ys]=null}var sr=null,rr=null,ir=!1,ar=null,or=!1,lr=Error(a(519));function cr(e){throw pr(ks(Error(a(418,"")),e)),lr}function ur(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[De]=e,t[Pe]=s,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Mu.length;n++)Fu(Mu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),wt(t,s.value,s.defaultValue,s.children),dt(t)}"string"!==typeof(n=s.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===s.suppressHydrationWarning||$u(t.textContent,n)?(null!=s.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=s.onScroll&&Fu("scroll",t),null!=s.onScrollEnd&&Fu("scrollend",t),null!=s.onClick&&(t.onclick=Ju),t=!0):t=!1,t||cr(e)}function dr(e){for(sr=e.return;sr;)switch(sr.tag){case 5:case 13:return void(or=!1);case 27:case 3:return void(or=!0);default:sr=sr.return}}function hr(e){if(e!==sr)return!1;if(!ir)return dr(e),ir=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&rr&&cr(e),dr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rr=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rr=null}}else 27===n?(n=rr,md(e.type)?(e=bd,bd=null,rr=e):rr=n):rr=sr?yd(e.stateNode.nextSibling):null;return!0}function fr(){rr=sr=null,ir=!1}function mr(){var e=ar;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),ar=null),e}function pr(e){null===ar?ar=[e]:ar.push(e)}var gr=V(null),vr=null,yr=null;function br(e,t,n){U(gr,t._currentValue),t._currentValue=n}function xr(e){e._currentValue=gr.current,z(gr)}function wr(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function _r(e,t,n,s){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i){var o=r.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),wr(i.return,n,e),s||(o=null);break e}i=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),wr(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Sr(e,t,n,s){e=null;for(var r=t,i=!1;null!==r;){if(!i)if(0!==(524288&r.flags))i=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;Yn(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===W.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}r=r.return}null!==e&&_r(t,e,n,s),t.flags|=262144}function kr(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nr(e){vr=e,yr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function jr(e){return Cr(vr,e)}function Er(e,t){return null===vr&&Nr(e),Cr(e,t)}function Cr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yr){if(null===e)throw Error(a(308));yr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yr=yr.next=t;return n}var Ar="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Tr=s.unstable_scheduleCallback,Ir=s.unstable_NormalPriority,Dr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pr(){return{controller:new Ar,data:new Map,refCount:0}}function Rr(e){e.refCount--,0===e.refCount&&Tr(Ir,function(){e.controller.abort()})}var Mr=null,Or=0,Lr=0,Fr=null;function Vr(){if(0===--Or&&null!==Mr){null!==Fr&&(Fr.status="fulfilled");var e=Mr;Mr=null,Lr=0,Fr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zr=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Mr){var n=Mr=[];Or=0,Lr=Tu(),Fr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Or++,t.then(Vr,Vr)}(0,t),null!==zr&&zr(e,t)};var Ur=V(null);function Br(){var e=Ur.current;return null!==e?e:rc.pooledCache}function qr(e,t){U(Ur,null===t?Ur.current:t.pool)}function Hr(){var e=Br();return null===e?null:{parent:Dr._currentValue,pool:e}}var Wr=Error(a(460)),Kr=Error(a(474)),Gr=Error(a(542)),Qr={then:function(){}};function Yr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xr(){}function $r(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xr,Xr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xr,Xr);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Jr=t,Wr}}var Jr=null;function Zr(){if(null===Jr)throw Error(a(459));var e=Jr;return Jr=null,e}function ei(e){if(e===Wr||e===Gr)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function si(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ri(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&sc)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=Ps(e),Ds(e,null,n),t}return As(e,s,t,n),Ps(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function oi(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?r=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fr)throw Fr}}function ui(e,t,n,s){li=!1;var r=e.updateQueue;ti=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=r.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(ac&f)===f:(s&f)===f){0!==f&&f===Lr&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(v,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(v,d,f):p)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=r.callbacks)?r.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(m=o).next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===i&&(r.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=V(null),mi=V(0);function pi(e,t){U(mi,e=hc),U(fi,t),hc=e|t.baseLanes}function gi(){U(mi,hc),U(fi,fi.current)}function vi(){hc=mi.current,z(fi),z(mi)}var yi=0,bi=null,xi=null,wi=null,_i=!1,Si=!1,ki=!1,Ni=0,ji=0,Ei=null,Ci=0;function Ai(){throw Error(a(321))}function Ti(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ii(e,t,n,s,r,i){return yi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Ka:Ga,ki=!1,i=n(s,r),ki=!1,Si&&(i=Pi(t,n,s,r)),Di(e),i}function Di(e){R.H=Wa;var t=null!==xi&&null!==xi.next;if(yi=0,wi=xi=bi=null,_i=!1,ji=0,Ei=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&kr(e)&&(Co=!0)}function Pi(e,t,n,s){bi=e;var r=0;do{if(Si&&(Ei=null),ji=0,Si=!1,25<=r)throw Error(a(301));if(r+=1,wi=xi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=Qa,i=t(n,s)}while(Si);return i}function Ri(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==xi?xi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Mi(){var e=0!==Ni;return Ni=0,e}function Oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Li(e){if(_i){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_i=!1}yi=0,wi=xi=bi=null,Si=!1,ji=Ni=0,Ei=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wi?bi.memoizedState=wi=e:wi=wi.next=e,wi}function Vi(){if(null===xi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=xi.next;var t=null===wi?bi.memoizedState:wi.next;if(null!==t)wi=t,xi=e;else{if(null===e){if(null===bi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(xi=e).memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},null===wi?bi.memoizedState=wi=e:wi=wi.next=e}return wi}function zi(e){var t=ji;return ji+=1,null===Ei&&(Ei=[]),e=$r(Ei,e,t),t=bi,null===(null===wi?t.memoizedState:wi.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Ka:Ga),e}function Ui(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===w)return jr(e)}throw Error(a(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var s=bi.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=C;return t.index++,n}function qi(e,t){return"function"===typeof t?t(e):t}function Hi(e){return Wi(Vi(),xi,e)}function Wi(e,t,n){var s=e.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=n;var r=e.baseQueue,i=s.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}t.baseQueue=r=i,s.pending=null}if(i=e.baseState,null===r)e.memoizedState=i;else{var l=o=null,c=null,u=t=r.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(yi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Lr&&(d=!0);else{if((yi&f)===f){u=u.next,f===Lr&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,bi.lanes|=f,mc|=f}h=u.action,ki&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,bi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Yn(i,e.memoizedState)&&(Co=!0,d&&null!==(n=Fr)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===r&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ki(e){var t=Vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);Yn(i,t.memoizedState)||(Co=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Gi(e,t,n){var s=bi,r=Vi(),i=ir;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((xi||r).memoizedState,n);if(o&&(r.memoizedState=n,Co=!0),r=r.queue,ga(2048,8,Xi.bind(null,s,r,e),[e]),r.getSnapshot!==t||o||null!==wi&&1&wi.memoizedState.tag){if(s.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Yi.bind(null,s,r,n,t),null),null===rc)throw Error(a(349));i||0!==(124&yi)||Qi(s,t,n)}return n}function Qi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yi(e,t,n,s){t.value=n,t.getSnapshot=s,$i(t)&&Ji(e)}function Xi(e,t,n){return n(function(){$i(t)&&Ji(e)})}function $i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(s){return!0}}function Ji(e){var t=Is(e,2);null!==t&&Lc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),ki){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},t}function ea(e,t,n,s){return e.baseState=n,Wi(e,xi,"function"===typeof s?s:qi)}function ta(e,t,n,s,r){if(Ba(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,s=t.payload,r=e.state;if(t.isTransition){var i=R.T,a={};R.T=a;try{var o=n(r,s),l=R.S;null!==l&&l(a,o),sa(e,t,o)}catch(c){ia(e,t,c)}finally{R.T=i}}else try{sa(e,t,i=n(r,s))}catch(u){ia(e,t,u)}}function sa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ra(e,t,n)},function(n){return ia(e,t,n)}):ra(e,t,n)}function ra(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==s)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(ir){var n=rc.formState;if(null!==n){e:{var s=bi;if(ir){if(rr){t:{for(var r=rr,i=or;8!==r.nodeType;){if(!i){r=null;break t}if(null===(r=yd(r.nextSibling))){r=null;break t}}r="F!"===(i=r.data)||"F"===i?r:null}if(r){rr=yd(r.nextSibling),s="F!"===r.data;break e}}cr(s)}s=!1}s&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=s,n=Va.bind(null,bi,s),s.dispatch=n,s=Zi(!1),i=Ua.bind(null,bi,!1,s.queue),r={state:t,dispatch:null,action:e,pending:null},(s=Fi()).queue=r,n=ta.bind(null,bi,r,i,n),r.dispatch=n,s.memoizedState=e,[t,n,!1]}function ca(e){return ua(Vi(),xi,e)}function ua(e,t,n){if(t=Wi(e,t,oa)[0],e=Hi(qi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var s=zi(t)}catch(a){if(a===Wr)throw Gr;throw a}else s=t;var r=(t=Vi()).queue,i=r.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,r,n),null)),[s,i,e]}function da(e,t){e.action=t}function ha(e){var t=Vi(),n=xi;if(null!==n)return ua(t,n,e);Vi(),t=t.memoizedState;var s=(n=Vi()).queue.dispatch;return n.memoizedState=e,[t,s,!1]}function fa(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function ma(){return Vi().memoizedState}function pa(e,t,n,s){var r=Fi();s=void 0===s?null:s,bi.flags|=e,r.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,s)}function ga(e,t,n,s){var r=Vi();s=void 0===s?null:s;var i=r.memoizedState.inst;null!==xi&&null!==s&&Ti(s,xi.memoizedState.deps)?r.memoizedState=fa(t,i,n,s):(bi.flags|=e,r.memoizedState=fa(1|t,i,n,s))}function va(e,t){pa(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function xa(e,t){return ga(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _a(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,wa.bind(null,t,e),n)}function Sa(){}function ka(e,t){var n=Vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==t&&Ti(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=Vi();t=void 0===t?null:t;var s=n.memoizedState;if(null!==t&&Ti(t,s[1]))return s[0];if(s=e(),ki){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[s,t],s}function ja(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=Oc(),bi.lanes|=e,mc|=e,n)}function Ea(e,t,n,s){return Yn(n,t)?n:null!==fi.current?(e=ja(e,n,s),Yn(e,t)||(Co=!0),e):0===(42&yi)?(Co=!0,e.memoizedState=n):(e=Oc(),bi.lanes|=e,mc|=e,t)}function Ca(e,t,n,s,r){var i=M.p;M.p=0!==i&&8>i?i:8;var a=R.T,o={};R.T=o,Ua(e,!1,t,n);try{var l=r(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(s.status="rejected",s.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),s}(l,s);za(e,t,u,Mc())}else za(e,t,s,Mc())}catch(d){za(e,t,{then:function(){},status:"rejected",reason:d},Mc())}finally{M.p=i,R.T=a}}function Aa(){}function Ta(e,t,n,s){if(5!==e.tag)throw Error(a(476));var r=Da(e).queue;Ca(e,r,t,O,null===n?Aa:function(){return Pa(e),n(s)})}function Da(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){za(e,Da(e).next.queue,{},Mc())}function Ra(){return jr(Yd)}function Ma(){return Vi().memoizedState}function Oa(){return Vi().memoizedState}function La(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mc(),s=ii(t,e=ri(n),n);return null!==s&&(Lc(s,t,n),ai(s,t,n)),t={cache:Pr()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var s=Mc();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ba(e)?qa(t,n):null!==(n=Ts(e,t,n,s))&&(Lc(n,e,s),Ha(n,t,s))}function Va(e,t,n){za(e,t,n,Mc())}function za(e,t,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ba(e))qa(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,Yn(o,a))return As(e,t,r,0),null===rc&&Cs(),!1}catch(l){}if(null!==(n=Ts(e,t,r,s)))return Lc(n,e,s),Ha(n,t,s),!0}return!1}function Ua(e,t,n,s){if(s={lane:2,revertLane:Tu(),action:s,hasEagerState:!1,eagerState:null,next:null},Ba(e)){if(t)throw Error(a(479))}else null!==(t=Ts(e,n,s,2))&&Lc(t,e,2)}function Ba(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function qa(e,t){Si=_i=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Wa={readContext:jr,use:Ui,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useLayoutEffect:Ai,useInsertionEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useSyncExternalStore:Ai,useId:Ai,useHostTransitionStatus:Ai,useFormState:Ai,useActionState:Ai,useOptimistic:Ai,useMemoCache:Ai,useCacheRefresh:Ai},Ka={readContext:jr,use:Ui,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:jr,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4194308,4,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var s=e();if(ki){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=Fi();if(void 0!==n){var r=n(t);if(ki){he(!0);try{n(t)}finally{he(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=Fa.bind(null,bi,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Va.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Sa,useDeferredValue:function(e,t){return ja(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Ca.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=bi,r=Fi();if(ir){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&ac)||Qi(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,va(Xi.bind(null,s,i,e),[e]),s.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Yi.bind(null,s,i,n,t),null),n},useId:function(){var e=Fi(),t=rc.identifierPrefix;if(ir){var n=Js;t="\xab"+t+"R"+(n=($s&~(1<<32-fe($s)-1)).toString(32)+n),0<(n=Ni++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ci++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ra,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Fi().memoizedState=La.bind(null,bi)}},Ga={readContext:jr,use:Ui,useCallback:ka,useContext:jr,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:xa,useMemo:Na,useReducer:Hi,useRef:ma,useState:function(){return Hi(qi)},useDebugValue:Sa,useDeferredValue:function(e,t){return Ea(Vi(),xi.memoizedState,e,t)},useTransition:function(){var e=Hi(qi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Gi,useId:Ma,useHostTransitionStatus:Ra,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Vi(),0,e,t)},useMemoCache:Bi,useCacheRefresh:Oa},Qa={readContext:jr,use:Ui,useCallback:ka,useContext:jr,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:xa,useMemo:Na,useReducer:Ki,useRef:ma,useState:function(){return Ki(qi)},useDebugValue:Sa,useDeferredValue:function(e,t){var n=Vi();return null===xi?ja(n,e,t):Ea(n,xi.memoizedState,e,t)},useTransition:function(){var e=Ki(qi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Gi,useId:Ma,useHostTransitionStatus:Ra,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Vi();return null!==xi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:Oa},Ya=null,Xa=0;function $a(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),$r(Ya,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eo(e){return(0,e._init)(e._payload)}function to(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Fs(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=67108866,n):s:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Bs(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var i=n.type;return i===g?d(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===j&&eo(i)===t.type)?(Ja(t=r(t,n.props),n),t.return=e,t):(Ja(t=zs(n.type,n.key,n.props,null,e.mode,s),n),t.return=e,t)}function u(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qs(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,s,i){return null===t||7!==t.tag?((t=Us(n,e.mode,s,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Ja(n=zs(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=qs(t,e.mode,n)).return=e,t;case j:return h(e,t=(0,t._init)(t._payload),n)}if(P(t)||T(t))return(t=Us(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,$a(t),n);if(t.$$typeof===w)return h(e,Er(e,t),n);Za(e,t)}return null}function f(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?c(e,t,n,s):null;case p:return n.key===r?u(e,t,n,s):null;case j:return f(e,t,n=(r=n._init)(n._payload),s)}if(P(n)||T(n))return null!==r?null:d(e,t,n,s,null);if("function"===typeof n.then)return f(e,t,$a(n),s);if(n.$$typeof===w)return f(e,t,Er(e,n),s);Za(e,n)}return null}function v(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case m:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case p:return u(t,e=e.get(null===s.key?n:s.key)||null,s,r);case j:return v(e,t,n,s=(0,s._init)(s._payload),r)}if(P(s)||T(s))return d(t,e=e.get(n)||null,s,r,null);if("function"===typeof s.then)return v(e,t,n,$a(s),r);if(s.$$typeof===w)return v(e,t,n,Er(t,s),r);Za(t,s)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=r(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===j&&eo(b)===c.type){n(l,c.sibling),Ja(d=r(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Us(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=zs(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=r(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qs(u,l.mode,d)).return=l,l=d}return o(l);case j:return y(l,c,u=(b=u._init)(u._payload),d)}if(P(u))return function(r,a,o,l){for(var c=null,u=null,d=a,m=a=0,p=null;null!==d&&m<o.length;m++){d.index>m?(p=d,d=null):p=d.sibling;var g=f(r,d,o[m],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(r,d),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g,d=p}if(m===o.length)return n(r,d),ir&&Zs(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return ir&&Zs(r,m),c}for(d=s(d);m<o.length;m++)null!==(p=v(d,r,m,o[m],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?m:p.key),a=i(p,a,m),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(r,e)}),ir&&Zs(r,m),c}(l,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(a(150));return function(r,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,p=o=0,g=null,y=l.next();null!==m&&!y.done;p++,y=l.next()){m.index>p?(g=m,m=null):g=m.sibling;var b=f(r,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(r,m),o=i(b,o,p),null===d?u=b:d.sibling=b,d=b,m=g}if(y.done)return n(r,m),ir&&Zs(r,p),u;if(null===m){for(;!y.done;p++,y=l.next())null!==(y=h(r,y.value,c))&&(o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return ir&&Zs(r,p),u}for(m=s(m);!y.done;p++,y=l.next())null!==(y=v(m,r,p,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?p:y.key),o=i(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(r,e)}),ir&&Zs(r,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,$a(u),d);if(u.$$typeof===w)return y(l,c,Er(l,u),d);Za(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=r(c,u)).return=l,l=d):(n(l,c),(d=Bs(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,s){try{Xa=0;var r=y(e,t,n,s);return Ya=null,r}catch(a){if(a===Wr||a===Gr)throw a;var i=Os(29,a,null,e.mode);return i.lanes=s,i.return=e,i}}}var no=to(!0),so=to(!1),ro=V(null),io=null;function ao(e){var t=e.alternate;U(uo,1&uo.current),U(ro,e),null===io&&(null===t||null!==fi.current||null!==t.memoizedState)&&(io=e)}function oo(e){if(22===e.tag){if(U(uo,uo.current),U(ro,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else lo()}function lo(){U(uo,uo.current),U(ro,ro.current)}function co(e){z(ro),io===e&&(io=null),z(uo)}var uo=V(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Mc(),r=ri(s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,s))&&(Lc(t,e,s),ai(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Mc(),r=ri(s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ii(e,r,s))&&(Lc(t,e,s),ai(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mc(),s=ri(n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=ii(e,s,n))&&(Lc(t,e,n),ai(t,e,n))}};function po(e,t,n,s,r,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,s)||!Xn(r,i))}function go(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function vo(e,t){var n=t;if("ref"in t)for(var s in n={},t)"ref"!==s&&(n[s]=t[s]);if(e=e.defaultProps)for(var r in n===t&&(n=h({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){yo(e)}function xo(e){console.error(e)}function wo(e){yo(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function ko(e,t,n){return(n=ri(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function No(e){return(e=ri(e)).tag=3,e}function jo(e,t,n,s){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var i=s.value;e.payload=function(){return r(i)},e.callback=function(){So(t,n,s)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){So(t,n,s),"function"!==typeof r&&(null===Nc?Nc=new Set([this]):Nc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var Eo=Error(a(461)),Co=!1;function Ao(e,t,n,s){t.child=null===e?so(t,null,n,s):no(t,e.child,n,s)}function To(e,t,n,s,r){n=n.render;var i=t.ref;if("ref"in s){var a={};for(var o in s)"ref"!==o&&(a[o]=s[o])}else a=s;return Nr(t),s=Ii(e,t,n,a,i,r),o=Mi(),null===e||Co?(ir&&o&&tr(t),t.flags|=1,Ao(e,t,s,r),t.child):(Oi(e,t,r),Xo(e,t,r))}function Io(e,t,n,s,r){if(null===e){var i=n.type;return"function"!==typeof i||Ls(i)||void 0!==i.defaultProps||null!==n.compare?((e=zs(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Do(e,t,i,s,r))}if(i=e.child,!$o(e,r)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,s)&&e.ref===t.ref)return Xo(e,t,r)}return t.flags|=1,(e=Fs(i,s)).ref=t.ref,e.return=t,t.child=e}function Do(e,t,n,s,r){if(null!==e){var i=e.memoizedProps;if(Xn(i,s)&&e.ref===t.ref){if(Co=!1,t.pendingProps=s=i,!$o(e,r))return t.lanes=e.lanes,Xo(e,t,r);0!==(131072&e.flags)&&(Co=!0)}}return Oo(e,t,n,s,r)}function Po(e,t,n){var s=t.pendingProps,r=s.children,i=null!==e?e.memoizedState:null;if("hidden"===s.mode){if(0!==(128&t.flags)){if(s=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~s}else t.childLanes=0,t.child=null;return Ro(e,t,s,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ro(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qr(0,null!==i?i.cachePool:null),null!==i?pi(t,i):gi(),oo(t)}else null!==i?(qr(0,i.cachePool),pi(t,i),lo(),t.memoizedState=null):(null!==e&&qr(0,null),gi(),lo());return Ao(e,t,r,n),t.child}function Ro(e,t,n,s){var r=Br();return r=null===r?null:{parent:Dr._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&qr(0,null),gi(),oo(t),null!==e&&Sr(e,t,s,!0),null}function Mo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,s,r){return Nr(t),n=Ii(e,t,n,s,void 0,r),s=Mi(),null===e||Co?(ir&&s&&tr(t),t.flags|=1,Ao(e,t,n,r),t.child):(Oi(e,t,r),Xo(e,t,r))}function Lo(e,t,n,s,r,i){return Nr(t),t.updateQueue=null,n=Pi(t,s,n,r),Di(e),s=Mi(),null===e||Co?(ir&&s&&tr(t),t.flags|=1,Ao(e,t,n,i),t.child):(Oi(e,t,i),Xo(e,t,i))}function Fo(e,t,n,s,r){if(Nr(t),null===t.stateNode){var i=Rs,a=n.contextType;"object"===typeof a&&null!==a&&(i=jr(a)),i=new n(s,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=mo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=s,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?jr(a):Rs,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(fo(t,n,a,s),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&mo.enqueueReplaceState(i,i.state,null),ui(t,s,i,r),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=vo(n,o);i.props=l;var c=i.context,u=n.contextType;a=Rs,"object"===typeof u&&null!==u&&(a=jr(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&go(t,i,s,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,s,i,r),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(fo(t,n,d,s),c=t.memoizedState),(l=ti||po(t,n,l,s,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=a,s=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,si(e,t),u=vo(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Rs,"object"===typeof c&&null!==c&&(l=jr(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&go(t,i,s,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,s,i,r),ci();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&kr(e.dependencies)?("function"===typeof o&&(fo(t,n,o,s),f=t.memoizedState),(u=ti||po(t,n,u,s,h,f,l)||null!==e&&null!==e.dependencies&&kr(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),i.props=s,i.state=f,i.context=l,s=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,Mo(e,t),s=0!==(128&t.flags),i||s?(i=t.stateNode,n=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&s?(t.child=no(t,e.child,null,r),t.child=no(t,null,n,r)):Ao(e,t,n,r),t.memoizedState=i.state,e=t.child):e=Xo(e,t,r),e}function Vo(e,t,n,s){return fr(),t.flags|=256,Ao(e,t,n,s),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:Hr()}}function Bo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function qo(e,t,n){var s,r=t.pendingProps,i=!1,o=0!==(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&0!==(2&uo.current)),s&&(i=!0,t.flags&=-129),s=0!==(32&t.flags),t.flags&=-33,null===e){if(ir){if(i?ao(t):lo(),ir){var l,c=rr;if(l=c){e:{for(l=c,c=or;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xs?{id:$s,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},(l=Os(18,null,null,0)).stateNode=c,l.return=t,t.child=l,sr=t,rr=null,l=!0):l=!1}l||cr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;co(t)}return c=r.children,r=r.fallback,i?(lo(),c=Wo({mode:"hidden",children:c},i=t.mode),r=Us(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(i=t.child).memoizedState=Uo(n),i.childLanes=Bo(e,s,n),t.memoizedState=zo,r):(ao(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Ko(e,t,n)):null!==t.memoizedState?(lo(),t.child=e.child,t.flags|=128,t=null):(lo(),i=r.fallback,c=t.mode,r=Wo({mode:"visible",children:r.children},c),(i=Us(i,c,n,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,no(t,e.child,null,n),(r=t.child).memoizedState=Uo(n),r.childLanes=Bo(e,s,n),t.memoizedState=zo,t=i);else if(ao(t),vd(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var u=s.dgst;s=u,(r=Error(a(419))).stack="",r.digest=s,pr({value:r,source:null,stack:null}),t=Ko(e,t,n)}else if(Co||Sr(e,t,n,!1),s=0!==(n&e.childLanes),Co||s){if(null!==(s=rc)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:Ce(r))&(s.suspendedLanes|n))?0:r)&&r!==l.retryLane))throw l.retryLane=r,Is(e,r),Lc(s,e,r),Eo;"$?"===c.data||Qc(),t=Ko(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,rr=yd(c.nextSibling),sr=t,ir=!0,ar=null,or=!1,null!==e&&(Qs[Ys++]=$s,Qs[Ys++]=Js,Qs[Ys++]=Xs,$s=e.id,Js=e.overflow,Xs=t),(t=Ho(t,r.children)).flags|=4096);return t}return i?(lo(),i=r.fallback,c=t.mode,u=(l=e.child).sibling,(r=Fs(l,{mode:"hidden",children:r.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fs(u,i):(i=Us(i,c,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,null===(c=e.child.memoizedState)?c=Uo(n):(null!==(l=c.cachePool)?(u=Dr._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hr(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Bo(e,s,n),t.memoizedState=zo,r):(ao(t),e=(n=e.child).sibling,(n=Fs(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Os(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ko(e,t,n){return no(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),wr(e.return,t,n)}function Qo(e,t,n,s,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Yo(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Ao(e,t,s.children,n),0!==(2&(s=uo.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(U(uo,s),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Qo(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ho(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Qo(t,!0,n,null,i);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Sr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $o(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!kr(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!$o(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),br(0,Dr,e.memoizedState.cache),fr();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:br(0,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qo(e,t,n):(ao(t),null!==(e=Xo(e,t,n))?e.sibling:null);ao(t);break;case 19:var r=0!==(128&e.flags);if((s=0!==(n&t.childLanes))||(Sr(e,t,n,!1),s=0!==(n&t.childLanes)),r){if(s)return Yo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(uo,uo.current),s)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:br(0,Dr,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,ir&&0!==(1048576&t.flags)&&er(t,Gs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,"function"!==typeof s){if(void 0!==s&&null!==s){if((r=s.$$typeof)===_){t.tag=11,t=To(null,t,s,e,n);break e}if(r===N){t.tag=14,t=Io(null,t,s,e,n);break e}}throw t=D(s)||s,Error(a(306,t,""))}Ls(s)?(e=vo(s,e),t.tag=1,t=Fo(null,t,s,e,n)):(t.tag=0,t=Oo(null,t,s,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,s=t.type,r=vo(s,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));s=t.pendingProps;var i=t.memoizedState;r=i.element,si(e,t),ui(t,s,null,n);var o=t.memoizedState;if(s=o.cache,br(0,Dr,s),s!==i.cache&&_r(t,[Dr],n,!0),ci(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Vo(e,t,s,n);break e}if(s!==r){pr(r=ks(Error(a(424)),t)),t=Vo(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(rr=yd(e.firstChild),sr=t,ir=!0,ar=null,or=!0,n=so(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),s===r){t=Xo(e,t,n);break e}Ao(e,t,s,n)}t=t.child}return t;case 26:return Mo(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:ir||(n=t.type,e=t.pendingProps,(s=rd(H.current).createElement(n))[De]=t,s[Pe]=e,td(s,n,e),We(s),t.stateNode=s):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ir&&(s=t.stateNode=wd(t.type,t.pendingProps,H.current),sr=t,or=!0,r=rr,md(t.type)?(bd=r,rr=yd(s.firstChild)):rr=r),Ao(e,t,t.pendingProps.children,n),Mo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ir&&((r=s=rr)&&(null!==(s=function(e,t,n,s){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,or))?(t.stateNode=s,sr=t,rr=yd(s.firstChild),or=!1,r=!0):r=!1),r||cr(t)),Q(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,od(r,i)?s=null:null!==o&&od(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=Ii(e,t,Ri,null,null,n),Yd._currentValue=r),Mo(e,t),Ao(e,t,s,n),t.child;case 6:return null===e&&ir&&((e=n=rr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,or))?(t.stateNode=n,sr=t,rr=null,e=!0):e=!1),e||cr(t)),null;case 13:return qo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=no(t,null,s,n):Ao(e,t,s,n),t.child;case 11:return To(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,br(0,t.type,s.value),Ao(e,t,s.children,n),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Nr(t),s=s(r=jr(r)),t.flags|=1,Ao(e,t,s,n),t.child;case 14:return Io(e,t,t.type,t.pendingProps,n);case 15:return Do(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},null===e?((n=Wo(s,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fs(e.child,s)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return Nr(t),s=jr(Dr),null===e?(null===(r=Br())&&(r=rc,i=Pr(),r.pooledCache=i,i.refCount++,null!==i&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:s,cache:r},ni(t),br(0,Dr,r)):(0!==(e.lanes&n)&&(si(e,t),ui(t,null,null,n),ci()),r=e.memoizedState,i=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),br(0,Dr,s)):(s=i.cache,br(0,Dr,s),s!==r.cache&&_r(t,[Dr],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zo(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=ro.current)&&((4194048&ac)===ac?null!==io:(62914560&ac)!==ac&&0===(536870912&ac)||t!==io))throw Jr=Qr,Kr;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=65011712&r.subtreeFlags,s|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function rl(e,t,n){var s=t.pendingProps;switch(nr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),xr(Dr),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hr(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mr())),sl(t),null;case 26:return n=t.memoizedState,null===e?(Zo(t),null!==n?(sl(t),el(t,n)):(sl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zo(t),sl(t),el(t,n)):(sl(t),t.flags&=-16777217):(e.memoizedProps!==s&&Zo(t),sl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Zo(t);else{if(!s){if(null===t.stateNode)throw Error(a(166));return sl(t),null}e=B.current,hr(t)?ur(t):(e=wd(r,s,n),t.stateNode=e,Zo(t))}return sl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Zo(t);else{if(!s){if(null===t.stateNode)throw Error(a(166));return sl(t),null}if(e=B.current,hr(t))ur(t);else{switch(r=rd(H.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof s.is?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"===typeof s.is?r.createElement(n,{is:s.is}):r.createElement(n)}}e[De]=t,e[Pe]=s;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(td(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return sl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&Zo(t);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(e=H.current,hr(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(r=sr))switch(r.tag){case 27:case 5:s=r.memoizedProps}e[De]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||$u(e.nodeValue,n)))||cr(t)}else(e=rd(e).createTextNode(s))[De]=t,t.stateNode=e}return sl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=hr(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[De]=t}else fr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),r=!1}else r=mr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(co(t),t):(co(t),null)}if(co(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==s,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool);var i=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),sl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),sl(t),null;case 10:return xr(t.type),sl(t),null;case 19:if(z(uo),null===(r=t.memoizedState))return sl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)nl(r,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ho(e))){for(t.flags|=128,nl(r,!1),e=i.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vs(n,e),n=n.sibling;return U(uo,1&uo.current|2),t.child}e=e.sibling}null!==r.tail&&te()>Sc&&(t.flags|=128,s=!0,nl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ho(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ir)return sl(t),null}else 2*te()-r.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,s=!0,nl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=uo.current,U(uo,s?1&e|2:1&e),t):(sl(t),null);case 22:case 23:return co(t),vi(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?0!==(536870912&n)&&0===(128&t.flags)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&z(Ur),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xr(Dr),sl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(nr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xr(Dr),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(co(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(uo),null;case 4:return G(),null;case 10:return xr(t.type),null;case 22:case 23:return co(t),vi(),null!==e&&z(Ur),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xr(Dr),null;default:return null}}function al(e,t){switch(nr(t),t.tag){case 3:xr(Dr),G();break;case 26:case 27:case 5:Y(t);break;case 4:G();break;case 13:co(t);break;case 19:z(uo);break;case 10:xr(t.type);break;case 22:case 23:co(t),vi(),null!==e&&z(Ur);break;case 24:xr(Dr)}}function ol(e,t){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var r=s.next;n=r;do{if((n.tag&e)===e){s=void 0;var i=n.create,a=n.inst;s=i(),a.destroy=s}n=n.next}while(n!==r)}}catch(o){du(t,t.return,o)}}function ll(e,t,n){try{var s=t.updateQueue,r=null!==s?s.lastEffect:null;if(null!==r){var i=r.next;s=i;do{if((s.tag&e)===e){var a=s.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(u){du(r,l,u)}}}s=s.next}while(s!==i)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(s){du(e,e.return,s)}}}function ul(e,t,n){n.props=vo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){du(e,t,s)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"===typeof n?e.refCleanup=n(s):n.current=s}}catch(r){du(e,t,r)}}function hl(e,t){var n=e.ref,s=e.refCleanup;if(null!==n)if("function"===typeof s)try{s()}catch(r){du(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){du(e,t,i)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){du(e,e.return,r)}}function ml(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||Zu(e,t,m,null,s,h)}}for(var f in s){var m=s[f];if(h=n[f],s.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":r=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Zu(e,t,f,m,s,h)}}return void gt(e,o,l,c,u,d,i,r);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(i)||Zu(e,t,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(null!=i||null!=c))switch(r){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Zu(e,t,r,i,s,c)}return t=l,n=o,s=m,void(null!=f?bt(e,!!n,f,!1):!!s!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,s,r)}for(o in s)if(r=s[o],i=n[o],s.hasOwnProperty(o)&&(null!=r||null!=i))switch(o){case"value":f=r;break;case"defaultValue":m=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(a(91));break;default:r!==i&&Zu(e,t,o,r,s,i)}return void xt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!s.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Zu(e,t,p,null,s,f);for(c in s)if(f=s[c],m=n[c],s.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,s,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!s.hasOwnProperty(g)&&Zu(e,t,g,null,s,f);for(u in s)if(f=s[u],m=n[u],s.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Zu(e,t,u,f,s,m)}return;default:if(jt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!s.hasOwnProperty(v)&&ed(e,t,v,void 0,s,f);for(d in s)f=s[d],m=n[d],!s.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||ed(e,t,d,f,s,m);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!s.hasOwnProperty(y)&&Zu(e,t,y,null,s,f);for(h in s)f=s[h],m=n[h],!s.hasOwnProperty(h)||f===m||null==f&&null==m||Zu(e,t,h,f,s,m)}(s,e.type,n,t),s[Pe]=t}catch(r){du(e,e.return,r)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==s&&(27===s&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&(27===s&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);td(t,s,n),t[De]=e,t[Pe]=n}catch(i){du(e,e.return,i)}}var xl=!1,wl=!1,_l=!1,Sl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Nl(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&s&&ol(5,n);break;case 1:if(Fl(e,n),4&s)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){du(n,n.return,a)}else{var r=vo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){du(n,n.return,o)}}64&s&&cl(n),512&s&&dl(n,n.return);break;case 3:if(Fl(e,n),64&s&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){du(n,n.return,a)}}break;case 27:null===t&&4&s&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&s&&fl(n),512&s&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&s&&Il(e,n),64&s&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,n=pu.bind(null,n))));break;case 22:if(!(s=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||wl,r=xl;var i=wl;xl=s,(wl=t)&&!i?zl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),xl=r,wl=i}break;case 30:break;default:Fl(e,n)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Cl=!1;function Al(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var s=El,r=Cl;md(n.type)&&(El=n.stateNode,Cl=!1),Al(e,t,n),_d(n.stateNode),El=s,Cl=r;break;case 5:wl||hl(n,t);case 6:if(s=El,r=Cl,El=null,Al(e,t,n),Cl=r,null!==(El=s))if(Cl)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(n.stateNode)}catch(a){du(n,t,a)}else try{El.removeChild(n.stateNode)}catch(a){du(n,t,a)}break;case 18:null!==El&&(Cl?(pd(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pd(El,n.stateNode));break;case 4:s=El,r=Cl,El=n.stateNode.containerInfo,Cl=!0,Al(e,t,n),El=s,Cl=r;break;case 0:case 11:case 14:case 15:wl||ll(2,n,t),wl||ll(4,n,t),Al(e,t,n);break;case 1:wl||(hl(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount&&ul(n,t,s)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:wl=(s=wl)||null!==n.memoizedState,Al(e,t,n),wl=s;break;default:Al(e,t,n)}}function Il(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){du(t,t.return,n)}}function Dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var s=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){El=l.stateNode,Cl=!1;break e}break;case 5:El=l.stateNode,Cl=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===El)throw Error(a(160));Tl(i,o,r),El=null,Cl=!1,null!==(i=r.alternate)&&(i.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ml(t,e),t=t.sibling}var Rl=null;function Ml(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ol(e),4&s&&(ll(3,e,e.return),ol(3,e),ll(5,e,e.return));break;case 1:Pl(t,e),Ol(e),512&s&&(wl||null===n||hl(n,n.return)),64&s&&xl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var r=Rl;if(Pl(t,e),Ol(e),512&s&&(wl||null===n||hl(n,n.return)),4&s){var i=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":(!(i=r.getElementsByTagName("title")[0])||i[Ve]||i[De]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),td(i,s,n),i[De]=e,We(i),s=i;break e;case"link":var o=zd("link","href",r).get(s+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}td(i=r.createElement(s),s,n),r.head.appendChild(i);break;case"meta":if(o=zd("meta","content",r).get(s+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}td(i=r.createElement(s),s,n),r.head.appendChild(i);break;default:throw Error(a(468,s))}i[De]=e,We(i),s=i}e.stateNode=s}else Ud(r,e.type,e.stateNode);else e.stateNode=Md(r,s,e.memoizedProps);else i!==s?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===s?Ud(r,e.type,e.stateNode):Md(r,s,e.memoizedProps)):null===s&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ol(e),512&s&&(wl||null===n||hl(n,n.return)),null!==n&&4&s&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ol(e),512&s&&(wl||null===n||hl(n,n.return)),32&e.flags){r=e.stateNode;try{_t(r,"")}catch(m){du(e,e.return,m)}}4&s&&null!=e.stateNode&&ml(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&s&&(_l=!0);break;case 6:if(Pl(t,e),Ol(e),4&s){if(null===e.stateNode)throw Error(a(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(m){du(e,e.return,m)}}break;case 3:if(Vd=null,r=Rl,Rl=Nd(t.containerInfo),Pl(t,e),Rl=r,Ol(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(m){du(e,e.return,m)}_l&&(_l=!1,Ll(e));break;case 4:s=Rl,Rl=Nd(e.stateNode.containerInfo),Pl(t,e),Ol(e),Rl=s;break;case 12:default:Pl(t,e),Ol(e);break;case 13:Pl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Dl(e,s)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=wl;if(xl=u||r,wl=d||c,Pl(t,e),wl=d,xl=u,Ol(e),8192&s)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||xl||wl||Vl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,r)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){du(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){du(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Dl(e,n))));break;case 19:Pl(t,e),Ol(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Dl(e,s)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(pl(s)){n=s;break}s=s.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode;yl(e,gl(e),r);break;case 5:var i=n.stateNode;32&n.flags&&(_t(i,""),n.flags&=-33),yl(e,gl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nl(e,t.alternate,t),t=t.sibling}function Vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Vl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Vl(t);break;case 27:_d(t.stateNode);case 26:case 5:hl(t,t.return),Vl(t);break;case 22:null===t.memoizedState&&Vl(t);break;default:Vl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,r=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:zl(r,i,n),ol(4,i);break;case 1:if(zl(r,i,n),"function"===typeof(r=(s=i).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){du(s,s.return,c)}if(null!==(r=(s=i).updateQueue)){var o=s.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)di(l[r],o)}catch(c){du(s,s.return,c)}}n&&64&a&&cl(i),dl(i,i.return);break;case 27:bl(i);case 26:case 5:zl(r,i,n),n&&null===s&&4&a&&fl(i),dl(i,i.return);break;case 12:zl(r,i,n);break;case 13:zl(r,i,n),n&&4&a&&Il(r,i);break;case 22:null===i.memoizedState&&zl(r,i,n),dl(i,i.return);break;case 30:break;default:zl(r,i,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Rr(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rr(e))}function ql(e,t,n,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,s),t=t.sibling}function Hl(e,t,n,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,s),2048&r&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,s);break;case 3:ql(e,t,n,s),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rr(e)));break;case 12:if(2048&r){ql(e,t,n,s),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else ql(e,t,n,s);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?ql(e,t,n,s):Kl(e,t):2&i._visibility?ql(e,t,n,s):(i._visibility|=2,Wl(e,t,n,s,0!==(10256&t.subtreeFlags))),2048&r&&Ul(a,t);break;case 24:ql(e,t,n,s),2048&r&&Bl(t.alternate,t)}}function Wl(e,t,n,s,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=s,c=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(i,a,o,l,r),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Wl(i,a,o,l,r):Kl(i,a):(u._visibility|=2,Wl(i,a,o,l,r)),r&&2048&c&&Ul(a.alternate,a);break;case 24:Wl(i,a,o,l,r),r&&2048&c&&Bl(a.alternate,a);break;default:Wl(i,a,o,l,r)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,s=t,r=s.flags;switch(s.tag){case 22:Kl(n,s),2048&r&&Ul(s.alternate,s);break;case 24:Kl(n,s),2048&r&&Bl(s.alternate,s);break;default:Kl(n,s)}t=t.sibling}}var Gl=8192;function Ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(a(475));var s=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Td(n.href),i=e.querySelector(Id(r));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(s.count++,s=Wd.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Dd(n),(r=Sd.get(r))&&Ld(n,r),We(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",n),t.instance=i}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(s.count++,t=Wd.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Rl;Rl=Nd(e.stateNode.containerInfo),Ql(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Ql(e),Gl=t):Ql(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];kl=s,ec(s,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:$l(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:$l(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):$l(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var s=t[n];kl=s,ec(s,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var s=n.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(null!==(s=n.child))s.return=n,kl=s;else e:for(n=e;null!==kl;){var r=(s=kl).sibling,i=s.return;if(jl(s),s===n){kl=null;break e}if(null!==r){r.return=i,kl=r;break e}kl=i}}}var tc={getCacheForType:function(e){var t=jr(Dr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,sc=0,rc=null,ic=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,mc=0,pc=0,gc=0,vc=0,yc=0,bc=null,xc=null,wc=!1,_c=0,Sc=1/0,kc=null,Nc=null,jc=0,Ec=null,Cc=null,Ac=0,Tc=0,Ic=null,Dc=null,Pc=0,Rc=null;function Mc(){if(0!==(2&sc)&&0!==ac)return ac&-ac;if(null!==R.T){return 0!==Lr?Lr:Tu()}return Te()}function Oc(){0===vc&&(vc=0===(536870912&ac)||ir?_e():536870912);var e=ro.current;return null!==e&&(e.flags|=32),vc}function Lc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),Uc(e,ac,vc,!1)),Ne(e,n),0!==(2&sc)&&e===rc||(e===rc&&(0===(2&sc)&&(pc|=n),4===fc&&Uc(e,ac,vc,!1)),Su(e))}function Fc(e,t,n){if(0!==(6&sc))throw Error(a(327));for(var s=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),r=s?function(e,t){var n=sc;sc|=2;var s=Kc(),r=Gc();rc!==e||ac!==t?(kc=null,Sc=te()+500,Hc(e,t)):uc=xe(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var i=lc;t:switch(oc){case 1:oc=0,lc=null,eu(e,t,i,1);break;case 2:case 9:if(Yr(i)){oc=0,lc=null,Zc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),Su(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Yr(i)?(oc=0,lc=null,Zc(t)):(oc=0,lc=null,eu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||Bd(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,lc=null,eu(e,t,i,5);break;case 6:oc=0,lc=null,eu(e,t,i,6);break;case 8:qc(),fc=6;break e;default:throw Error(a(462))}}$c();break}catch(d){Wc(e,d)}return yr=vr=null,R.H=s,R.A=r,sc=n,null!==ic?0:(rc=null,ac=0,Cs(),fc)}(e,t):Yc(e,t,!0),i=s;;){if(0===r){uc&&!s&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!i||zc(n)){if(2===r){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,r=4;break e}i=xc,xc=r,null!==i&&(null===xc?xc=i:xc.push.apply(xc,i))}r=o}if(i=!1,2!==r)continue}}if(1===r){Hc(e,0),Uc(e,t,0,!0);break}e:{switch(s=e,i=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Uc(s,t,vc,!cc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(r=_c+300-te())){if(Uc(s,t,vc,!cc),0!==be(s,0,!0))break e;s.timeoutHandle=cd(Vc.bind(null,s,n,xc,kc,wc,t,vc,pc,yc,cc,i,2,-0,0),r)}else Vc(s,n,xc,kc,wc,t,vc,pc,yc,cc,i,0,-0,0)}break}r=Yc(e,t,!1),i=!1}Su(e)}function Vc(e,t,n,s,r,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===qd)throw Error(a(475));var e=qd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(su.bind(null,e,t,i,n,s,r,o,l,c,d,1,f,m)),void Uc(e,i,o,!u);su(e,t,i,n,s,r,o,l,c)}function zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Yn(i(),r))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,s){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var i=31-fe(r),a=1<<i;s[i]=-1,r&=~a}0!==n&&je(e,n,t)}function Bc(){return 0!==(6&sc)||(ku(0,!1),!1)}function qc(){if(null!==ic){if(0===oc)var e=ic.return;else yr=vr=null,Li(e=ic),Ya=null,Xa=0,e=ic;for(;null!==e;)al(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),rc=e,ic=n=Fs(e.current,null),ac=t,oc=0,lc=null,cc=!1,uc=xe(e,t),dc=!1,yc=vc=gc=pc=mc=fc=0,xc=bc=null,wc=!1,0!==(8&t)&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var r=31-fe(s),i=1<<r;t|=e[r],s&=~i}return hc=t,Cs(),n}function Wc(e,t){bi=null,R.H=Wa,t===Wr||t===Gr?(t=Zr(),oc=3):t===Kr?(t=Zr(),oc=4):oc=t===Eo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===ic&&(fc=1,_o(e,ks(t,e.current)))}function Kc(){var e=R.H;return R.H=Wa,null===e?Wa:e}function Gc(){var e=R.A;return R.A=tc,e}function Qc(){fc=4,cc||(4194048&ac)!==ac&&null!==ro.current||(uc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===rc||Uc(rc,ac,vc,!1)}function Yc(e,t,n){var s=sc;sc|=2;var r=Kc(),i=Gc();rc===e&&ac===t||(kc=null,Hc(e,t)),t=!1;var a=fc;e:for(;;)try{if(0!==oc&&null!==ic){var o=ic,l=lc;switch(oc){case 8:qc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=oc;if(oc=0,lc=null,eu(e,o,l,c),n&&uc){a=0;break e}break;default:c=oc,oc=0,lc=null,eu(e,o,l,c)}}Xc(),a=fc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,yr=vr=null,sc=s,R.H=r,R.A=i,null===ic&&(rc=null,ac=0,Cs()),a}function Xc(){for(;null!==ic;)Jc(ic)}function $c(){for(;null!==ic&&!Z();)Jc(ic)}function Jc(e){var t=Jo(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Li(t);default:al(n,t),t=Jo(n,t=ic=Vs(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,s){yr=vr=null,Li(t),Ya=null,Xa=0;var r=t.return;try{if(function(e,t,n,s,r){if(n.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(t=n.alternate)&&Sr(t,n,r,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===io?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===Qr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),hu(e,s,r)),!1;case 22:return n.flags|=65536,s===Qr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),hu(e,s,r)),!1}throw Error(a(435,n.tag))}return hu(e,s,r),Qc(),!1}if(ir)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==lr&&pr(ks(e=Error(a(422),{cause:s}),n))):(s!==lr&&pr(ks(t=Error(a(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,s=ks(s,n),oi(e,r=ko(e.stateNode,s,r)),4!==fc&&(fc=2)),!1;var i=Error(a(520),{cause:s});if(i=ks(i,n),null===bc?bc=[i]:bc.push(i),4!==fc&&(fc=2),null===t)return!0;s=ks(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,oi(n,e=ko(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Nc||!Nc.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,jo(r=No(r),e,n,s),oi(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,ac))return fc=1,_o(e,ks(n,e.current)),void(ic=null)}catch(i){if(null!==r)throw ic=r,i;return fc=1,_o(e,ks(n,e.current)),void(ic=null)}32768&t.flags?(ir||1===s?e=!0:uc||0!==(536870912&ac)?e=!1:(cc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=ro.current)&&13===s.tag&&(s.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);fc=6,ic=null}function su(e,t,n,s,r,i,o,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==jc);if(0!==(6&sc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,s,r,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==s&&je(e,s,0),0!==i&&0===r&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Es,o,l,c),e===rc&&(ic=rc=null,ac=0),Cc=t,Ec=e,Ac=n,Tc=i,Ic=r,Dc=s,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,function(e,t){$(e,t)}(ie,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),s=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||s){s=R.T,R.T=null,r=M.p,M.p=2,o=sc,sc|=4;try{!function(e,t){if(e=e.containerInfo,nd=sh,ts(e=es(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=o),f===i&&++d===s&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},sh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(i=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var p=vo(n.type,r,(n.elementType,n.type));e=s.getSnapshotBeforeUpdate(p,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(v){du(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{sc=o,M.p=r,R.T=s}}jc=1,ru(),iu(),au()}}function ru(){if(1===jc){jc=0;var e=Ec,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var s=M.p;M.p=2;var r=sc;sc|=4;try{Ml(t,e);var i=sd,a=es(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&ts(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var v=Jn(o,p),y=Jn(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}sh=!!nd,sd=nd=null}finally{sc=r,M.p=s,R.T=n}}e.current=t,jc=2}}function iu(){if(2===jc){jc=0;var e=Ec,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var s=M.p;M.p=2;var r=sc;sc|=4;try{Nl(e,t.alternate,t)}finally{sc=r,M.p=s,R.T=n}}jc=3}}function au(){if(4===jc||3===jc){jc=0,ee();var e=Ec,t=Cc,n=Ac,s=Dc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Cc=Ec=null,ou(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Nc=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==s){t=R.T,r=M.p,M.p=2,R.T=null;try{for(var i=e.onRecoverableError,a=0;a<s.length;a++){var o=s[a];i(o.value,{componentStack:o.stack})}}finally{R.T=t,M.p=r}}0!==(3&Ac)&&lu(),Su(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===Rc?Pc++:(Pc=0,Rc=e):Pc=0,ku(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rr(t)))}function lu(e){return ru(),iu(),au(),cu()}function cu(){if(5!==jc)return!1;var e=Ec,t=Tc;Tc=0;var n=Ae(Ac),s=R.T,r=M.p;try{M.p=32>n?32:n,R.T=null,n=Ic,Ic=null;var i=Ec,o=Ac;if(jc=0,Cc=Ec=null,Ac=0,0!==(6&sc))throw Error(a(331));var l=sc;if(sc|=4,Jl(i.current),Hl(i,i.current,o,n),sc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{M.p=r,R.T=s,ou(e,t)}}function uu(e,t,n){t=ks(n,t),null!==(e=ii(e,t=ko(e.stateNode,t,2),2))&&(Ne(e,2),Su(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Nc||!Nc.has(s))){e=ks(n,e),null!==(s=ii(t,n=No(2),2))&&(jo(n,s,t,e),Ne(s,2),Su(s));break}}t=t.return}}function hu(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new nc;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(dc=!0,r.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>te()-_c?0===(2&sc)&&Hc(e,0):gc|=n,yc===ac&&(yc=0)),Su(e)}function mu(e,t){0===t&&(t=Se()),null!==(e=Is(e,t))&&(Ne(e,t),Su(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==s&&s.delete(t),mu(e,n)}var vu=null,yu=null,bu=!1,xu=!1,wu=!1,_u=0;function Su(e){e!==yu&&null===e.next&&(null===yu?vu=yu=e:yu=yu.next=e),xu=!0,bu||(bu=!0,hd(function(){0!==(6&sc)?$(se,Nu):ju()}))}function ku(e,t){if(!wu&&xu){wu=!0;do{for(var n=!1,s=vu;null!==s;){if(!t)if(0!==e){var r=s.pendingLanes;if(0===r)var i=0;else{var a=s.suspendedLanes,o=s.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=r&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Au(s,i))}else i=ac,0===(3&(i=be(s,s===rc?i:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||xe(s,i)||(n=!0,Au(s,i));s=s.next}}while(n);wu=!1}}function Nu(){ju()}function ju(){xu=bu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,s=vu;null!==s;){var r=s.next,i=Eu(s,t);0===i?(s.next=null,null===n?vu=r:n.next=r,null===r&&(yu=n)):(n=s,(0!==e||0!==(3&i))&&(xu=!0)),s=r}ku(e,!1)}function Eu(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&s)||(r[a]=we(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ac,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&J(s),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==s&&J(s),Ae(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=oe}return s=Cu.bind(null,e),n=$(n,s),e.callbackPriority=t,e.callbackNode=n,t}return null!==s&&null!==s&&J(s),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var s=ac;return 0===(s=be(e,e===rc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,s,t),Eu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Au(e,t){if(lu())return null;Fc(e,t,!0)}function Tu(){return 0===_u&&(_u=_e()),_u}function Iu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Du(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<ws.length;Pu++){var Ru=ws[Pu];_s(Ru.toLowerCase(),"on"+(Ru[0].toUpperCase()+Ru.slice(1)))}_s(fs,"onAnimationEnd"),_s(ms,"onAnimationIteration"),_s(ps,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(gs,"onTransitionRun"),_s(vs,"onTransitionStart"),_s(ys,"onTransitionCancel"),_s(bs,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=c;try{i(r)}catch(u){yo(u)}r.currentTarget=null,i=l}else for(a=0;a<s.length;a++){if(l=(o=s[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=c;try{i(r)}catch(u){yo(u)}r.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var s=e+"__bubble";n.has(s)||(Bu(t,e,2,!1),n.add(s))}function Vu(e,t,n){var s=0;t&&(s|=4),Bu(n,e,s,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[zu]){e[zu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Ou.has(t)||Vu(t,!1,e),Vu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zu]||(t[zu]=!0,Vu("selectionchange",!1,t))}}function Bu(e,t,n,s){switch(uh(t)){case 2:var r=rh;break;case 8:r=ih;break;default:r=ah}n=r.bind(null,t,n,e),r=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function qu(e,t,n,s,r){var i=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var a=s.tag;if(3===a||4===a){var o=s.stateNode.containerInfo;if(o===r)break;if(4===a)for(a=s.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===r)return;a=a.return}for(;null!==o;){if(null===(a=Ue(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){s=i=a;continue e}o=o.parentNode}}s=s.return}Ot(function(){var s=i,r=It(n),a=[];e:{var o=xs.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fs:case ms:case ps:c=on;break;case bs:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Lt(p,f))&&d.push(Hu(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,r),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Tt||!(u=n.relatedTarget||n.fromElement)||!Ue(u)&&!u[Re])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=s,null!==(u=(u=n.relatedTarget||n.toElement)?Ue(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=s),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:qe(c),m=null==u?o:qe(u),(o=new d(g,p+"leave",c,n,r)).target=h,o.relatedTarget=m,g=null,Ue(r)===s&&((d=new d(f,p+"enter",u,n,r)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Ku(m))p++;for(m=0,g=f;g;g=Ku(g))m++;for(;0<p-m;)d=Ku(d),p--;for(;0<m-p;)f=Ku(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Ku(d),f=Ku(f)}d=null}else d=null;null!==c&&Gu(a,o,c,d,!1),null!==u&&null!==h&&Gu(a,h,u,d,!0)}if("select"===(c=(o=s?qe(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Dn(o))if(Vn)v=Qn;else{v=Kn;var y=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?s&&jt(s.elementType)&&(v=Fn):v=Gn;switch(v&&(v=v(e,s))?Pn(a,v,n,r):(y&&y(e,o,s),"focusout"===e&&s&&"number"===o.type&&null!=s.memoizedProps.value&&yt(o,"number",o.value)),y=s?qe(s):window,e){case"focusin":(Dn(y)||"true"===y.contentEditable)&&(ss=y,rs=s,is=null);break;case"focusout":is=rs=ss=null;break;case"mousedown":as=!0;break;case"contextmenu":case"mouseup":case"dragend":as=!1,os(a,n,r);break;case"selectionchange":if(ns)break;case"keydown":case"keyup":os(a,n,r)}var b;if(_n)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Tn?Cn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Nn&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Tn&&(b=Ht()):(Bt="value"in(Ut=r)?Ut.value:Ut.textContent,Tn=!0)),0<(y=Wu(s,x)).length&&(x=new cn(x,e,null,n,r),a.push({event:x,listeners:y}),b?x.data=b:null!==(b=An(n))&&(x.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(En=!0,jn);case"textInput":return(e=t.data)===jn&&En?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!_n&&Cn(e,t)?(e=Ht(),qt=Bt=Ut=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Wu(s,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,r),a.push({event:y,listeners:x}),y.data=b)),function(e,t,n,s,r){if("submit"===t&&n&&n.stateNode===r){var i=Iu((r[Pe]||null).action),a=s.submitter;a&&null!==(t=(t=a[Pe]||null)?Iu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,s,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==_u){var e=a?Du(r,a):new FormData(r);Ta(n,{pending:!0,data:e,method:r.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Du(r,a):new FormData(r),Ta(n,{pending:!0,data:e,method:r.method,action:i},i,e))},currentTarget:r}]})}}(a,e,s,n,r)}Lu(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,i=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===i||(null!=(r=Lt(e,n))&&s.unshift(Hu(e,r,i)),null!=(r=Lt(e,t))&&s.push(Hu(e,r,i))),3===e.tag)return s;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,s,r){for(var i=t._reactName,a=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===s)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=Lt(n,i))&&a.unshift(Hu(n,c,l)):r||null!=(c=Lt(n,i))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function $u(e,t){return t=Xu(t),Xu(e)===t}function Ju(){}function Zu(e,t,n,s,r,i){switch(n){case"children":"string"===typeof s?"body"===t||"textarea"===t&&""===s||_t(e,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==t&&_t(e,""+s);break;case"className":nt(e,"class",s);break;case"tabIndex":nt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,s);break;case"style":Nt(e,s,i);break;case"data":if("object"!==t){nt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=At(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"===typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Zu(e,t,"name",r.name,r,null),Zu(e,t,"formEncType",r.formEncType,r,null),Zu(e,t,"formMethod",r.formMethod,r,null),Zu(e,t,"formTarget",r.formTarget,r,null)):(Zu(e,t,"encType",r.encType,r,null),Zu(e,t,"method",r.method,r,null),Zu(e,t,"target",r.target,r,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(n);break}s=At(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Ju);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(a(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":e.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){e.removeAttribute("xlink:href");break}n=At(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",s);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":tt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,s)}}function ed(e,t,n,s,r,i){switch(n){case"style":Nt(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(a(61));if(null!=(n=s.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof s?_t(e,s):("number"===typeof s||"bigint"===typeof s)&&_t(e,""+s);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Pe]||null)?i[n]:null)&&e.removeEventListener(t,i,r),"function"!==typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):tt(e,n,s):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,r)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var s,r=!1,i=!1;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(null!=o)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,s,o,n,null)}}return i&&Zu(e,t,"srcSet",n.srcSet,n,null),void(r&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=s=o=i=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(null!=d)switch(r){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Zu(e,t,r,d,n,null)}}return vt(e,s,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),r=o=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:Zu(e,t,i,l,n,null)}return t=s,n=o,e.multiple=!!r,void(null!=t?bt(e,!!r,t,!1):null!=n&&bt(e,!!r,n,!0));case"textarea":for(o in Fu("invalid",e),s=i=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Zu(e,t,o,l,n,null)}return wt(e,r,i,s),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Zu(e,t,c,r,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(r=0;r<Mu.length;r++)Fu(Mu[r],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,u,r,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(r=n[d])&&ed(e,t,d,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&Zu(e,t,l,r,n,null))}var nd=null,sd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function pd(e,t){var n=t,s=0,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<s&&8>s){n=s;var a=e.ownerDocument;if(1&n&&_d(a.documentElement),2&n&&_d(a.body),4&n)for(_d(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===r)return e.removeChild(i),void Ch(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);Ch(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function xd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function _d(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Sd=new Map,kd=new Set;function Nd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jd=M.d;M.d={f:function(){var e=jd.f(),t=Bc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):jd.r(e)},D:function(e){jd.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){jd.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){jd.L(e,t,n);var s=Ed;if(s&&e&&t){var r='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+pt(n.imageSizes)+'"]')):r+='[href="'+pt(e)+'"]';var i=r;switch(t){case"style":i=Td(e);break;case"script":i=Pd(e)}Sd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(i,e),null!==s.querySelector(r)||"style"===t&&s.querySelector(Id(i))||"script"===t&&s.querySelector(Rd(i))||(td(t=s.createElement("link"),"link",e),We(t),s.head.appendChild(t)))}},m:function(e,t){jd.m(e,t);var n=Ed;if(n&&e){var s=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+pt(s)+'"][href="'+pt(e)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Pd(e)}if(!Sd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(i,e),null===n.querySelector(r))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(i)))return}td(s=n.createElement("link"),"link",e),We(s),n.head.appendChild(s)}}},X:function(e,t){jd.X(e,t);var n=Ed;if(n&&e){var s=He(n).hoistableScripts,r=Pd(e),i=s.get(r);i||((i=n.querySelector(Rd(r)))||(e=h({src:e,async:!0},t),(t=Sd.get(r))&&Fd(e,t),We(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}},S:function(e,t,n){jd.S(e,t,n);var s=Ed;if(s&&e){var r=He(s).hoistableStyles,i=Td(e);t=t||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(Id(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(i))&&Ld(e,n);var l=a=s.createElement("link");We(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Od(a,t,s)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}},M:function(e,t){jd.M(e,t);var n=Ed;if(n&&e){var s=He(n).hoistableScripts,r=Pd(e),i=s.get(r);i||((i=n.querySelector(Rd(r)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(r))&&Fd(e,t),We(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}};var Ed="undefined"===typeof document?null:document;function Cd(e,t,n){var s=Ed;if(s&&"string"===typeof t&&t){var r=pt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),kd.has(r)||(kd.add(r),e={rel:e,crossOrigin:n,href:t},null===s.querySelector(r)&&(td(t=s.createElement("link"),"link",e),We(t),s.head.appendChild(t)))}}function Ad(e,t,n,s){var r,i,o,l,c=(c=H.current)?Nd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Td(n.href),(s=(n=He(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Td(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Id(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(r=c,i=e,o=n,l=d.state,r.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=r.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),td(i,"link",o),We(i),r.head.appendChild(i))))),t&&null===s)throw Error(a(528,""));return d}if(t&&null!==s)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(s=(n=He(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Td(e){return'href="'+pt(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function Dd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+pt(e)+'"]'}function Rd(e){return"script[async]"+e}function Md(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(s)return t.instance=s,We(s),s;var r=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(s=(e.ownerDocument||e).createElement("style")),td(s,"style",r),Od(s,n.precedence,e),t.instance=s;case"stylesheet":r=Td(n.href);var i=e.querySelector(Id(r));if(i)return t.state.loading|=4,t.instance=i,We(i),i;s=Dd(n),(r=Sd.get(r))&&Ld(s,r),We(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",s),t.state.loading|=4,Od(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(r=e.querySelector(Rd(i)))?(t.instance=r,We(r),r):(s=n,(r=Sd.get(i))&&Fd(s=h({},n),r),We(r=(e=e.ownerDocument||e).createElement("script")),td(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Od(s,n.precedence,e));return t.instance}function Od(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===t)i=o;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Vd=null;function zd(e,t,n){if(null===Vd){var s=new Map,r=Vd=new Map;r.set(n,s)}else(s=(r=Vd).get(n))||(s=new Map,r.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[Ve]||i[De]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=s.get(a);o?o.push(i):s.set(a,[i])}}return s}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Qd,e),Kd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var s=n.get(null);else{n=new Map,Kd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var a=r[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}a=(r=t.instance).getAttribute("data-precedence"),(i=n.get(a)||s)===s&&n.set(null,r),n.set(a,r),this.count++,s=Wd.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:w,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Xd(e,t,n,s,r,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function $d(e,t,n,s,r,i,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Os(3,null,null,t),e.current=i,i.stateNode=e,(t=Pr()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:t},ni(i),e}function Jd(e){return e?e=Rs:Rs}function Zd(e,t,n,s,r,i){r=Jd(r),null===s.context?s.context=r:s.pendingContext=r,(s=ri(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(s.callback=i),null!==(n=ii(e,s,t))&&(Lc(n,0,t),ai(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Is(e,67108864);null!==t&&Lc(t,0,67108864),th(e,67108864)}}var sh=!0;function rh(e,t,n,s){var r=R.T;R.T=null;var i=M.p;try{M.p=2,ah(e,t,n,s)}finally{M.p=i,R.T=r}}function ih(e,t,n,s){var r=R.T;R.T=null;var i=M.p;try{M.p=8,ah(e,t,n,s)}finally{M.p=i,R.T=r}}function ah(e,t,n,s){if(sh){var r=oh(s);if(null===r)qu(e,t,s,lh,n),bh(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return hh=xh(hh,e,t,n,s,r),!0;case"dragenter":return fh=xh(fh,e,t,n,s,r),!0;case"mouseover":return mh=xh(mh,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return ph.set(i,xh(ph.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,gh.set(i,xh(gh.get(i)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(bh(e,s),4&t&&-1<yh.indexOf(e)){for(;null!==r;){var i=Be(r);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ye(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}Su(i),0===(6&sc)&&(Sc=te()+500,ku(0,!1))}}break;case 13:null!==(o=Is(i,2))&&Lc(o,0,2),Bc(),th(i,2)}if(null===(i=oh(s))&&qu(e,t,s,lh,n),i===r)break;r=i}null!==r&&s.stopPropagation()}else qu(e,t,s,null,n)}}function oh(e){return ch(e=It(e))}var lh=null;function ch(e){if(lh=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case se:return 2;case re:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,mh=null,ph=new Map,gh=new Map,vh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function xh(e,t,n,s,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=Be(t))&&nh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function wh(e){var t=Ue(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Mc();e=Ce(e);var t=Is(n,e);null!==t&&Lc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _h(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&nh(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);Tt=s,n.target.dispatchEvent(s),Tt=null,t.shift()}return!0}function Sh(e,t,n){_h(e)&&n.delete(t)}function kh(){dh=!1,null!==hh&&_h(hh)&&(hh=null),null!==fh&&_h(fh)&&(fh=null),null!==mh&&_h(mh)&&(mh=null),ph.forEach(Sh),gh.forEach(Sh)}function Nh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kh)))}var jh=null;function Eh(e){jh!==e&&(jh=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],r=e[t+2];if("function"!==typeof s){if(null===ch(s||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Ta(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Ch(e){function t(t){return Nh(t,e)}null!==hh&&Nh(hh,e),null!==fh&&Nh(fh,e),null!==mh&&Nh(mh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<vh.length;n++){var s=vh[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)wh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],a=r[Pe]||null;if("function"===typeof i)a||Eh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(r=i,a=i[Pe]||null)o=a.formAction;else if(null!==ch(r))continue}else o=a.action;"function"===typeof o?n[s+1]=o:(n.splice(s,3),s-=3),Eh(n)}}}function Ah(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zd(t.current,Mc(),e,t,null,null)},Th.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Bc(),t[Re]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&wh(e)}};var Ih=r.version;if("19.1.1"!==Ih)throw Error(a(527,Ih,"19.1.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(s=r.return)){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return u(r),e;if(i===s)return u(r),t;i=i.sibling}throw Error(a(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,s=i;break}if(c===s){o=!0,s=r,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,s=r;break}if(c===s){o=!0,s=i,n=r;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Dh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Dh),de=Ph}catch(Mh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,s="",r=bo,i=xo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=$d(e,1,!1,null,0,n,s,r,i,l,0,null),e[Re]=t.current,Uu(e),new Ah(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var s=!1,r="",i=bo,l=xo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=$d(e,1,!0,t,0,s,r,i,l,c,0,u)).context=Jd(null),n=t.current,(r=ri(s=Ce(s=Mc()))).callback=null,ii(n,r,s),n=s,t.current.lanes=n,Ne(t,n),Su(t),e[Re]=t.current,Uu(e),new Th(t)},t.version="19.1.1"},22:(e,t,n)=>{n.d(t,{DY:()=>l,Lx:()=>o,Nn:()=>h,Nr:()=>f,createDocument:()=>c,gP:()=>u,ht:()=>p,lU:()=>d,sy:()=>m});var s=n(379),r=n(667),i=n(823),a=n(227);const o=async(e,t)=>{try{return(await(0,i.x9)(a.j2,e,t)).user}catch(n){throw n}},l=async(e,t)=>{try{return(await(0,i.eJ)(a.j2,e,t)).user}catch(n){throw n}},c=async(e,t)=>{try{return(await(0,r.gS)((0,r.rJ)(a.db,e),(0,s.A)((0,s.A)({},t),{},{createdAt:new Date,updatedAt:new Date}))).id}catch(n){throw n}},u=async e=>{try{const t=await(0,r.GG)((0,r.rJ)(a.db,e)),n=[];return t.forEach(e=>{n.push((0,s.A)({id:e.id},e.data()))}),n}catch(t){throw t}},d=async(e,t,n)=>{try{const i=(0,r.H9)(a.db,e,t);await(0,r.mZ)(i,(0,s.A)((0,s.A)({},n),{},{updatedAt:new Date}))}catch(i){throw i}},h=async(e,t)=>{try{await(0,r.kd)((0,r.H9)(a.db,e,t))}catch(n){throw n}},f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let i=(0,r.rJ)(a.db,e);if(t.length>0){const e=t.map(e=>(0,r._M)(e.field,e.operator,e.value));i=n?(0,r.P)(i,...e,(0,r.My)(n)):(0,r.P)(i,...e)}else n&&(i=(0,r.P)(i,(0,r.My)(n)));const o=await(0,r.GG)(i),l=[];return o.forEach(e=>{l.push((0,s.A)({id:e.id},e.data()))}),l}catch(i){throw i}},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=(0,r.rJ)(a.db,e);if(n.length>0){const e=n.map(e=>(0,r._M)(e.field,e.operator,e.value));i=(0,r.P)(i,...e)}return(0,r.aQ)(i,e=>{const n=[];e.forEach(e=>{n.push((0,s.A)({id:e.id},e.data()))}),t(n)})},p=async e=>{try{const t=await f("users",[{field:"email",operator:"==",value:e}]);return t.length>0?t[0]:null}catch(t){return console.error("Erreur lors de la recherche utilisateur:",t),null}}},43:(e,t,n)=>{e.exports=n(288)},227:(e,t,n)=>{n.d(t,{j2:()=>O,db:()=>M});var s=n(232);(0,s.KO)("firebase","12.2.1","app");var r=n(667),i=n(823),a=n(776),o=n(606);const l="firebasestorage.googleapis.com",c="storageBucket";class u extends a.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(f(e),"Firebase Storage: ".concat(t," (").concat(f(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var d,h;function f(e){return"storage/"+e}function m(){return new u(d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function p(){return new u(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g(){return new u(d.CANCELED,"User canceled the upload/download.")}function v(e){return new u(d.INVALID_ARGUMENT,e)}function y(){return new u(d.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(d||(d={}));class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=b.makeFromUrl(e,t)}catch(r){return new b(e,"")}if(""===n.path)return n;throw s=e,new u(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.");var s}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+s+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(s,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===l?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(s,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],s=t.regex.exec(e);if(s){const e=s[t.indices.bucket];let r=s[t.indices.path];r||(r=""),n=new b(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new u(d.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class x{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function w(e,t,n,s){if(s<t)throw v("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(s>n)throw v("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){n=n+(t(s)+"="+t(e[s]))+"&"}return n=n.slice(0,-1),n}function S(e,t){const n=e>=500&&e<600,s=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||s||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(h||(h={}));class k{constructor(e,t,n,s,r,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new N(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const s=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(s),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(s),this.pendingConnection_=null;const t=n.getErrorCode()===h.NO_ERROR,r=n.getStatus();if(!t||S(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===h.ABORT;return void e(!1,new N(!1,null,t))}const i=-1!==this.successCodes_.indexOf(r);e(!0,new N(i,n))})},t=(e,t)=>{const n=this.resolve_,s=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?n(e):n()}catch(i){s(i)}else if(null!==r){const e=m();e.serverResponse=r.getErrorText(),this.errorCallback_?s(this.errorCallback_(r,e)):s(e)}else if(t.canceled){s(this.appDelete_?y():g())}else{s(p())}};this.canceled_?t(0,new N(!1,null,!0)):this.backoffId_=function(e,t,n){let s=1,r=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.apply(null,n)}}function d(t){r=setTimeout(()=>{r=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;s<64&&(s*=2),1===o?(o=2,i=0):i=1e3*(s+Math.random()),d(i)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==r?(e||(o=2),clearTimeout(r),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class N{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function j(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class E{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new E(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new E(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new u(d.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function C(e,t){const n=null===t||void 0===t?void 0:t[c];return null==n?null:b.makeFromBucketSpec(n,e)}class A{constructor(e,t,n,s,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=i,this._bucket=null,this._host=l,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?b.makeFromBucketSpec(s,this._host):C(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=C(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,s.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new E(this,e)}_makeRequest(e,t,n,s){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new x(y());{const i=function(e,t,n,s,r,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=_(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,s),new k(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a,o)}(e,this._appId,n,s,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const T="@firebase/storage",I="0.14.0",D="storage";function P(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new A(r,i,a,n,s.MF)}(0,s.om)(new o.uA(D,P,"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(T,I,""),(0,s.KO)(T,I,"esm2020");const R=(0,s.Wp)({apiKey:"AIzaSyCXy9AGCm80EAb3zYOctB2MMuR6xoMM-d4",authDomain:"scandale.firebaseapp.com",projectId:"scandale",storageBucket:"scandale.firebasestorage.app",messagingSenderId:"413940361704",appId:"1:413940361704:web:472249dfa3a74ca9179c5d",measurementId:"G-NTZ1JD24XH"}),M=(0,r.aU)(R),O=(0,i.xI)(R);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,a.Ku)(e);const n=(0,s.j6)(e,D).getImmediate({identifier:t}),r=(0,a.yU)("storage");r&&function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const r=(0,a.zJ)(t);r&&((0,a.gE)("https://".concat(e.host,"/b")),(0,a.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(e._overrideAuthToken="string"===typeof i?i:(0,a.Fy)(i,e.app.options.projectId))}(e,t,n,s)}(n,...r)}(R)},232:(e,t,n)=>{n.d(t,{MF:()=>de,j6:()=>ae,xZ:()=>oe,om:()=>ie,Sx:()=>fe,Wp:()=>he,KO:()=>me});var s=n(379),r=n(606),i=n(965),a=n(776);let o,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let m={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];const i=e.call(y(this),t,...s);return d.set(i,t.sort?t.sort():[t]),v(i)}}function g(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,m):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(v(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const b=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],w=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=x.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return s&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),r&&t.done]))[0]};return w.set(t,i),i}!function(e){m=e(m)}(e=>(0,s.A)((0,s.A)({},e),{},{get:(t,n,s)=>_(t,n)||e.get(t,n,s),has:(t,n)=>!!_(t,n)||e.has(t,n)}));class S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const k="@firebase/app",N="0.14.2",j=new i.Vy("@firebase/app"),E="@firebase/app-compat",C="@firebase/analytics-compat",A="@firebase/analytics",T="@firebase/app-check-compat",I="@firebase/app-check",D="@firebase/auth",P="@firebase/auth-compat",R="@firebase/database",M="@firebase/data-connect",O="@firebase/database-compat",L="@firebase/functions",F="@firebase/functions-compat",V="@firebase/installations",z="@firebase/installations-compat",U="@firebase/messaging",B="@firebase/messaging-compat",q="@firebase/performance",H="@firebase/performance-compat",W="@firebase/remote-config",K="@firebase/remote-config-compat",G="@firebase/storage",Q="@firebase/storage-compat",Y="@firebase/firestore",X="@firebase/ai",$="@firebase/firestore-compat",J="firebase",Z="[DEFAULT]",ee={[k]:"fire-core",[E]:"fire-core-compat",[A]:"fire-analytics",[C]:"fire-analytics-compat",[I]:"fire-app-check",[T]:"fire-app-check-compat",[D]:"fire-auth",[P]:"fire-auth-compat",[R]:"fire-rtdb",[M]:"fire-data-connect",[O]:"fire-rtdb-compat",[L]:"fire-fn",[F]:"fire-fn-compat",[V]:"fire-iid",[z]:"fire-iid-compat",[U]:"fire-fcm",[B]:"fire-fcm-compat",[q]:"fire-perf",[H]:"fire-perf-compat",[W]:"fire-rc",[K]:"fire-rc-compat",[G]:"fire-gcs",[Q]:"fire-gcs-compat",[Y]:"fire-fst",[$]:"fire-fst-compat",[X]:"fire-vertex","fire-js":"fire-js",[J]:"fire-js-all"},te=new Map,ne=new Map,se=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){j.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(se.has(t))return j.debug("There were multiple attempts to register component ".concat(t,".")),!1;se.set(t,e);for(const n of te.values())re(n,e);for(const n of ne.values())re(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new a.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=(0,s.A)({},e),this._config=(0,s.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const de="12.2.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=(0,s.A)({name:Z,automaticDataCollectionEnabled:!0},t),o=i.name;if("string"!==typeof o||!o)throw ce.create("bad-app-name",{appName:String(o)});if(n||(n=(0,a.T9)()),!n)throw ce.create("no-options");const l=te.get(o);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(i,l.config))return l;throw ce.create("duplicate-app",{appName:o})}const c=new r.h1(o);for(const s of se.values())c.addComponent(s);const u=new ue(n,i,c);return te.set(o,u),u}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,a.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function me(e,t,n){var s;let i=null!==(s=ee[e])&&void 0!==s?s:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void j.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:s,blocking:r,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=v(a);return s&&a.addEventListener("upgradeneeded",e=>{s(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ye(e,t){try{const n=(await ve()).transaction(pe,"readwrite"),s=n.objectStore(pe);await s.put(t,be(e)),await n.done}catch(n){if(n instanceof a.g)j.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});j.warn(e.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class xe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _e(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=we();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(e=>e.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){j.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:s}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let s=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Se(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Se(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return j.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class _e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(pe),n=await t.objectStore(pe).get(be(e));return await t.done,n}catch(t){if(t instanceof a.g)j.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});j.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Se(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ke;ke="",ie(new r.uA("platform-logger",e=>new S(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new xe(e),"PRIVATE")),me(k,N,ke),me(k,N,"esm2020"),me("fire-js","")},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function k(e,t,s,r,i,a){return s=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:a}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(){}function A(e,t,r,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case s:u=!0;break;case h:return A((u=e._init)(e._payload),t,r,i,a)}}if(u)return a=a(e),u=""===i?"."+E(e,0):i,w(a)?(r="",null!=u&&(r=u.replace(j,"$&/")+"/"),A(a,t,r,"",function(e){return e})):null!=a&&(N(a)&&(l=a,c=r+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+u,a=k(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,m=""===i?".":i+":";if(w(e))for(var p=0;p<e.length;p++)u+=A(i=e[p],t,r,o=m+E(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=A(i=i.value,t,r,o=m+E(i,p++),a);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function T(e,t,n){if(null==e)return e;var s=[],r=0;return A(e,s,"","",function(e){return t.call(n,e,r++)}),s}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var s=p({},e.props),r=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(s[i]=t[i]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];s.children=a}return k(e.type,r,void 0,0,0,s)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var s,r={},i=null;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)S.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(r[s]=t[s]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(s in a=e.defaultProps)void 0===r[s]&&(r[s]=a[s]);return k(e,i,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var s=e(),r=_.S;null!==r&&r(n,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(P,D)}catch(i){D(i)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var s=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.1"},379:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(705);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},606:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>r});var s=n(776);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new s.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),s=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&i.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(s){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===i?void 0:r),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch(a){}var r;return s||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{gS:()=>oc,rJ:()=>Zo,kd:()=>ac,H9:()=>el,GG:()=>rc,aU:()=>al,aQ:()=>lc,My:()=>Kl,P:()=>Ul,mZ:()=>ic,_M:()=>ql});var s,r,i=n(379),a=n(232),o=n(606),l=n(965),c=n(776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var s=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)s[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var i=e.g[3],a=t+(i^n&(r^i))+s[0]+3614090360&4294967295;a=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=(n=(r=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(r^i))+s[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(n^r))+s[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^i&(t^n))+s[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(i^t))+s[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^i&(n^r))+s[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(n^r))+s[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^r&(t^n))+s[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(i^t))+s[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(r^i))+s[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^i)+s[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^i)+s[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^r)+s[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^n)+s[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^i^t)+s[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~i))+s[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~i))+s[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~i))+s[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~n))+s[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(r|~t))+s[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(r^(n|~i))+s[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~r))+s[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=i+((a=r+(t^(i|~n))+s[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],s=!0,r=e.length-1;0<=r;r--){var i=0|e[r];s&&i==t||(n[r]=i,s=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var s=t-this.blockSize,r=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=s;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){n(this,r),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return p(l(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new i(t,0)}var c=o(0),u=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function p(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new i(n,~e.h).add(u)}function g(e,t){return e.add(p(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(m(e))return t=b(p(e),t),new y(p(t.g),p(t.h));if(m(t))return t=b(e,p(t)),new y(p(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,s=t;0>=s.l(e);)n=x(n),s=x(s);var r=w(n,1),i=w(s,1);for(s=w(s,2),n=w(n,2);!f(s);){var a=i.add(s);0>=a.l(e)&&(r=r.add(n),i=a),s=w(s,1),n=w(n,1)}return t=g(e,r.j(t)),new y(r,t)}for(r=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),a=(i=l(n)).j(t);m(a)||0<a.l(e);)a=(i=l(n-=s)).j(t);f(i)&&(i=u),r=r.add(i),e=g(e,a)}return new y(r,e)}function x(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new i(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,r=[],a=0;a<s;a++)r[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(r,e.h)}(e=i.prototype).m=function(){if(m(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.i(n);e+=(0<=s?s:4294967296+s)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(m(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,s="";;){var r=b(n,t).g,i=((0<(n=g(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=r))return i+s;for(;6>i.length;)i="0"+i;s=i+s}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return m(this)?p(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,r=0;r<=t;r++){var a=s+(65535&this.i(r))+(65535&e.i(r)),o=(a>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);s=o>>>16,a&=65535,o&=65535,n[r]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(m(this))return m(e)?p(this).j(p(e)):p(p(this).j(e));if(m(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<e.g.length;r++){var a=this.i(s)>>>16,o=65535&this.i(s),u=e.i(r)>>>16,d=65535&e.i(r);n[2*s+2*r]+=o*d,v(n,2*s+2*r),n[2*s+2*r+1]+=a*d,v(n,2*s+2*r+1),n[2*s+2*r+1]+=o*u,v(n,2*s+2*r+1),n[2*s+2*r+2]+=a*u,v(n,2*s+2*r+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,r=d.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=l(Math.pow(n,8)),r=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),r=r.j(a).add(l(o))):r=(r=r.j(s)).add(l(o))}return r},s=d.Integer=i}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,f,m,p,g,v,y,b,x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof x&&x];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,s){if(s)e:{var r=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in r))break e;r=r[a]}(s=s(i=r[e=e[e.length-1]]))!=i&&null!=s&&t(r,e,{configurable:!0,writable:!0,value:s})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,s=!1,r={next:function(){if(!s&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return s=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});var s=s||{},r=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}function _(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,s=t.length||0;e.length=n+s;for(let r=0;r<s;r++)e[n+r]=t[r]}else e.push(t)}}function k(e){return/^[\s\xa0]*$/.test(e)}function N(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function j(e){return j[" "](e),e}j[" "]=function(){};var E=-1!=N().indexOf("Gecko")&&!(-1!=N().toLowerCase().indexOf("webkit")&&-1==N().indexOf("Edge"))&&!(-1!=N().indexOf("Trident")||-1!=N().indexOf("MSIE"))&&-1==N().indexOf("Edge");function C(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(e,t){let n,s;for(let r=1;r<arguments.length;r++){for(n in s=arguments[r],s)e[n]=s[n];for(let t=0;t<T.length;t++)n=T[t],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function D(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function P(e){r.setTimeout(()=>{throw e},0)}function R(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var M=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=M.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},z=()=>{const e=r.Promise.resolve(void 0);L=()=>{e.then(U)}};var U=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(n){P(n)}var t=M;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function B(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function W(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(E){e:{try{j(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:K[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.aa.h.call(this)}}d(W,q);var K={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),Q=0;function Y(e,t,n,s,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ha=r,this.key=++Q,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var s,r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,s){for(var r=0;r<e.length;++r){var i=e[r];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==s)return r}return-1}$.prototype.add=function(e,t,n,s,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=Z(e,t,s,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Y(t,this.src,i,!!s,r)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,s,r){if(s&&s.once)return re(e,t,n,s,r);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,s,r);return null}return n=de(n),e&&e[G]?e.K(t,n,a(s)?!!s.capture:!!s,r):se(e,t,n,!1,s,r)}function se(e,t,n,s,r,i){if(!t)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=ce(e);if(l||(e[ee]=l=new $(e)),(n=l.add(t,n,s,o,i)).proxy)return n;if(s=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)H||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),s,r);else if(e.attachEvent)e.attachEvent(oe(t.toString()),s);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(s)}return n}function re(e,t,n,s,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)re(e,t[i],n,s,r);return null}return n=de(n),e&&e[G]?e.L(t,n,a(s)?!!s.capture:!!s,r):se(e,t,n,!0,s,r)}function ie(e,t,n,s,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,s,r);else s=a(s)?!!s.capture:!!s,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,s,r))&&(X(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,s,r)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])J(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(oe(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):X(e)}}}function oe(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new W(t,this);var n=e.listener,s=e.ha||e.src;e.fa&&ae(e),e=n.call(s,t)}return e}function ce(e){return(e=e[ee])instanceof $?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){B.call(this),this.i=new $(this),this.M=this,this.F=null}function fe(e,t){var n,s=e.F;if(s)for(n=[];s;s=s.F)n.push(s);if(e=e.M,s=t.type||t,"string"===typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var r=t;I(t=new q(s,e),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];r=me(a,s,!0,t)&&r}if(r=me(a=t.g=e,s,!0,t)&&r,r=me(a,s,!1,t)&&r,n)for(i=0;i<n.length;i++)r=me(a=t.g=n[i],s,!1,t)&&r}function me(e,t,n,s){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&J(e.i,a),r=!1!==o.call(l,s)&&r}}return r&&!s.defaultPrevented}function pe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function ge(e){e.g=pe(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(he,B),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,s){ie(this,e,t,n,s)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)X(n[s]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)},he.prototype.L=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};class ve extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(e){B.call(this),this.h=e,this.g={}}d(ye,B);var be=[];function xe(e){C(e.g,function(e,t){this.g.hasOwnProperty(t)&&ae(e)},e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),xe(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=r.JSON.stringify,_e=r.JSON.parse,Se=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function ke(){}function Ne(e){return e.h||(e.h=e.i())}function je(){}ke.prototype.h=null;var Ee={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ce(){q.call(this,"d")}function Ae(){q.call(this,"c")}d(Ce,q),d(Ae,q);var Te={},Ie=null;function De(){return Ie=Ie||new he}function Pe(e){q.call(this,Te.La,e)}function Re(e){const t=De();fe(t,new Pe(t))}function Me(e,t){q.call(this,Te.STAT_EVENT,e),this.stat=t}function Oe(e){const t=De();fe(t,new Me(t,e))}function Le(e,t){q.call(this,Te.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function Ve(){this.g=!0}function ze(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<r.length;a++)r[a]=""}}}return we(n)}catch(o){return t}}(e,n)+(s?" "+s:"")})}Te.La="serverreachability",d(Pe,q),Te.STAT_EVENT="statevent",d(Me,q),Te.Ma="timingevent",d(Le,q),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var Ue,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function We(e,t,n,s){this.j=e,this.i=t,this.l=n,this.R=s||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}d(He,ke),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Ue=new He;var Ge={},Qe={};function Ye(e,t,n){e.L=1,e.v=wt(gt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,s=e.R;Array.isArray(s)||(s=[String(s)]),Mt(n.i,"t",s),e.C=0,n=e.j.J,e.h=new Ke,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ve(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,s=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(be[0]=r.toString()),r=be);for(var i=0;i<r.length;i++){var a=ne(n,r[i],s||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,s,r,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,s=t.indexOf("\n",n);return-1==s?Qe:(n=Number(t.substring(n,s)),isNaN(n)?Ge:(s+=1)+n>t.length?Qe:(t=t.slice(s,s+n),e.C=s+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||yn(e.j,e)}function st(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,xe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function rt(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var s=n.Da.g.parse(t)}catch(u){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),on(n)}mn(n),Oe(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&vn(n),!k(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(s=1.5*u,n.L=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=s.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ut(i,i.h),i.h=null))}if(s.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(s.ya=e,xt(s.I,s.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((s=n).qa=_n(s,s.J?s.ia:null,s.W),a.K){dt(s.h,a);var o=a,l=s.L;l&&(o.I=l),o.B&&(tt(o),Ze(o)),s.g=a}else fn(s);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):an(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(u){}}We.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},We.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Re(),tt(this);var n=this.g.Z();this.X=n;t:if($e(this)){var s=nn(this.g);e="";var i=s.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){st(this),nt(this);var o="";break t}this.h.i=new r.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:!(a&&t==i-1)});s.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,s,r,i,a){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Oe(12),st(this),nt(this);break e}ze(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rt(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Je(this,o),e==Qe){4==h&&(this.s=4,Oe(14),n=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Oe(15),ze(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}ze(this.i,this.l,e,null),rt(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),pn(d),d.M=!0,Oe(11))}}else ze(this.i,this.l,o,"[Invalid Chunked Response]"),st(this),nt(this)}else ze(this.i,this.l,o,null),rt(this,o);4==h&&st(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<e.length;s++){if(k(e[s]))continue;var n=D(e[s]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[r]||[];t[r]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),st(this),nt(this)}}}catch(h){}},We.prototype.cancel=function(){this.J=!0,st(this)},We.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Re(),Oe(17)),st(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function at(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return _(e.i)}function ft(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}(e),s=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}for(s in t=[],n=0,e)t[n++]=e[s];return t}(e),r=s.length,a=0;a<r;a++)t.call(void 0,s[a],n&&n[a],e)}at.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof pt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new It;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,vt(this,t[1]||"",!0),this.o=_t(t[2]||""),this.g=_t(t[3]||"",!0),yt(this,t[4]),this.l=_t(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=_t(t[7]||"")):(this.h=!1,this.i=new It(null,this.h))}function gt(e){return new pt(e)}function vt(e,t,n){e.j=n?_t(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof It?(e.i=t,function(e,t){t&&!e.j&&(Dt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Pt(this,t),Mt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,At)),e.i=new It(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function wt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _t(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,jt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,jt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?Ct:Et,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,Tt)),e.join("")};var Nt,jt=/[#\/\?@]/g,Et=/[#\?:]/g,Ct=/[#\?]/g,At=/[#\?@]/g,Tt=/#/g;function It(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),r=null;if(0<=s){var i=e[n].substring(0,s);r=e[n].substring(s+1)}else i=e[n];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Pt(e,t){Dt(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return Dt(e),t=Ot(e,t),e.g.has(t)}function Mt(e,t,n){Pt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),_(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Lt(e,t,n,s,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),s(n)}catch(i){}}function Ft(){this.g=new Se}function Vt(e,t,n){const s=n||"";try{ft(e,function(e,n){let r=e;a(e)&&(r=we(e)),t.push(s+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(s+"type="+encodeURIComponent("_badmap")),r}}function zt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return C(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,t,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=It.prototype).add=function(e,t){Dt(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Dt(this),this.g.forEach(function(n,s){n.forEach(function(n){e.call(t,n,s,this)},this)},this)},e.na=function(){Dt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const r=e[s];for(let e=0;e<r.length;e++)n.push(t[s])}return n},e.V=function(e){Dt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Dt(this),this.i=null,Rt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const i=encodeURIComponent(String(s)),a=this.V(s);for(s=0;s<a.length;s++){var r=i;""!==a[s]&&(r+="="+encodeURIComponent(String(a[s]))),e.push(r)}}return this.i=e.join("&")},d(zt,ke),zt.prototype.g=function(){return new Ut(this.l,this.j)},zt.prototype.i=(Nt={},function(){return Nt}),d(Ut,he),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Gt,he);var Qt=/^https?$/i,Yt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),Zt(e)}function $t(e){e.A||(e.A=!0,fe(e,"complete"),fe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof s&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))pe(e.Ea,0,e);else if(fe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const s=e.Z();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===s){var a=String(e.D).match(mt)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),i=!Qt.test(a?a.toLowerCase():"")}n=i}if(n)fe(e,"complete"),fe(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",$t(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const s=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||fe(e,"ready");try{s.onreadystatechange=r}catch(n){}}}function en(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function sn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function rn(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sn("baseRetryDelayMs",5e3,e),this.cb=sn("retryDelaySeedMs",1e4,e),this.Wa=sn("forwardChannelMaxRetries",2,e),this.wa=sn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),dn(e,n),(t=new We(e,e.j,t)).L=2,t.v=wt(gt(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(s){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}wn(e)}function on(e){e.g&&(pn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(r.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function cn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||z(),F||(L(),F=!0),V.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const s=gt(e.I);xt(s,"SID",e.K),xt(s,"RID",n),xt(s,"AID",e.T),dn(e,s),e.m&&e.o&&Kt(s,e.m,e.o),n=new We(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Ye(n,s,t)}function dn(e,t){e.H&&C(e.H,function(e,n){xt(t,n,e)}),e.l&&ft({},function(e,n){xt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var s=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=r[o].g;const l=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),a=!1;else try{Vt(l,e,"req"+n+"_")}catch(i){s&&s(l)}}if(a){s=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,s}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||z(),F||(L(),F=!0),V.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function pn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new We(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.T),xt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&xt(t,"TO",e.ja),xt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Kt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=wt(gt(t)),n.m=null,n.P=!0,Xe(n,e)}function vn(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),pn(e),e.g=null;var s=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),s=1}if(0!=e.G)if(t.o)if(1==s){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;fe(s=De(),new Le(s,n)),cn(e)}else fn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==s&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==s&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),s=e.Xa;const t=!s;s=new pt(s||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||vt(s,"https"),wt(s),t?function(e,t){const n=new Ve;if(r.Image){const s=new Image;s.onload=u(Lt,n,"TestLoadImage: loaded",!0,t,s),s.onerror=u(Lt,n,"TestLoadImage: error",!1,t,s),s.onabort=u(Lt,n,"TestLoadImage: abort",!1,t,s),s.ontimeout=u(Lt,n,"TestLoadImage: timeout",!1,t,s),r.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}(s.toString(),n):function(e,t){new Ve;const n=new AbortController,s=setTimeout(()=>{n.abort(),Lt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(s),e.ok?Lt(0,0,!0,t):Lt(0,0,!1,t)}).catch(()=>{clearTimeout(s),Lt(0,0,!1,t)})}(s.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),wn(e),ln(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,_(e.i),e.i.length=0),e.l.ra()}}function _n(e,t,n){var s=n instanceof pt?gt(n):new pt(n);if(""!=s.g)t&&(s.g=t+"."+s.g),yt(s,s.s);else{var i=r.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new pt(null);s&&vt(a,s),t&&(a.g=t),i&&yt(a,i),n&&(a.l=n),s=a}return n=e.D,t=e.ya,n&&t&&xt(s,n,t),xt(s,"VER",e.la),dn(e,s),s}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new zt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function kn(){}function Nn(){}function jn(e,t){he.call(this),this.g=new rn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!k(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function En(e){Ce.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ue.g(),this.v=this.o?Ne(this.o):Ne(Ue),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Xt(this,a)}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else{if("function"!==typeof s.keys||"function"!==typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const e of s.keys())n.set(e,s.get(e))}s=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Yt,t,void 0))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Xt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,fe(this,"complete"),fe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Nt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Nt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_e(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=rn.prototype).la=8,e.G=1,e.connect=function(e,t,n,s){Oe(0),this.W=e,this.H=t||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.I=_n(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new We(this,this.j,e);let i=this.o;if(this.S&&(i?(i=A(i),I(i,this.S)):i=this.S),null!==this.m||this.O||(r.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"===typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(t+=s)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,r,t),xt(n=gt(this.I),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Wt(i)))+"&"+t:this.m&&Kt(n,this.m,i)),ut(this.h,r),this.Ua&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),r.T=!0,Ye(r,n,null)):Ye(r,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||ot(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),on(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),mn(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=kn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Nn.prototype.g=function(e,t){return new jn(e,t)},d(jn,he),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){an(this.g)},jn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=we(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},jn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,jn.aa.N.call(this)},d(En,Ce),d(Cn,Ae),d(An,kn),An.prototype.ua=function(){fe(this.g,"a")},An.prototype.ta=function(e){fe(this.g,new En(e))},An.prototype.sa=function(e){fe(this.g,new Cn)},An.prototype.ra=function(){fe(this.g,"b")},Nn.prototype.createWebChannel=Nn.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,b=w.createWebChannelTransport=function(){return new Nn},y=w.getStatEventTarget=function(){return De()},v=w.Event=Te,g=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,p=w.ErrorCode=Be,qe.COMPLETE="complete",m=w.EventType=qe,je.EventType=Ee,Ee.OPEN="a",Ee.CLOSE="b",Ee.ERROR="c",Ee.MESSAGE="d",he.prototype.listen=he.prototype.K,f=w.WebChannel=je,w.FetchXmlHttpFactory=zt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,h=w.XhrIo=Gt}).apply("undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const _="@firebase/firestore",S="4.9.1";class k{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");let N="12.2.0";const j=new l.Vy("@firebase/firestore");function E(){return j.logLevel}function C(e){if(j.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const r=n.map(I);j.debug("Firestore (".concat(N,"): ").concat(e),...r)}}function A(e){if(j.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const r=n.map(I);j.error("Firestore (".concat(N,"): ").concat(e),...r)}}function T(e){if(j.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const r=n.map(I);j.warn("Firestore (".concat(N,"): ").concat(e),...r)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function D(e,t,n){let s="Unexpected state";"string"==typeof t?s=t:n=t,P(e,s,n)}function P(e,t,n){let s="FIRESTORE (".concat(N,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{s+=" CONTEXT: "+JSON.stringify(n)}catch(e){s+=" CONTEXT: "+n}throw A(s),new Error(s)}function R(e,t,n,s){let r="Unexpected state";"string"==typeof n?r=n:s=n,e||P(t,r,s)}function M(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class F{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class V{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class z{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B{constructor(e){this.t=e,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){R(void 0===this.o,42304);let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new F;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new F,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await s(this.currentUser)})},a=e=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new F)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(R("string"==typeof t.accessToken,31837,{l:t}),new V(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return R(null===e||"string"==typeof e,2055,{h:e}),new k(e)}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=k.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){R(void 0===this.o,3512);const n=e=>{null!=e.error&&C("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,C("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const s=e=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>s(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?s(e):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(R("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new W(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}class Q{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=G(40);for(let s=0;s<n.length;++s)t.length<20&&n[s]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return t}}function Y(e,t){return e<t?-1:e>t?1:0}function X(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.charAt(s),r=t.charAt(s);if(n!==r)return Z(n)===Z(r)?Y(n,r):Z(n)?1:-1}return Y(e.length,t.length)}const $=55296,J=57343;function Z(e){const t=e.charCodeAt(0);return t>=$&&t<=J}function ee(e,t,n){return e.length===t.length&&e.every((e,s)=>n(e,t[s]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&D(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&D(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=ne.compareSegments(e.get(s),t.get(s));if(0!==n)return n}return Y(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),s=ne.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?ne.extractNumericId(e).compare(ne.extractNumericId(t)):X(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return s.fromString(e.substring(4,e.length-2))}}class se extends ne{construct(e,t,n){return new se(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];for(const r of n){if(r.indexOf("//")>=0)throw new L(O.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new se(e)}static emptyPath(){return new se([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends ne{construct(e,t,n){return new ie(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new ie([te])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(0===n.length)throw new L(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new L(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(i=!i,s++):"."!==t||i?(n+=t,s++):(r(),s++)}if(r(),i)throw new L(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ie(t)}static emptyPath(){return new ie([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(se.fromString(e))}static fromName(e){return new ae(se.fromString(e).popFirst(5))}static empty(){return new ae(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===se.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new se(e.slice()))}}function oe(e,t,n){if(!n)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){if(ae.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":D(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new L(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function fe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ue(e))throw new L(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n="JSON missing required field: '".concat(s,"'");break}const a=e[s];if(r&&typeof a!==r){n="JSON field '".concat(s,"' must be a ").concat(r,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(s,"' field to equal '").concat(i.value,"'");break}}if(n)throw new L(O.INVALID_ARGUMENT,n);return!0}const pe=-62135596800,ge=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ve(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pe)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:fe("string",ve._jsonSchemaVersion),seconds:fe("number"),nanoseconds:fe("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ve(0,0))}static max(){return new ye(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class xe{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}xe.UNKNOWN_ID=-1;function we(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(1e9===s?new ve(n+1,0):new ve(n,s));return new Se(r,ae.empty(),t)}function _e(e){return new Se(e.readTime,e.key,be)}class Se{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Se(ye.min(),ae.empty(),be)}static max(){return new Se(ye.max(),ae.empty(),be)}}function ke(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:Y(e.largestBatchId,t.largestBatchId))}const Ne="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class je{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ee(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Ne)throw e;C("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&D(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(e){return Ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let s=0,r=0,i=!1;e.forEach(e=>{++s,e.next(()=>{++r,i&&r===s&&t()},e=>n(e))}),i=!0,r===s&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(e=>e?Ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,s)=>{n.push(t.call(this,e,s))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,s)=>{const r=e.length,i=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===r&&n(i)},e=>s(e))}})}static doWhile(e,t){return new Ce((n,s)=>{const r=()=>{!0===e()?t().next(()=>{r()},s):n()};r()})}}function Ae(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Te(e){return"IndexedDbTransactionError"===e.name}class Ie{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ie.ce=-1;const De=-1;function Pe(e){return null==e}function Re(e){return 0===e&&1/e==-1/0}function Me(e){return"number"==typeof e&&Number.isInteger(e)&&!Re(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function Le(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ve(t)),t=Fe(e.get(n),t);return Ve(t)}function Fe(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const t=e.charAt(r);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function Ve(e){return e+Oe+"\x01"}const ze="remoteDocuments",Ue="owner",Be="mutationQueues",qe="mutations";const He="documentMutations",We="remoteDocumentsV14",Ke="remoteDocumentGlobal",Ge="targets",Qe="targetDocuments",Ye="targetGlobal",Xe="collectionParents",$e="clientMetadata",Je="bundles",Ze="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",st="documentOverlays",rt="globals",it=[Be,qe,He,ze,Ge,Ue,Ye,Qe,$e,Ke,Xe,Je,Ze],at=[Be,qe,He,We,Ge,Ue,Ye,Qe,$e,Ke,Xe,Je,Ze,st],ot=at,lt=[...ot,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ft(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ft(this.root,e,this.comparator,!1)}getReverseIterator(){return new ft(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ft(this.root,e,this.comparator,!0)}}class ft{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=null!=n?n:mt.RED,this.left=null!=s?s:mt.EMPTY,this.right=null!=r?r:mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new mt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return mt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw D(43730,{key:this.key,value:this.value});if(this.right.isRed())throw D(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw D(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new class{constructor(){this.size=0}get key(){throw D(57766)}get value(){throw D(16141)}get color(){throw D(16727)}get left(){throw D(29726)}get right(){throw D(36894)}copy(e,t,n,s,r){return this}insert(e,t,n){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof pt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(ie.comparator)}static empty(){return new vt([])}unionWith(e){let t=new pt(ie.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const xt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(e){if(R(!!e,39018),"string"==typeof e){let t=0;const n=xt.exec(e);if(R(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_t(e.seconds),nanos:_t(e.nanos)}}function _t(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function St(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const kt="server_timestamp",Nt="__type__",jt="__previous_value__",Et="__local_write_time__";function Ct(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Nt])||void 0===t?void 0:t.stringValue)===kt}function At(e){const t=e.mapValue.fields[jt];return Ct(t)?At(t):t}function Tt(e){const t=wt(e.mapValue.fields[Et].timestampValue);return new ve(t.seconds,t.nanos)}class It{constructor(e,t,n,s,r,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Dt="(default)";class Pt{constructor(e,t){this.projectId=e,this.database=t||Dt}static empty(){return new Pt("","")}get isDefaultDatabase(){return this.database===Dt}isEqual(e){return e instanceof Pt&&e.projectId===this.projectId&&e.database===this.database}}const Rt="__type__",Mt="__max__",Ot={mapValue:{fields:{__type__:{stringValue:Mt}}}},Lt="__vector__",Ft="value";function Vt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ct(e)?4:nn(e)?9007199254740991:en(e)?10:11:D(28295,{value:e})}function zt(e,t){if(e===t)return!0;const n=Vt(e);if(n!==Vt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tt(e).isEqual(Tt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wt(e.timestampValue),s=wt(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return St(e.bytesValue).isEqual(St(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _t(e.geoPointValue.latitude)===_t(t.geoPointValue.latitude)&&_t(e.geoPointValue.longitude)===_t(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _t(e.integerValue)===_t(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=_t(e.doubleValue),s=_t(t.doubleValue);return n===s?Re(n)===Re(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],zt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(ct(n)!==ct(s))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===s[r]||!zt(n[r],s[r])))return!1;return!0}(e,t);default:return D(52216,{left:e})}}function Ut(e,t){return void 0!==(e.values||[]).find(e=>zt(e,t))}function Bt(e,t){if(e===t)return 0;const n=Vt(e),s=Vt(t);if(n!==s)return Y(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=_t(e.integerValue||e.doubleValue),s=_t(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return qt(e.timestampValue,t.timestampValue);case 4:return qt(Tt(e),Tt(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){const n=St(e),s=St(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let r=0;r<n.length&&r<s.length;r++){const e=Y(n[r],s[r]);if(0!==e)return e}return Y(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Y(_t(e.latitude),_t(t.latitude));return 0!==n?n:Y(_t(e.longitude),_t(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,s,r,i){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ft])||void 0===n?void 0:n.arrayValue,c=null===(s=o[Ft])||void 0===s?void 0:s.arrayValue,u=Y((null===l||void 0===l||null===(r=l.values)||void 0===r?void 0:r.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ht(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ot.mapValue&&t===Ot.mapValue)return 0;if(e===Ot.mapValue)return 1;if(t===Ot.mapValue)return-1;const n=e.fields||{},s=Object.keys(n),r=t.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let a=0;a<s.length&&a<i.length;++a){const e=X(s[a],i[a]);if(0!==e)return e;const t=Bt(n[s[a]],r[i[a]]);if(0!==t)return t}return Y(s.length,i.length)}(e.mapValue,t.mapValue);default:throw D(23264,{he:n})}}function qt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);const n=wt(e),s=wt(t),r=Y(n.seconds,s.seconds);return 0!==r?r:Y(n.nanos,s.nanos)}function Ht(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const e=Bt(n[r],s[r]);if(e)return e}return Y(n.length,s.length)}function Wt(e){return Kt(e)}function Kt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return St(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=Kt(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const r of t)s?s=!1:n+=",",n+="".concat(r,":").concat(Kt(e.fields[r]));return n+"}"}(e.mapValue):D(61005,{value:e})}function Gt(e){switch(Vt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=At(e);return t?16+Gt(t):16;case 5:return 2*e.stringValue.length;case 6:return St(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Gt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Gt(n)}),t}(e.mapValue);default:throw D(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yt(e){return!!e&&"integerValue"in e}function Xt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function Jt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zt(e){return!!e&&"mapValue"in e}function en(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Rt])||void 0===t?void 0:t.stringValue)===Lt}function tn(e){if(e.geoPointValue)return{geoPointValue:(0,i.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,i.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tn(e.arrayValue.values[n]);return t}return(0,i.A)({},e)}function nn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Mt}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tn(t)}setAll(e){let t=ie.emptyPath(),n={},s=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=r.popLast()}e?n[r.lastSegment()]=tn(e):s.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());Zt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Zt(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const s of n)delete e[s]}clone(){return new sn(tn(this.value))}}function rn(e){const t=[];return ut(e.fields,(e,n)=>{const s=new ie([e]);if(Zt(n)){const e=rn(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)}),new vt(t)}class an{constructor(e,t,n,s,r,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new an(e,0,ye.min(),ye.min(),ye.min(),sn.empty(),0)}static newFoundDocument(e,t,n,s){return new an(e,1,t,ye.min(),n,s,0)}static newNoDocument(e,t){return new an(e,2,t,ye.min(),ye.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,ye.min(),ye.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function ln(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],a=e.position[r];if(s=i.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):Bt(a,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zt(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hn{}class fn extends hn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wn(e,t,n):"array-contains"===t?new Nn(e,n):"in"===t?new jn(e,n):"not-in"===t?new En(e,n):"array-contains-any"===t?new Cn(e,n):new fn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _n(e,n):new Sn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Bt(t,this.value)):null!==t&&Vt(this.value)===Vt(t)&&this.matchesComparison(Bt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return D(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends hn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mn(e,t)}matches(e){return pn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pn(e){return"and"===e.op}function gn(e){return vn(e)&&pn(e)}function vn(e){for(const t of e.filters)if(t instanceof mn)return!1;return!0}function yn(e){if(e instanceof fn)return e.field.canonicalString()+e.op.toString()+Wt(e.value);if(gn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.field.isEqual(t.field)&&zt(e.value,t.value)}(e,t):e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,s)=>e&&bn(n,t.filters[s]),!0)}(e,t):void D(19439)}function xn(e){return e instanceof fn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Wt(e.value))}(e):e instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(xn).join(" ,")+"}"}(e):"Filter"}class wn extends fn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class _n extends fn{constructor(e,t){super(e,"in",t),this.keys=kn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sn extends fn{constructor(e,t){super(e,"not-in",t),this.keys=kn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class Nn extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xt(t)&&Ut(t.arrayValue,this.value)}}class jn extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ut(this.value.arrayValue,t)}}class En extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ut(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ut(this.value.arrayValue,t)}}class Cn extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ut(this.value.arrayValue,e))}}class An{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=a,this.Te=null}}function Tn(e){return new An(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function In(e){const t=M(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Pe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wt(e)).join(",")),t.Te=e}return t.Te}function Dn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cn(e.startAt,t.startAt)&&cn(e.endAt,t.endAt)}function Pn(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Rn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Mn(e,t,n,s,r,i,a,o){return new Rn(e,t,n,s,r,i,a,o)}function On(e){return new Rn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Vn(e){const t=M(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",s=function(e){let t=new pt(ie.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);s.forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new un(s,n))}),e.has(ie.keyField().canonicalString())||t.Ie.push(new un(ie.keyField(),n))}return t.Ie}function zn(e){const t=M(e);return t.Ee||(t.Ee=Un(t,Vn(e))),t.Ee}function Un(e,t){if("F"===e.limitType)return Tn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return Tn(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Bn(e,t){const n=e.filters.concat([t]);return new Rn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qn(e,t,n){return new Rn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hn(e,t){return Dn(zn(e),zn(t))&&e.limitType===t.limitType}function Wn(e){return"".concat(In(zn(e)),"|lt:").concat(e.limitType)}function Kn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>xn(e)).join(", "),"]")),Pe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wt(e)).join(",")),"Target(".concat(t,")")}(zn(e)),"; limitType=").concat(e.limitType,")")}function Gn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const s=ln(e,t,n);return e.inclusive?s<=0:s<0}(e.startAt,Vn(e),t))&&!(e.endAt&&!function(e,t,n){const s=ln(e,t,n);return e.inclusive?s>=0:s>0}(e.endAt,Vn(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yn(e){return(t,n)=>{let s=!1;for(const r of Vn(e)){const e=Xn(r,t,n);if(0!==e)return e;s=s||r.field.isKeyField()}return 0}}function Xn(e,t,n){const s=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),r=n.data.field(e);return null!==s&&null!==r?Bt(s,r):D(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return D(19790,{direction:e.dir})}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,r]of n)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[s,r]of n)e(s,r)})}isEmpty(){return dt(this.inner)}size(){return this.innerSize}}const Jn=new ht(ae.comparator);function Zn(){return Jn}const es=new ht(ae.comparator);function ts(){let e=es;for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];for(const r of n)e=e.insert(r.key,r);return e}function ns(e){let t=es;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ss(){return is()}function rs(){return is()}function is(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const as=new ht(ae.comparator),os=new pt(ae.comparator);function ls(){let e=os;for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];for(const r of n)e=e.add(r);return e}const cs=new pt(Y);function us(){return cs}function ds(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Re(t)?"-0":t}}function hs(e){return{integerValue:""+e}}function fs(e,t){return Me(t)?hs(t):ds(e,t)}class ms{constructor(){this._=void 0}}function ps(e,t,n){return e instanceof ys?function(e,t){const n={fields:{[Nt]:{stringValue:kt},[Et]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ct(t)&&(t=At(t)),t&&(n.fields[jt]=t),{mapValue:n}}(n,t):e instanceof bs?xs(e,t):e instanceof ws?_s(e,t):function(e,t){const n=vs(e,t),s=ks(n)+ks(e.Ae);return Yt(n)&&Yt(e.Ae)?hs(s):ds(e.serializer,s)}(e,t)}function gs(e,t,n){return e instanceof bs?xs(e,t):e instanceof ws?_s(e,t):n}function vs(e,t){return e instanceof Ss?function(e){return Yt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ys extends ms{}class bs extends ms{constructor(e){super(),this.elements=e}}function xs(e,t){const n=Ns(t);for(const s of e.elements)n.some(e=>zt(e,s))||n.push(s);return{arrayValue:{values:n}}}class ws extends ms{constructor(e){super(),this.elements=e}}function _s(e,t){let n=Ns(t);for(const s of e.elements)n=n.filter(e=>!zt(e,s));return{arrayValue:{values:n}}}class Ss extends ms{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ks(e){return _t(e.integerValue||e.doubleValue)}function Ns(e){return Xt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class js{constructor(e,t){this.version=e,this.transformResults=t}}class Es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Es}static exists(e){return new Es(void 0,e)}static updateTime(e){return new Es(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class As{}function Ts(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zs(e.key,Es.none()):new Ms(e.key,e.data,Es.none());{const n=e.data,s=sn.empty();let r=new pt(ie.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),r=r.add(e)}return new Os(e.key,s,new vt(r.toArray()),Es.none())}}function Is(e,t,n){e instanceof Ms?function(e,t,n){const s=e.value.clone(),r=Fs(e.fieldTransforms,t,n.transformResults);s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Os?function(e,t,n){if(!Cs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=Fs(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Ls(e)),r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ds(e,t,n,s){return e instanceof Ms?function(e,t,n,s){if(!Cs(e.precondition,t))return n;const r=e.value.clone(),i=Vs(e.fieldTransforms,s,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,s):e instanceof Os?function(e,t,n,s){if(!Cs(e.precondition,t))return n;const r=Vs(e.fieldTransforms,s,t),i=t.data;return i.setAll(Ls(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,s):function(e,t,n){return Cs(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ps(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),r=vs(s.transform,e||null);null!=r&&(null===n&&(n=sn.empty()),n.set(s.field,r))}return n||null}function Rs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bs&&t instanceof bs||e instanceof ws&&t instanceof ws?ee(e.elements,t.elements,zt):e instanceof Ss&&t instanceof Ss?zt(e.Ae,t.Ae):e instanceof ys&&t instanceof ys}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ms extends As{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Os extends As{constructor(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Ls(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Fs(e,t,n){const s=new Map;R(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],a=i.transform,o=t.data.field(i.field);s.set(i.field,gs(a,o,n[r]))}return s}function Vs(e,t,n){const s=new Map;for(const r of e){const e=r.transform,i=n.data.field(r.field);s.set(r.field,ps(e,i,t))}return s}class zs extends As{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Us extends As{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bs{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&Is(t,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ds(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ds(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rs();return this.mutations.forEach(s=>{const r=e.get(s.key),i=r.overlayedDocument;let a=this.applyToLocalView(i,r.mutatedFields);a=t.has(s.key)?null:a;const o=Ts(i,a);null!==o&&n.set(s.key,o),i.isValidDocument()||i.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ls())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Rs(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Rs(e,t))}}class qs{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){R(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=as;const r=e.mutations;for(let i=0;i<r.length;i++)s=s.insert(r[i].key,n[i].version);return new qs(e,t,n,s)}}class Hs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ws{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ks,Gs;function Qs(e){switch(e){case O.OK:return D(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return D(15467,{code:e})}}function Ys(e){if(void 0===e)return A("GRPC error has no .code"),O.UNKNOWN;switch(e){case Ks.OK:return O.OK;case Ks.CANCELLED:return O.CANCELLED;case Ks.UNKNOWN:return O.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return O.INTERNAL;case Ks.UNAVAILABLE:return O.UNAVAILABLE;case Ks.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ks.NOT_FOUND:return O.NOT_FOUND;case Ks.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ks.ABORTED:return O.ABORTED;case Ks.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ks.DATA_LOSS:return O.DATA_LOSS;default:return D(39323,{code:e})}}(Gs=Ks||(Ks={}))[Gs.OK=0]="OK",Gs[Gs.CANCELLED=1]="CANCELLED",Gs[Gs.UNKNOWN=2]="UNKNOWN",Gs[Gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gs[Gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gs[Gs.NOT_FOUND=5]="NOT_FOUND",Gs[Gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gs[Gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gs[Gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gs[Gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gs[Gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gs[Gs.ABORTED=10]="ABORTED",Gs[Gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gs[Gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gs[Gs.INTERNAL=13]="INTERNAL",Gs[Gs.UNAVAILABLE=14]="UNAVAILABLE",Gs[Gs.DATA_LOSS=15]="DATA_LOSS";let Xs=null;function $s(){return new TextEncoder}const Js=new s([4294967295,4294967295],0);function Zs(e){const t=$s().encode(e),n=new r;return n.update(t),new Uint8Array(n.digest())}function er(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new s([n,r],0),new s([i,a],0)]}class tr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new nr("Invalid padding: ".concat(t));if(n<0)throw new nr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new nr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new nr("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=s.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(s.fromNumber(n)));return 1===r.compare(Js)&&(r=new s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Zs(e),[n,s]=er(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);if(!this.we(e))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new tr(r,s,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Zs(e),[n,s]=er(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,s,r);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class nr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sr{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,rr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sr(ye.min(),s,new ht(Y),Zn(),ls())}}class rr{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rr(n,t,ls(),ls(),ls())}}class ir{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class ar{constructor(e,t){this.targetId=e,this.Ce=t}}class or{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class lr{constructor(){this.ve=0,this.Fe=dr(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ls(),t=ls(),n=ls();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:D(38017,{changeType:r})}}),new rr(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=dr()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,R(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cr{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.Je=ur(),this.He=ur(),this.Ye=new ht(Y)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:D(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(Pn(i))if(0===n){const e=new ae(i.path);this.et(t,e,an.newNoDocument(e,ye.min()))}else R(1===n,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){var r;const n=this.ut(e),i=n?this.ct(n,e,s):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(r=Xs)||void 0===r||r.lt(function(e,t,n,s,r,i,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===r,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===s||void 0===s?void 0:s.mightContain(e))&&void 0!==t&&t}}),u}(s,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=t;let i,a;try{i=St(n).toUint8Array()}catch(e){if(e instanceof yt)return T("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new tr(i,s,r)}catch(e){return T(e instanceof nr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach(n=>{const r=this.Ge.ht(),i="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((n,s)=>{const r=this.ot(s);if(r){if(n.current&&Pn(r.target)){const t=new ae(r.target.path);this.It(t).has(s)||this.Et(s,t)||this.et(s,t,an.newNoDocument(t,e))}n.Be&&(t.set(s,n.ke()),n.qe())}});let n=ls();this.He.forEach((e,t)=>{let s=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(s=!1,!1)}),s&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const s=new sr(e,t,this.Ye,this.je,n);return this.je=Zn(),this.Je=ur(),this.He=ur(),this.Ye=new ht(Y),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lr,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pt(Y),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pt(Y),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||C("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lr),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ur(){return new ht(ae.comparator)}function dr(){return new ht(ae.comparator)}const hr={asc:"ASCENDING",desc:"DESCENDING"},fr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mr={and:"AND",or:"OR"};class pr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gr(e,t){return e.useProto3Json||Pe(t)?t:{value:t}}function vr(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function br(e,t){return vr(e,t.toTimestamp())}function xr(e){return R(!!e,49232),ye.fromTimestamp(function(e){const t=wt(e);return new ve(t.seconds,t.nanos)}(e))}function wr(e,t){return _r(e,t).canonicalString()}function _r(e,t){const n=function(e){return new se(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Sr(e){const t=se.fromString(e);return R(qr(t),10190,{key:t.toString()}),t}function kr(e,t){return wr(e.databaseId,t.path)}function Nr(e,t){const n=Sr(t);if(n.get(1)!==e.databaseId.projectId)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(Ar(n))}function jr(e,t){return wr(e.databaseId,t)}function Er(e){const t=Sr(e);return 4===t.length?se.emptyPath():Ar(t)}function Cr(e){return new se(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ar(e){return R(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Tr(e,t,n){return{name:kr(e,t),fields:n.value.mapValue.fields}}function Ir(e,t){let n;if(t instanceof Ms)n={update:Tr(e,t.key,t.value)};else if(t instanceof zs)n={delete:kr(e,t.key)};else if(t instanceof Os)n={update:Tr(e,t.key,t.data),updateMask:Br(t.fieldMask)};else{if(!(t instanceof Us))return D(16599,{Vt:t.type});n={verify:kr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ys)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ws)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ss)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw D(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:br(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:D(27497)}(e,t.precondition)),n}function Dr(e,t){return{documents:[jr(e,t.path)]}}function Pr(e,t){const n={structuredQuery:{}},s=t.path;let r;null!==t.collectionGroup?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=jr(e,r);const i=function(e){if(0!==e.length)return Ur(mn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Vr(e.field),direction:Or(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=gr(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:r}}function Rr(e){let t=Er(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){R(1===s,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Mr(e);return t instanceof mn&&gn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new un(zr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Pe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),Mn(t,r,a,i,o,"F",l,c)}function Mr(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zr(e.unaryFilter.field);return fn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zr(e.unaryFilter.field);return fn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zr(e.unaryFilter.field);return fn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=zr(e.unaryFilter.field);return fn.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return D(61313);default:return D(60726)}}(e):void 0!==e.fieldFilter?function(e){return fn.create(zr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return D(58110);default:return D(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(e=>Mr(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return D(1026)}}(e.compositeFilter.op))}(e):D(30097,{filter:e})}function Or(e){return hr[e]}function Lr(e){return fr[e]}function Fr(e){return mr[e]}function Vr(e){return{fieldPath:e.canonicalString()}}function zr(e){return ie.fromServerFormat(e.fieldPath)}function Ur(e){return e instanceof fn?function(e){if("=="===e.op){if(Jt(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jt(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(e.field),op:Lr(e.op),value:e.value}}}(e):e instanceof mn?function(e){const t=e.getFilters().map(e=>Ur(e));return 1===t.length?t[0]:{compositeFilter:{op:Fr(e.op),filters:t}}}(e):D(54877,{filter:e})}function Br(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function qr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hr{constructor(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wr{constructor(e){this.yt=e}}function Kr(e){const t=Rr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qn(t,t.limit,"L"):t}class Gr{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(_t(e.integerValue));else if("doubleValue"in e){const n=_t(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Re(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=wt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(St(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?nn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):en(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):D(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){var n;const s=e.fields||{};this.Ft(t,53);const r=Ft,i=(null===(n=s[r].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(_t(i)),this.Ot(r,t),this.Ct(s[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Gr.Kt=new Gr;class Qr{constructor(){this.Cn=new Yr}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(Se.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(Se.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class Yr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new pt(se.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new pt(se.comparator)).toArray()}}new Uint8Array(0);const Xr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$r=41943040;class Jr{static withCacheSize(e){return new Jr(e,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr($r,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);class Zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zr(0)}static cr(){return new Zr(-1)}}const ei="LruGarbageCollector",ti=1048576;function ni(e,t){let[n,s]=e,[r,i]=t;const a=Y(n,r);return 0===a?Y(s,i):a}class si{constructor(e){this.Ir=e,this.buffer=new pt(ni),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ni(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ri{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){C(ei,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Te(e)?C(ei,"Ignoring IndexedDB error during garbage collection: ",e):await Ee(e)}await this.Vr(3e5)})}}class ii{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(Ie.ce);const n=new si(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(Xr)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Xr):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,r,i,a,o,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),s=this.params.maximumSequenceNumbersToCollect):s=t,i=Date.now(),this.nthSequenceNumber(e,s))).next(s=>(n=s,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),E()<=l.$b.DEBUG&&C("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(s," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:e})))}}function ai(e,t){return new ii(e,t)}class oi{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class li{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ci{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ds(n.mutation,e,vt.empty(),ve.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ls()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ls();const s=ss();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(e=>{let t=ts();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ss();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ls()))}populateOverlays(e,t,n){const s=[];return n.forEach(e=>{t.has(e)||s.push(e)}),this.documentOverlayCache.getOverlays(e,s).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,s){let r=Zn();const i=is(),a=is();return t.forEach((e,t)=>{const a=n.get(t.key);s.has(t.key)&&(void 0===a||a.mutation instanceof Os)?r=r.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ds(a.mutation,t,a.mutation.getFieldMask(),ve.now())):i.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new li(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=is();let s=new ht((e,t)=>e-t),r=ls();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||vt.empty();a=r.applyToLocalView(i,a),n.set(e,a);const o=(s.get(r.batchId)||ls()).add(e);s=s.insert(r.batchId,o)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const s=a.getNext(),o=s.key,l=s.value,c=rs();l.forEach(e=>{if(!r.has(e)){const s=Ts(t.get(e),n.get(e));null!==s&&c.set(e,s),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ce.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,s){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-r.size):Ce.resolve(ss());let a=be,o=r;return i.next(t=>Ce.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?Ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,ls())).next(e=>({batchId:a,changes:ns(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=ts();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const r=t.collectionGroup;let i=ts();return this.indexManager.getCollectionParents(e,r).next(a=>Ce.forEach(a,a=>{const o=function(e,t){return new Rn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n,s).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,s))).next(e=>{r.forEach((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,an.newInvalidDocument(s)))});let n=ts();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&Ds(i.mutation,s,vt.empty(),ve.now()),Gn(t,s)&&(n=n.insert(e,s))}),n})}}class ui{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xr(e.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Kr(e.bundledQuery),readTime:xr(e.readTime)}}(t)),Ce.resolve()}}class di{constructor(){this.overlays=new ht(ae.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ss();return Ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,s)=>{this.St(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return void 0!==s&&(s.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const s=ss(),r=t.length+1,i=new ae(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>n&&s.set(e.getKey(),e)}return Ce.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new ht((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=ss(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ss(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=s)););return Ce.resolve(a)}St(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hs(t,n));let r=this.qr.get(t);void 0===r&&(r=ls(),this.qr.set(t,r)),this.qr.set(t,r.add(n.key))}}class hi{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}class fi{constructor(){this.Qr=new pt(mi.$r),this.Ur=new pt(mi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new mi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new mi(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new se([])),n=new mi(t,e),s=new mi(t,e+1),r=[];return this.Ur.forEachInRange([n,s],e=>{this.Gr(e),r.push(e.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new se([])),n=new mi(t,e),s=new mi(t,e+1);let r=ls();return this.Ur.forEachInRange([n,s],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new mi(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class mi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Y(e.Yr,t.Yr)}static Kr(e,t){return Y(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class pi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pt(mi.$r)}checkEmpty(e){return Ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Bs(r,t,n,s);this.mutationQueue.push(i);for(const a of s)this.Zr=this.Zr.add(new mi(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(i)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),r=s<0?0:s;return Ce.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.mutationQueue.length?De:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new mi(t,0),s=new mi(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,s],e=>{const t=this.Xr(e.Yr);r.push(t)}),Ce.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pt(Y);return t.forEach(e=>{const t=new mi(e,0),s=new mi(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,s],e=>{n=n.add(e.Yr)})}),Ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;ae.isDocumentKey(r)||(r=r.child(""));const i=new mi(new ae(r),0);let a=new pt(Y);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(a=a.add(e.Yr)),!0)},i),Ce.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){R(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ce.forEach(t.mutations,s=>{const r=new mi(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new mi(t,0),s=this.Zr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gi{constructor(e){this.ri=e,this.docs=new ht(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let n=Zn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():an.newInvalidDocument(e))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let r=Zn();const i=t.path,a=new ae(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ke(_e(a),n)<=0||(s.has(a.key)||Gn(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return Ce.resolve(r)}getAllFromCollectionGroup(e,t,n,s){D(9500)}ii(e,t){return Ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vi(this)}getSize(e){return Ce.resolve(this.size)}}class vi extends oi{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yi{constructor(e){this.persistence=e,this.si=new $n(e=>In(e),Dn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new fi,this.targetCount=0,this.ai=Zr.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Ce.waitFor(r).next(()=>s)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(t=>{r.push(s.markPotentiallyOrphaned(e,t))}),Ce.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}}class bi{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ie(0),this.li=!1,this.li=!0,this.hi=new hi,this.referenceDelegate=e(this),this.Pi=new yi(this),this.indexManager=new Qr,this.remoteDocumentCache=function(e){return new gi(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Wr(t),this.Ii=new ui(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new di,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new pi(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){C("MemoryPersistence","Starting transaction:",e);const s=new xi(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(e=>this.referenceDelegate.di(s).next(()=>e)).toPromise().then(e=>(s.raiseOnCommittedEvent(),e))}Ai(e,t){return Ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class xi extends je{constructor(e){super(),this.currentSequenceNumber=e}}class wi{constructor(e){this.persistence=e,this.Ri=new fi,this.Vi=null}static mi(e){return new wi(e)}get fi(){if(this.Vi)return this.Vi;throw D(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,n=>{const s=ae.fromPath(n);return this.gi(e,s).next(e=>{e||t.removeEntry(s,ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _i{constructor(e,t){this.persistence=e,this.pi=new $n(e=>Le(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ai(this,t)}static mi(e,t){return new _i(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(n,s)=>this.br(e,n,s).next(e=>e?Ce.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,s=>this.br(e,s,t).next(e=>{e||(n++,r.removeEntry(s,ye.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gt(e.data.value)),t}br(e,t,n){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ce.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Si{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=ls(),s=ls();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Si(e,t.fromCache,n,s)}}class ki{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ni{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Ae((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const r={result:null};return this.ys(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ws(e,t,s,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new ki;return this.Ss(e,t,n).next(s=>{if(r.result=s,this.Vs)return this.bs(e,t,n,s.size)})}).next(()=>r.result)}bs(e,t,n,s){return n.documentReadCount<this.fs?(E()<=l.$b.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Kn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(E()<=l.$b.DEBUG&&C("QueryEngine","Query:",Kn(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(E()<=l.$b.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Kn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):Ce.resolve())}ys(e,t){if(Ln(t))return Ce.resolve(null);let n=zn(t);return this.indexManager.getIndexType(e,n).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=qn(t,null,"F"),n=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const r=ls(...s);return this.ps.getDocuments(e,r).next(s=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,s);return this.Cs(t,i,r,n.readTime)?this.ys(e,qn(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,s){return Ln(t)||s.isEqual(ye.min())?Ce.resolve(null):this.ps.getDocuments(e,n).next(r=>{const i=this.Ds(t,r);return this.Cs(t,i,n,s)?Ce.resolve(null):(E()<=l.$b.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kn(t)),this.vs(e,i,t,we(s,be)).next(e=>e))})}Ds(e,t){let n=new pt(Yn(e));return t.forEach((t,s)=>{Gn(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,n){return E()<=l.$b.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Kn(t)),this.ps.getDocumentsMatchingQuery(e,t,Se.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ji="LocalStore",Ei=3e8;class Ci{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new ht(Y),this.xs=new $n(e=>In(e),Dn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ci(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Ai(e,t,n,s){return new Ci(e,t,n,s)}async function Ti(e,t){const n=M(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let a=ls();for(const e of s){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:r,addedBatchIds:i}))})})}function Ii(e){const t=M(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Di(e,t,n){let s=ls(),r=ls();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Zn();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(ye.min())?(t.removeEntry(n,i.readTime),s=s.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),s=s.insert(n,i)):C(ji,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:s,qs:r}})}function Pi(e,t){const n=M(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=De),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ri(e,t){const n=M(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let s;return n.Pi.getTargetData(e,t).next(r=>r?(s=r,Ce.resolve(s)):n.Pi.allocateTargetId(e).next(r=>(s=new Hr(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,s).next(()=>s))))}).then(e=>{const s=n.Ms.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Mi(e,t,n){const s=M(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,e=>s.persistence.referenceDelegate.removeTarget(e,r))}catch(e){if(!Te(e))throw e;C(ji,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function Oi(e,t,n){const s=M(e);let r=ye.min(),i=ls();return s.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const s=M(e),r=s.xs.get(n);return void 0!==r?Ce.resolve(s.Ms.get(r)):s.Pi.getTargetData(t,n)}(s,e,zn(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>s.Fs.getDocumentsMatchingQuery(e,t,n?r:ye.min(),n?i:ls())).next(e=>(Li(s,Qn(t),e),{documents:e,Qs:i})))}function Li(e,t,n){let s=e.Os.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.Os.set(t,s)}class Fi{constructor(){this.activeTargetIds=us()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vi{constructor(){this.Mo=new Fi,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fi,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zi{Oo(e){}shutdown(){}}const Ui="ConnectivityMonitor";class Bi{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){C(Ui,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){C(Ui,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qi=null;function Hi(){return null===qi?qi=268435456+Math.round(2147483648*Math.random()):qi++,"0x"+qi.toString(16)}const Wi="RestConnection",Ki={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gi{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(s),this.Wo=this.databaseId.database===Dt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(s)}Go(e,t,n,s,r){const i=Hi(),a=this.zo(e,t.toUriEncodedString());C(Wi,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,s,r);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,o,n,u).then(t=>(C(Wi,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw T(Wi,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,s,r,i){return this.Go(e,t,n,s,r)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+N,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Ki[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Qi{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Yi="WebChannelConnection";class Xi extends Gi{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,r){const i=Hi();return new Promise((r,a)=>{const o=new h;o.setWithCredentials(!0),o.listenOnce(m.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case p.NO_ERROR:const n=o.getResponseJson();C(Yi,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),r(n);break;case p.TIMEOUT:C(Yi,"RPC '".concat(e,"' ").concat(i," timed out")),a(new L(O.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const s=o.getStatus();if(C(Yi,"RPC '".concat(e,"' ").concat(i," failed with status:"),s,"response text:",o.getResponseText()),s>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(n.status);a(new L(e,n.message))}else a(new L(O.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new L(O.UNAVAILABLE,"Connection failed."));break;default:D(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{C(Yi,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(s);C(Yi,"RPC '".concat(e,"' ").concat(i," sending request:"),s),o.send(t,"POST",l,n,15)})}T_(e,t,n){const s=Hi(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=b(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=r.join("");C(Yi,"Creating RPC '".concat(e,"' stream ").concat(s,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const m=new Qi({Yo:t=>{h?C(Yi,"Not sending because RPC '".concat(e,"' stream ").concat(s," is closed:"),t):(d||(C(Yi,"Opening RPC '".concat(e,"' stream ").concat(s," transport.")),u.open(),d=!0),C(Yi,"RPC '".concat(e,"' stream ").concat(s," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,f.EventType.OPEN,()=>{h||(C(Yi,"RPC '".concat(e,"' stream ").concat(s," transport opened.")),m.o_())}),p(u,f.EventType.CLOSE,()=>{h||(h=!0,C(Yi,"RPC '".concat(e,"' stream ").concat(s," transport closed")),m.a_(),this.E_(u))}),p(u,f.EventType.ERROR,t=>{h||(h=!0,T(Yi,"RPC '".concat(e,"' stream ").concat(s," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new L(O.UNAVAILABLE,"The operation could not be completed")))}),p(u,f.EventType.MESSAGE,t=>{if(!h){var n;const r=t.data[0];R(!!r,16349);const i=r,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){C(Yi,"RPC '".concat(e,"' stream ").concat(s," received error:"),a);const t=a.status;let n=function(e){const t=Ks[e];if(void 0!==t)return Ys(t)}(t),r=a.message;void 0===n&&(n=O.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),h=!0,m.a_(new L(n,r)),u.close()}else C(Yi,"RPC '".concat(e,"' stream ").concat(s," received:"),r),m.u_(r)}}),p(a,v.STAT_EVENT,t=>{t.stat===g.PROXY?C(Yi,"RPC '".concat(e,"' stream ").concat(s," detected buffering proxy")):t.stat===g.NOPROXY&&C(Yi,"RPC '".concat(e,"' stream ").concat(s," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function $i(){return"undefined"!=typeof document?document:null}function Ji(e){return new pr(e,!0)}class Zi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&C("ExponentialBackoff","Backing off for ".concat(s," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ea="PersistentStream";class ta{constructor(e,t,n,s,r,i,a,o){this.Mi=e,this.S_=n,this.b_=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zi(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(A(t.toString()),A("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,s]=e;this.D_===t&&this.G_(n,s)},t=>{e(()=>{const e=new L(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return C(ea,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(C(ea,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class na extends ta{constructor(e,t,n,s,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:D(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(R(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(R(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?O.UNKNOWN:Ys(e.code);return new L(t,e.message||"")}(a);n=new or(s,r,i,o||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Nr(e,s.document.name),i=xr(s.document.updateTime),a=s.document.createTime?xr(s.document.createTime):ye.min(),o=new sn({mapValue:{fields:s.document.fields}}),l=an.newFoundDocument(r,i,a,o),c=s.targetIds||[],u=s.removedTargetIds||[];n=new ir(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Nr(e,s.document),i=s.readTime?xr(s.readTime):ye.min(),a=an.newNoDocument(r,i),o=s.removedTargetIds||[];n=new ir([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Nr(e,s.document),i=s.removedTargetIds||[];n=new ir([],i,r,null)}else{if(!("filter"in t))return D(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:s=0,unchangedNames:r}=e,i=new Ws(s,r),a=e.targetId;n=new ar(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?xr(t.readTime):ye.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Cr(this.serializer),t.addTarget=function(e,t){let n;const s=t.target;if(n=Pn(s)?{documents:Dr(e,s)}:{query:Pr(e,s).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yr(e,t.resumeToken);const s=gr(e,t.expectedCount);null!==s&&(n.expectedCount=s)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=vr(e,t.snapshotVersion.toTimestamp());const s=gr(e,t.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return D(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Cr(this.serializer),t.removeTarget=e,this.q_(t)}}class sa extends ta{constructor(e,t,n,s,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,i),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return R(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,R(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){R(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(R(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?xr(e.updateTime):xr(t);return n.isEqual(ye.min())&&(n=xr(t)),new js(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=xr(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Cr(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ir(this.serializer,e))};this.q_(t)}}class ra{}class ia extends ra{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,a]=r;return this.connection.Go(e,_r(t,n),s,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}Ho(e,t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,_r(t,n),s,a,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(A(t),this.aa=!1):C("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oa="RemoteStore";class la{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{va(this)&&(C(oa,"Restarting streams for network reachability change."),await async function(e){const t=M(e);t.Ea.add(4),await ua(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ca(t)}(this))})}),this.Ra=new aa(n,s)}}async function ca(e){if(va(e))for(const t of e.da)await t(!0)}async function ua(e){for(const t of e.da)await t(!1)}function da(e,t){const n=M(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ga(n)?pa(n):Oa(n).O_()&&fa(n,t))}function ha(e,t){const n=M(e),s=Oa(n);n.Ia.delete(t),s.O_()&&ma(n,t),0===n.Ia.size&&(s.O_()?s.L_():va(n)&&n.Ra.set("Unknown"))}function fa(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oa(e).Y_(t)}function ma(e,t){e.Va.Ue(t),Oa(e).Z_(t)}function pa(e){e.Va=new cr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Oa(e).start(),e.Ra.ua()}function ga(e){return va(e)&&!Oa(e).x_()&&e.Ia.size>0}function va(e){return 0===M(e).Ea.size}function ya(e){e.Va=void 0}async function ba(e){e.Ra.set("Online")}async function xa(e){e.Ia.forEach((t,n)=>{fa(e,t)})}async function wa(e,t){ya(e),ga(e)?(e.Ra.ha(t),pa(e)):e.Ra.set("Unknown")}async function _a(e,t,n){if(e.Ra.set("Online"),t instanceof or&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.Ia.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.Ia.delete(s),e.Va.removeTarget(s))}(e,t)}catch(n){C(oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sa(e,n)}else if(t instanceof ir?e.Va.Ze(t):t instanceof ar?e.Va.st(t):e.Va.tt(t),!n.isEqual(ye.min()))try{const t=await Ii(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Ia.get(s);r&&e.Ia.set(s,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const s=e.Ia.get(t);if(!s)return;e.Ia.set(t,s.withResumeToken(bt.EMPTY_BYTE_STRING,s.snapshotVersion)),ma(e,t);const r=new Hr(s.target,t,n,s.sequenceNumber);fa(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){C(oa,"Failed to raise snapshot:",t),await Sa(e,t)}}async function Sa(e,t,n){if(!Te(t))throw t;e.Ea.add(1),await ua(e),e.Ra.set("Offline"),n||(n=()=>Ii(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{C(oa,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ca(e)})}function ka(e,t){return t().catch(n=>Sa(e,n,t))}async function Na(e){const t=M(e),n=La(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:De;for(;ja(t);)try{const e=await Pi(t.localStore,s);if(null===e){0===t.Ta.length&&n.L_();break}s=e.batchId,Ea(t,e)}catch(e){await Sa(t,e)}Ca(t)&&Aa(t)}function ja(e){return va(e)&&e.Ta.length<10}function Ea(e,t){e.Ta.push(t);const n=La(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ca(e){return va(e)&&!La(e).x_()&&e.Ta.length>0}function Aa(e){La(e).start()}async function Ta(e){La(e).ra()}async function Ia(e){const t=La(e);for(const n of e.Ta)t.ea(n.mutations)}async function Da(e,t,n){const s=e.Ta.shift(),r=qs.from(s,t,n);await ka(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Na(e)}async function Pa(e,t){t&&La(e).X_&&await async function(e,t){if(function(e){return Qs(e)&&e!==O.ABORTED}(t.code)){const n=e.Ta.shift();La(e).B_(),await ka(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Na(e)}}(e,t),Ca(e)&&Aa(e)}async function Ra(e,t){const n=M(e);n.asyncQueue.verifyOperationInProgress(),C(oa,"RemoteStore received new credentials");const s=va(n);n.Ea.add(3),await ua(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ca(n)}async function Ma(e,t){const n=M(e);t?(n.Ea.delete(2),await ca(n)):t||(n.Ea.add(2),await ua(n),n.Ra.set("Unknown"))}function Oa(e){return e.ma||(e.ma=function(e,t,n){const s=M(e);return s.sa(),new na(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ba.bind(null,e),t_:xa.bind(null,e),r_:wa.bind(null,e),H_:_a.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ga(e)?pa(e):e.Ra.set("Unknown")):(await e.ma.stop(),ya(e))})),e.ma}function La(e){return e.fa||(e.fa=function(e,t,n){const s=M(e);return s.sa(),new sa(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ta.bind(null,e),r_:Pa.bind(null,e),ta:Ia.bind(null,e),na:Da.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Na(e)):(await e.fa.stop(),e.Ta.length>0&&(C(oa,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Fa{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,r){const i=Date.now()+n,a=new Fa(e,t,i,s,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Va(e,t){if(A("AsyncQueue","".concat(t,": ").concat(e)),Te(e))return new L(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=ts(),this.sortedSet=new ht(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof za))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new za;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ua{constructor(){this.ga=new ht(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):D(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ba{constructor(e,t,n,s,r,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,s,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ba(e,t,za.emptySet(t),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class qa{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ha{constructor(){this.queries=Wa(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=M(e),s=n.queries;n.queries=Wa(),s.forEach((e,n)=>{for(const s of n.Sa)s.onError(t)})}(this,new L(O.ABORTED,"Firestore shutting down"))}}function Wa(){return new $n(e=>Wn(e),Hn)}async function Ka(e,t){const n=M(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.ba()&&t.Da()&&(s=2):(i=new qa,s=t.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=Va(e,"Initialization of query '".concat(Kn(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Xa(n)}async function Ga(e,t){const n=M(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Qa(e,t){const n=M(e);let s=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(r)&&(s=!0);t.wa=r}}s&&Xa(n)}function Ya(e,t,n){const s=M(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function Xa(e){e.Ca.forEach(e=>{e.next()})}var $a,Ja;(Ja=$a||($a={})).Ma="default",Ja.Cache="cache";class Za{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ba(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$a.Cache}}class eo{constructor(e){this.key=e}}class to{constructor(e){this.key=e}}class no{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ls(),this.mutatedKeys=ls(),this.eu=Yn(e),this.tu=new za(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Ua,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,i=s,a=!1;const o="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((e,t)=>{const c=s.get(e),u=Gn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),r=h?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return D(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),s=null!==s&&void 0!==s&&s;const a=t&&!s?this._u():[],o=0===this.Xa.size&&this.current&&!s?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Ba(this.query,e.tu,r,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ua,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ls(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new to(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new eo(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ls();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ba.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const so="SyncEngine";class ro{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class io{constructor(e){this.key=e,this.hu=!1}}class ao{constructor(e,t,n,s,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new $n(e=>Wn(e),Hn),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ae.comparator),this.Au=new Map,this.Ru=new fi,this.Vu={},this.mu=new Map,this.fu=Zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function oo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=Ao(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await co(s,t,n,!0),r}async function lo(e,t){const n=Ao(e);await co(n,t,!0,!1)}async function co(e,t,n,s){const r=await Ri(e.localStore,zn(t)),i=r.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return s&&(o=await uo(e,t,i,"current"===a,r.resumeToken)),e.isPrimaryClient&&n&&da(e.remoteStore,r),o}async function uo(e,t,n,s,r){e.pu=(t,n,s)=>async function(e,t,n,s){let r=t.view.ru(n);r.Cs&&(r=await Oi(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,r)}));const i=s&&s.targetChanges.get(t.targetId),a=s&&null!=s.targetMismatches.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,i,a);return So(e,t.targetId,o.au),o.snapshot}(e,t,n,s);const i=await Oi(e.localStore,t,!0),a=new no(t,i.Qs),o=a.ru(i.documents),l=rr.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,r),c=a.applyChanges(o,e.isPrimaryClient,l);So(e,n,c.au);const u=new ro(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ho(e,t,n){const s=M(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(e=>!Hn(e,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Mi(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ha(s.remoteStore,r.targetId),wo(s,r.targetId)}).catch(Ee)):(wo(s,r.targetId),await Mi(s.localStore,r.targetId,!0))}async function fo(e,t){const n=M(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ha(n.remoteStore,s.targetId))}async function mo(e,t){const n=M(e);try{const e=await function(e,t){const n=M(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=r.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,s)),r=r.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ei||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=Zn(),l=ls();if(t.documentUpdates.forEach(s=>{t.resolvedLimboDocuments.has(s)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))}),a.push(Di(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!s.isEqual(ye.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,s));a.push(t)}return Ce.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=r,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const s=n.Au.get(t);s&&(R(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?s.hu=!0:e.modifiedDocuments.size>0?R(s.hu,14607):e.removedDocuments.size>0&&(R(s.hu,42227),s.hu=!1))}),await jo(n,e,t)}catch(e){await Ee(e)}}function po(e,t,n){const s=M(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.Tu.forEach((n,s)=>{const r=s.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=M(e);n.onlineState=t;let s=!1;n.queries.forEach((e,n)=>{for(const r of n.Sa)r.va(t)&&(s=!0)}),s&&Xa(n)}(s.eventManager,t),e.length&&s.Pu.H_(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function go(e,t,n){const s=M(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let e=new ht(ae.comparator);e=e.insert(i,an.newNoDocument(i,ye.min()));const n=ls().add(i),r=new sr(ye.min(),new Map,new ht(Y),e,n);await mo(s,r),s.du=s.du.remove(i),s.Au.delete(t),No(s)}else await Mi(s.localStore,t,!1).then(()=>wo(s,t,n)).catch(Ee)}async function vo(e,t){const n=M(e),s=t.batch.batchId;try{const e=await function(e,t){const n=M(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const r=n.batch,i=r.keys();let a=Ce.resolve();return i.forEach(e=>{a=a.next(()=>s.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);R(null!==i,48541),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ls();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,s))})}(n.localStore,t);xo(n,s,null),bo(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await jo(n,e)}catch(e){await Ee(e)}}async function yo(e,t,n){const s=M(e);try{const e=await function(e,t){const n=M(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(R(null!==t,37113),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s)).next(()=>n.localDocuments.getDocuments(e,s))})}(s.localStore,t);xo(s,t,n),bo(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await jo(s,e)}catch(n){await Ee(n)}}function bo(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function xo(e,t,n){const s=M(e);let r=s.Vu[s.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||_o(e,t)})}function _o(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ha(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),No(e))}function So(e,t,n){for(const s of n)s instanceof eo?(e.Ru.addReference(s.key,t),ko(e,s)):s instanceof to?(C(so,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||_o(e,s.key)):D(19791,{wu:s})}function ko(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(C(so,"New document in limbo: "+n),e.Eu.add(s),No(e))}function No(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(se.fromString(t)),s=e.fu.next();e.Au.set(s,new io(n)),e.du=e.du.insert(n,s),da(e.remoteStore,new Hr(zn(On(n.path)),s,"TargetPurposeLimboResolution",Ie.ce))}}async function jo(e,t,n){const s=M(e),r=[],i=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((e,o)=>{a.push(s.pu(o,t,n).then(e=>{if((e||n)&&s.isPrimaryClient){var t;const r=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;s.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Si.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),s.Pu.H_(r),await async function(e,t){const n=M(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ce.forEach(t,t=>Ce.forEach(t.Es,s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s)).next(()=>Ce.forEach(t.ds,s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))}catch(e){if(!Te(e))throw e;C(ji,"Failed to update sequence numbers: "+e)}for(const s of t){const e=s.targetId;if(!s.fromCache){const t=n.Ms.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ms=n.Ms.insert(e,r)}}}(s.localStore,i))}async function Eo(e,t){const n=M(e);if(!n.currentUser.isEqual(t)){C(so,"User change. New user:",t.toKey());const e=await Ti(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new L(O.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jo(n,e.Ls)}}function Co(e,t){const n=M(e),s=n.Au.get(t);if(s&&s.hu)return ls().add(s.key);{let e=ls();const s=n.Iu.get(t);if(!s)return e;for(const t of s){const s=n.Tu.get(t);e=e.unionWith(s.view.nu)}return e}}function Ao(e){const t=M(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Co.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=go.bind(null,t),t.Pu.H_=Qa.bind(null,t.eventManager),t.Pu.yu=Ya.bind(null,t.eventManager),t}function To(e){const t=M(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yo.bind(null,t),t}class Io{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ji(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ai(this.persistence,new Ni,e.initialUser,this.serializer)}Cu(e){return new bi(wi.mi,this.serializer)}Du(e){return new Vi}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Io.provider={build:()=>new Io};class Do extends Io{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){R(this.persistence.referenceDelegate instanceof _i,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ri(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new bi(e=>_i.mi(e,t),this.serializer)}}class Po{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>po(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Eo.bind(null,this.syncEngine),await Ma(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ha}createDatastore(e){const t=Ji(e.databaseInfo.databaseId),n=function(e){return new Xi(e)}(e.databaseInfo);return function(e,t,n,s){return new ia(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,s,r){return new la(e,t,n,s,r)}(this.localStore,this.datastore,e.asyncQueue,e=>po(this.syncEngine,e,0),Bi.v()?new Bi:new zi)}createSyncEngine(e,t){return function(e,t,n,s,r,i,a){const o=new ao(e,t,n,s,r,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=M(e);C(oa,"RemoteStore shutting down."),t.Ea.add(5),await ua(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Po.provider={build:()=>new Po};class Ro{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):A("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Mo="FirestoreClient";class Oo{constructor(e,t,n,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=k.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async e=>{C(Mo,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(C(Mo,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Va(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Lo(e,t){e.asyncQueue.verifyOperationInProgress(),C(Mo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async e=>{s.isEqual(e)||(await Ti(t.localStore,e),s=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Fo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Vo(e);C(Mo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ra(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ra(t.remoteStore,n)),e._onlineComponents=t}async function Vo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){C(Mo,"Using user provided OfflineComponentProvider");try{await Lo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;T("Error using user provided cache. Falling back to memory cache: "+n),await Lo(e,new Io)}}else C(Mo,"Using default OfflineComponentProvider"),await Lo(e,new Do(void 0));return e._offlineComponents}async function zo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(C(Mo,"Using user provided OnlineComponentProvider"),await Fo(e,e._uninitializedComponentsProvider._online)):(C(Mo,"Using default OnlineComponentProvider"),await Fo(e,new Po))),e._onlineComponents}function Uo(e){return zo(e).then(e=>e.syncEngine)}async function Bo(e){const t=await zo(e),n=t.eventManager;return n.onListen=oo.bind(null,t.syncEngine),n.onUnlisten=ho.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=lo.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fo.bind(null,t.syncEngine),n}function qo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,s,r){const i=new Ro({next:n=>{i.Nu(),t.enqueueAndForget(()=>Ga(e,a)),n.fromCache&&"server"===s.source?r.reject(new L(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),a=new Za(n,i,{includeMetadataChanges:!0,qa:!0});return Ka(e,a)}(await Bo(e),e.asyncQueue,t,n,s)),s.promise}function Ho(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wo=new Map,Ko="firestore.googleapis.com",Go=!0;class Qo{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ko,this.ssl=Go}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Go;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$r;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ti)throw new L(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,s){if(!0===t&&!0===s)throw new L(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ho(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yo{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qo(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new z;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wo.get(e);t&&(C("ComponentProvider","Removing Datastore"),Wo.delete(e),t.terminate())}(this),Promise.resolve()}}class Xo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class $o{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $o(this.firestore,e,this._key)}toJSON(){return{type:$o._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,$o._jsonSchema))return new $o(e,n||null,new ae(se.fromString(t.referencePath)))}}$o._jsonSchemaVersion="firestore/documentReference/1.0",$o._jsonSchema={type:fe("string",$o._jsonSchemaVersion),referencePath:fe("string")};class Jo extends Xo{constructor(e,t,n){super(e,t,On(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $o(this.firestore,null,new ae(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function Zo(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];if(e=(0,c.Ku)(e),oe("collection","path",t),e instanceof Yo){const n=se.fromString(t,...s);return ce(n),new Jo(e,null,n)}{if(!(e instanceof $o||e instanceof Jo))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(se.fromString(t,...s));return ce(n),new Jo(e.firestore,null,n)}}function el(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];if(e=(0,c.Ku)(e),1===arguments.length&&(t=Q.newId()),oe("doc","path",t),e instanceof Yo){const n=se.fromString(t,...s);return le(n),new $o(e,null,new ae(n))}{if(!(e instanceof $o||e instanceof Jo))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(se.fromString(t,...s));return le(n),new $o(e.firestore,e instanceof Jo?e.converter:null,new ae(n))}}const tl="AsyncQueue";class nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zi(this,"async_queue_retry"),this._c=()=>{const e=$i();e&&C(tl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=$i();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$i();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new F;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Te(e))throw e;C(tl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,A("INTERNAL UNHANDLED ERROR: ",sl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Fa.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(s),s}uc(){this.nc&&D(47125,{Pc:sl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function rl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const s of t)if(s in n&&"function"==typeof n[s])return!0;return!1}(e,["next","error","complete"])}class il extends Yo{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new nl,this._persistenceKey=(null===s||void 0===s?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nl(e),this._firestoreClient=void 0,await e}}}function al(e,t){const n="object"==typeof e?e:(0,a.Sx)(),s="string"==typeof e?e:t||Dt,r=(0,a.j6)(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,Yo);const r=(0,c.zJ)(t),a=e._getSettings(),o=(0,i.A)((0,i.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);r&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Ko&&a.host!==l&&T("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,i.A)((0,i.A)({},a),{},{host:l,ssl:r,emulatorOptions:s});if(!(0,c.bD)(u,o)&&(e._setSettings(u),s.mockUserToken)){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=k.MOCK_USER;else{var d;t=(0,c.Fy)(s.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new L(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new k(r)}e._authCredentials=new U(new V(t,n))}}(r,...e)}return r}function ol(e){if(e._terminated)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ll(e),e._firestoreClient}function ll(e){var t,n,s;const r=e._freezeSettings(),i=function(e,t,n,s){return new It(e,t,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Ho(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||null!==(n=r.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(s=r.localCache)&&void 0!==s&&s._onlineComponentProvider&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Oo(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cl(bt.fromBase64String(e))}catch(e){throw new L(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new cl(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,cl._jsonSchema))return cl.fromBase64String(e.bytes)}}cl._jsonSchemaVersion="firestore/bytes/1.0",cl._jsonSchema={type:fe("string",cl._jsonSchemaVersion),bytes:fe("string")};class ul{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let s=0;s<t.length;++s)if(0===t[s].length)throw new L(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._methodName=e}}class hl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hl._jsonSchemaVersion}}static fromJSON(e){if(me(e,hl._jsonSchema))return new hl(e.latitude,e.longitude)}}hl._jsonSchemaVersion="firestore/geoPoint/1.0",hl._jsonSchema={type:fe("string",hl._jsonSchemaVersion),latitude:fe("number"),longitude:fe("number")};class fl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,fl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new fl(e.vectorValues);throw new L(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fl._jsonSchemaVersion="firestore/vectorValue/1.0",fl._jsonSchema={type:fe("string",fl._jsonSchemaVersion),vectorValues:fe("object")};const ml=/^__.*__$/;class pl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ms(e,this.data,t,this.fieldTransforms)}}class gl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D(40011,{Ac:e})}}class yl{constructor(e,t,n,s,r,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yl((0,i.A)((0,i.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(vl(this.Ac)&&ml.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ji(e)}Cc(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yl({Ac:e,methodName:t,Dc:n,path:ie.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=Ji(e._databaseId);return new bl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wl(e,t,n,s,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);Al("Data must be an object, but it was:",a,s);const o=El(s,a);let l,c;if(i.merge)l=new vt(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const s of i.mergeFields){const r=Tl(t,s,n);if(!a.contains(r))throw new L(O.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Rl(e,r)||e.push(r)}l=new vt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new pl(new sn(o),l,c)}class _l extends dl{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _l}}function Sl(e,t,n,s){const r=e.Cc(1,t,n);Al("Data must be an object, but it was:",r,s);const i=[],a=sn.empty();ut(s,(e,s)=>{const o=Dl(t,e,n);s=(0,c.Ku)(s);const l=r.yc(o);if(s instanceof _l)i.push(o);else{const e=jl(s,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new vt(i);return new gl(a,o,r.fieldTransforms)}function kl(e,t,n,s,r,i){const a=e.Cc(1,t,n),o=[Tl(t,s,n)],l=[r];if(i.length%2!=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<i.length;c+=2)o.push(Tl(t,i[c])),l.push(i[c+1]);const u=[],d=sn.empty();for(let f=o.length-1;f>=0;--f)if(!Rl(u,o[f])){const e=o[f];let t=l[f];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof _l)u.push(e);else{const s=jl(t,n);null!=s&&(u.push(e),d.set(e,s))}}const h=new vt(u);return new gl(d,h,a.fieldTransforms)}function Nl(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jl(n,e.Cc(s?4:3,t))}function jl(e,t){if(Cl(e=(0,c.Ku)(e)))return Al("Unsupported field value:",t,e),El(e,t);if(e instanceof dl)return function(e,t){if(!vl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const r of e){let e=jl(r,t.wc(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fs(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ve.fromDate(e);return{timestampValue:vr(t.serializer,n)}}if(e instanceof ve){const n=new ve(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vr(t.serializer,n)}}if(e instanceof hl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cl)return{bytesValue:yr(t.serializer,e._byteString)};if(e instanceof $o){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.Sc("Document reference is for database ".concat(s.projectId,"/").concat(s.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:wr(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fl)return function(e,t){return{mapValue:{fields:{[Rt]:{stringValue:Lt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ds(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function El(e,t){const n={};return dt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,s)=>{const r=jl(s,t.mc(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Cl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof hl||e instanceof cl||e instanceof $o||e instanceof dl||e instanceof fl)}function Al(e,t,n){if(!Cl(n)||!ue(n)){const s=de(n);throw"an object"===s?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Tl(e,t,n){if((t=(0,c.Ku)(t))instanceof ul)return t._internalPath;if("string"==typeof t)return Dl(e,t);throw Pl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Il=new RegExp("[~\\*/\\[\\]]");function Dl(e,t,n){if(t.search(Il)>=0)throw Pl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ul(...t.split("."))._internalPath}catch(s){throw Pl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Pl(e,t,n,s,r){const i=s&&!s.isEmpty(),a=void 0!==r;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(s)),a&&(l+=" in document ".concat(r)),l+=")"),new L(O.INVALID_ARGUMENT,o+e+l)}function Rl(e,t){return e.some(e=>e.isEqual(t))}class Ml{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new $o(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ol(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ll("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ol extends Ml{data(){return super.data()}}function Ll(e,t){return"string"==typeof t?Dl(e,t):t instanceof ul?t._internalPath:t._delegate._internalPath}function Fl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class zl extends Vl{}function Ul(e,t){let n=[];for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];t instanceof Vl&&n.push(t),n=n.concat(r),function(e){const t=e.filter(e=>e instanceof Hl).length,n=e.filter(e=>e instanceof Bl).length;if(t>1||t>0&&n>0)throw new L(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Bl extends zl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Bl(e,t,n)}_apply(e){const t=this._parse(e);return Yl(e._query,t),new Xo(e.firestore,e.converter,Bn(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,s,r,i,a){let o;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new L(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ql(a,i);const t=[];for(const n of a)t.push(Gl(s,e,n));o={arrayValue:{values:t}}}else o=Gl(s,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ql(a,i),o=Nl(n,t,a,"in"===i||"not-in"===i);return fn.create(r,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ql(e,t,n){const s=t,r=Ll("where",e);return Bl._create(r,s,n)}class Hl extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const s=t.getFlattenedFilters();for(const r of s)Yl(n,r),n=Bn(n,r)}(e._query,t),new Xo(e.firestore,e.converter,Bn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wl extends zl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new Xo(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Rn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Kl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ll("orderBy",e);return Wl._create(n,t)}function Gl(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const s=t.path.child(se.fromString(n));if(!ae.isDocumentKey(s))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(s,"' is not because it has an odd number of segments (").concat(s.length,")."));return Qt(e,new ae(s))}if(n instanceof $o)return Qt(e,n._key);throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function Ql(e,t){if(!Array.isArray(e)||0===e.length)throw new L(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Yl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Xl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(St(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw D(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,s)=>{n[e]=this.convertValue(s,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ft].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>_t(e.doubleValue));return new fl(n)}convertGeoPoint(e){return new hl(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=At(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tt(e));default:return null}}convertTimestamp(e){const t=wt(e);return new ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=se.fromString(e);R(qr(n),9688,{name:e});const s=new Pt(n.get(1),n.get(3)),r=new ae(n.popFirst(5));return s.isEqual(t)||A("Document ".concat(r," contains a document reference within a different database (").concat(s.projectId,"/").concat(s.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function $l(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zl extends Ml{constructor(e,t,n,s,r,i){super(e,t,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ll("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Zl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zl._jsonSchema={type:fe("string",Zl._jsonSchemaVersion),bundleSource:fe("string","DocumentSnapshot"),bundleName:fe("string"),bundle:fe("string")};class ec extends Zl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class tc{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Jl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ec(this._firestore,this._userDataWriter,n.key,n,new Jl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const s=new ec(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const s=new ec(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:nc(t.type),doc:s,oldIndex:r,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),s.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return D(61501,{type:e})}}tc._jsonSchemaVersion="firestore/querySnapshot/1.0",tc._jsonSchema={type:fe("string",tc._jsonSchemaVersion),bundleSource:fe("string","QuerySnapshot"),bundleName:fe("string"),bundle:fe("string")};class sc extends Xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $o(this.firestore,null,t)}}function rc(e){e=he(e,Xo);const t=he(e.firestore,il),n=ol(t),s=new sc(t);return Fl(e._query),qo(n,e._query).then(n=>new tc(t,s,e,n))}function ic(e,t,n){e=he(e,$o);const s=he(e.firestore,il),r=xl(s);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=(0,c.Ku)(t))||t instanceof ul?kl(r,"updateDoc",e._key,t,n,o):Sl(r,"updateDoc",e._key,t),cc(s,[i.toMutation(e._key,Es.exists(!0))])}function ac(e){return cc(he(e.firestore,il),[new zs(e._key,Es.none())])}function oc(e,t){const n=he(e.firestore,il),s=el(e),r=$l(e.converter,t);return cc(n,[wl(xl(e.firestore),"addDoc",s._key,r,null!==e.converter,{}).toMutation(s._key,Es.exists(!1))]).then(()=>s)}function lc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];e=(0,c.Ku)(e);let r={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||rl(n[i])||(r=n[i++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(rl(n[i])){var o,l,u;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,f;if(e instanceof $o)h=he(e.firestore,il),f=On(e._key.path),d={next:t=>{n[i]&&n[i](uc(h,e,t))},error:n[i+1],complete:n[i+2]};else{const t=he(e,Xo);h=he(t.firestore,il),f=t._query;const s=new sc(h);d={next:e=>{n[i]&&n[i](new tc(h,s,t,e))},error:n[i+1],complete:n[i+2]},Fl(e._query)}return function(e,t,n,s){const r=new Ro(s),i=new Za(t,r,n);return e.asyncQueue.enqueueAndForget(async()=>Ka(await Bo(e),i)),()=>{r.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ga(await Bo(e),i))}}(ol(h),f,a,d)}function cc(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const s=To(e);try{const e=await function(e,t){const n=M(e),s=ve.now(),r=t.reduce((e,t)=>e.add(t.key),ls());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Zn(),l=ls();return n.Ns.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(r=>{i=r;const a=[];for(const e of t){const t=Ps(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Os(e.key,t,rn(t.value.mapValue),Es.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{a=t;const s=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:a.batchId,changes:ns(i)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Vu[e.currentUser.toKey()];s||(s=new ht(Y)),s=s.insert(t,n),e.Vu[e.currentUser.toKey()]=s}(s,e.batchId,n),await jo(s,e.changes),await Na(s.remoteStore)}catch(e){const t=Va(e,"Failed to persist write");n.reject(t)}}(await Uo(e),t,n)),n.promise}(ol(e),t)}function uc(e,t,n){const s=n.docs.get(t._key),r=new sc(e);return new Zl(e,r,t._key,s,new Jl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){N=e}(a.MF),(0,a.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:s,options:r}=n;const a=e.getProvider("app").getImmediate(),o=new il(new B(e.getProvider("auth-internal")),new K(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pt(e.options.projectId,t)}(a,s),a);return r=(0,i.A)({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(_,S,e),(0,a.KO)(_,S,"esm2020")}()},672:(e,t,n)=>{var s=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,s=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},705:(e,t,n)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function r(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function i(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i})},776:(e,t,n)=>{n.d(t,{cY:()=>p,FA:()=>R,g:()=>P,u:()=>l,Uj:()=>o,Fy:()=>y,tD:()=>B,bD:()=>L,hp:()=>U,T9:()=>f,Tj:()=>d,yU:()=>h,XA:()=>m,mS:()=>c,Ku:()=>W,ZQ:()=>_,sr:()=>j,zJ:()=>g,c1:()=>N,Im:()=>O,lT:()=>C,zW:()=>I,jZ:()=>S,lV:()=>E,nr:()=>A,Ov:()=>T,gE:()=>v,Am:()=>V,I9:()=>z,P1:()=>w,eX:()=>D});var s=n(379);const r=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&s+1<e.length&&56320===(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,a=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),s.push(n[c],n[u],n[d],n[h])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const l=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==i||null==o||null==l)throw new a;const c=t<<2|i>>4;if(s.push(c),64!==o){const e=i<<4&240|o>>2;if(s.push(e),64!==l){const e=o<<6&192|l;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/scandale_bouffe_website",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function v(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,s.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}const b={};let x=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||x)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const s="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,function(){const e=document.getElementById(s);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(s),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}r?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function k(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(s){return!1}}function N(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function j(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function E(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function C(){const e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return!k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){return!k()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function D(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),s=this.errors[e],r=s?function(e,t){return e.replace(M,(e,n)=>{const s=t[n];return null!=s?String(s):"<".concat(n,"?>")})}(s,t):"Error",i="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new P(n,i,t)}}const M=/\{\$([^}]+)}/g;function O(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(F(n)&&F(i)){if(!L(n,i))return!1}else if(n!==i)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function F(e){return null!==e&&"object"===typeof e}function V(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,s]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(s)}}),t}function U(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function B(e,t){const n=new q(e,t);return n.subscribe.bind(n)}class q{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");s=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===s.next&&(s.next=H),void 0===s.error&&(s.error=H),void 0===s.complete&&(s.complete=H);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(e){}}),this.observers.push(s),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function W(e){return e&&e._delegate?e._delegate:e}},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(e,t,s){var r=null;if(void 0!==s&&(r=""+s),void 0!==t.key&&(r=""+t.key),"key"in t)for(var i in s={},t)"key"!==i&&(s[i]=t[i]);else s=t;return t=s.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:s}}t.Fragment=s,t.jsx=r,t.jsxs=r},823:(e,t,n)=>{n.d(t,{IX:()=>Ye,eJ:()=>ft,xI:()=>Vn,kZ:()=>dt,x9:()=>mt,f3:()=>pt});var s=n(986),r=n(379),i=n(232),a=n(776),o=n(965),l=n(606);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=h,m=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.Vy("@firebase/auth");function g(e){if(p.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];p.error("Auth (".concat(i.MF,"): ").concat(e),...n)}}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw w(e,...n)}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return w(e,...n)}function b(e,t,n){const s=(0,r.A)((0,r.A)({},f()),{},{[t]:n});return new a.FA("auth","Firebase",s).create(t,{appName:e.name})}function x(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if("string"!==typeof e){const t=n[0],s=[...n.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(t,...s)}return m.create(e,...n)}function _(e,t){if(!e){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];throw w(t,...s)}}function S(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function k(e,t){e||S(t)}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function j(){return"http:"===E()||"https:"===E()}function E(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,k(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(j()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){k(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class T{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void S("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void S("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void S("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},D=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P=new C(3e4,6e4);function R(e,t){return e.tenantId&&!t.tenantId?(0,r.A)((0,r.A)({},t),{},{tenantId:e.tenantId}):t}async function M(e,t,n,s){return O(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};s&&("GET"===t?o=s:i={body:JSON.stringify(s)});const l=(0,a.Am)((0,r.A)({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,r.A)({method:t,headers:c},i);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),T.fetch()(await F(e,e.config.apiHost,n,l),u)})}async function O(e,t,n){e._canInitEmulator=!1;const s=(0,r.A)((0,r.A)({},I),t);try{const t=new z(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw U(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw U(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw U(e,"user-disabled",i);const o=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,o,a);v(e,o)}}catch(i){if(i instanceof a.g)throw i;v(e,"network-request-failed",{message:String(i)})}}async function L(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await M(e,t,n,s,r);return"mfaPendingCredential"in i&&v(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function F(e,t,n,s){const r="".concat(t).concat(n,"?").concat(s),i=e,a=i.config.emulator?A(e.config,r):"".concat(e.config.apiScheme,"://").concat(r);if(D.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function V(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"network-request-failed")),P.get())})}}function U(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=y(e,t,s);return r.customData._tokenResponse=n,r}function B(e){return void 0!==e&&void 0!==e.enterprise}class q{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H(e,t){return M(e,"GET","/v2/recaptchaConfig",R(e,t))}async function W(e,t){return M(e,"POST","/v1/accounts:lookup",t)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function G(e){return 1e3*Number(e)}function Q(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(r){return g("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Y(e){const t=Q(e);return _(t,"internal-error"),_("undefined"!==typeof t.exp,"internal-error"),_("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function X(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class J{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Z(e){var t;const n=e.auth,s=await e.getIdToken(),r=await X(e,W(n,{idToken:s}));_(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?ee(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new J(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=(0,s.A)(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_("undefined"!==typeof e.idToken,"internal-error"),_("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_(0!==e.length,"internal-error");const t=Y(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(_(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:r}=await async function(e,t){const n=await O(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,i=await F(e,s,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),T.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:r}=t,i=new te;return n&&(_("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),s&&(_("string"===typeof s,"internal-error",{appName:e}),i.accessToken=s),r&&(_("number"===typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return S("not implemented")}}function ne(e,t){_("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class se{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=(0,s.A)(e,u);this.providerId="firebase",this.proactiveRefresh=new $(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new J(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return _(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),s=await n.getIdToken(t),r=Q(s);_(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i="object"===typeof r.firebase?r.firebase:void 0,o=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:K(G(r.auth_time)),issuedAtTime:K(G(r.iat)),expirationTime:K(G(r.exp)),signInProvider:o||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await Z(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,r.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new se((0,r.A)((0,r.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,i.xZ)(this.auth.app))return Promise.reject(x(this.auth));const e=await this.getIdToken();return await X(this,async function(e,t){return M(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,r.A)((0,r.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,r.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(s=t.email)&&void 0!==s?s:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:S,stsTokenManager:k}=t;_(b&&k,e,"internal-error");const N=te.fromJSON(this.name,k);_("string"===typeof b,e,"internal-error"),ne(d,e.name),ne(h,e.name),_("boolean"===typeof x,e,"internal-error"),_("boolean"===typeof w,e,"internal-error"),ne(f,e.name),ne(m,e.name),ne(p,e.name),ne(g,e.name),ne(v,e.name),ne(y,e.name);const j=new se({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:N,createdAt:v,lastLoginAt:y});return S&&Array.isArray(S)&&(j.providerData=S.map(e=>(0,r.A)({},e))),g&&(j._redirectEventId=g),j}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=new te;s.updateFromServerResponse(t);const r=new se({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Z(r),r}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];_(void 0!==s.localId,"internal-error");const r=void 0!==s.providerUserInfo?ee(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(null!==r&&void 0!==r&&r.length),a=new te;a.updateFromIdToken(n);const o=new se({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new J(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(null!==r&&void 0!==r&&r.length)};return Object.assign(o,l),o}}const re=new Map;function ie(e){k(e instanceof Function,"Expected a class definition");let t=re.get(e);return t?(k(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,re.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const oe=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:r}=this.auth;this.fullUserKey=le(this.userKey,s.apiKey,r),this.fullPersistenceKey=le("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await W(this.auth,{idToken:e}).catch(()=>{});return t?se._fromGetAccountInfoResponse(this.auth,t,e):null}return se._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ce(ie(oe),e,n);const s=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=s[0]||ie(oe);const i=le(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const s=await W(e,{idToken:t}).catch(()=>{});if(!s)break;n=await se._fromGetAccountInfoResponse(e,s,t)}else n=se._fromJSON(e,t);c!==r&&(a=n),r=c;break}}catch(l){}const o=s.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(i)}catch(t){}})),new ce(r,e,n)):new ce(r,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(me(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ve(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||fe(t))&&!t.includes("edge/"))return"Chrome";if(pe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ye(e)||pe(e)||ve(e)||ge(e)||/windows phone/i.test(e)||me(e)}function xe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ue((0,a.ZQ)());break;case"Worker":t="".concat(ue((0,a.ZQ)()),"-").concat(e);break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(i.MF,"/").concat(s)}class we{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,s)=>{try{n(e(t))}catch(r){s(r)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class _e{constructor(e){var t,n,s,r;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(s=e.allowedNonAlphanumericCharacters)||void 0===s?void 0:s.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,r,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(s=o.containsLowercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(r=o.containsUppercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Se{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ne(this),this.idTokenSubscription=new Ne(this),this.beforeStateQueue=new we(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ie(t)),this._initializationPromise=this.queue(async()=>{var n,s,r;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(s=this._popupRedirectResolver)&&void 0!==s&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await W(this,{idToken:e}),n=await se._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,i.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){var r,a;await this.getOrInitRedirectPersistenceManager();const t=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,i=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==i||null===o||void 0===o||!o.user||(n=o.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Z(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,i.xZ)(this.app))return Promise.reject(x(this));const t=e?(0,a.Ku)(e):null;return t&&_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,i.xZ)(this.app)?Promise.reject(x(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,i.xZ)(this.app)?Promise.reject(x(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ie(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return M(e,"GET","/v2/passwordPolicy",R(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new _e(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return M(e,"POST","/v2/accounts:revokeToken",R(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ie(e)||this._popupRedirectResolver;_(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[ie(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_(a,this,"internal-error"),a.then(()=>{i||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,s);return()=>{i=!0,r()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if((0,i.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(p.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];p.warn("Auth (".concat(i.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ke(e){return(0,a.Ku)(e)}class Ne{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let je={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ee(e){return je.loadJS(e)}function Ce(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ae{constructor(){this.enterprise=new Te}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Te{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ie="NO_RECAPTCHA";class De{constructor(e){this.type="recaptcha-enterprise",this.auth=ke(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,s){const r=window.grecaptcha;B(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ie)})}):s(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ae).execute("siteKey",{action:"verify"})}return new Promise((e,s)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(void 0!==s.recaptchaKey){const n=new q(s);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&B(window.grecaptcha))n(r,e,s);else{if("undefined"===typeof window)return void s(new Error("RecaptchaVerifier is only supported in browser"));let t=je.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Ee(t).then(()=>{n(r,e,s)}).catch(e=>{s(e)})}}).catch(e=>{s(e)})})}}async function Pe(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new De(e);let o;if(i)o=Ie;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=(0,r.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Re(e,t,n,s,r){if("EMAIL_PASSWORD_PROVIDER"===r){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Pe(e,t,n,"getOobCode"===n);return s(e,r)}return s(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Pe(e,t,n,"getOobCode"===n);return s(e,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const r=await Pe(e,t,n);return s(e,r).catch(async r=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await Pe(e,t,n,!1,!0);return s(e,r)}return Promise.reject(r)})}{const r=await Pe(e,t,n,!1,!0);return s(e,r)}}return Promise.reject(r+" provider is not supported.")}async function Me(e){const t=ke(e),n=await H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new q(n);if(null==t.tenantId?t._agentRecaptchaConfig=s:t._tenantRecaptchaConfigs[t.tenantId]=s,s.isAnyProviderEnabled()){new De(t).verify()}}function Oe(e,t,n){const s=ke(e);_(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const r=!(null===n||void 0===n||!n.disableWarnings),i=Le(t),{host:o,port:l}=function(e){const t=Le(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const e=r[1];return{host:e,port:Fe(s.substr(e.length+1))}}{const[e,t]=s.split(":");return{host:e,port:Fe(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(i,"//").concat(o).concat(c,"/")},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator)return _(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),void _((0,a.bD)(u,s.config.emulator)&&(0,a.bD)(d,s.emulatorConfig),s,"emulator-config-failed");s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(i,"//").concat(o).concat(c)),(0,a.P1)("Auth",!0)):r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Le(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ve{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S("not implemented")}_getIdTokenResponse(e){return S("not implemented")}_linkToIdToken(e,t){return S("not implemented")}_getReauthenticationResolver(e){return S("not implemented")}}async function ze(e,t){return M(e,"POST","/v1/accounts:signUp",t)}async function Ue(e,t){return L(e,"POST","/v1/accounts:signInWithPassword",R(e,t))}class Be extends Ve{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Be(e,t,"password")}static _fromEmailAndCode(e,t){return new Be(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Re(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Re(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ze,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qe(e,t){return L(e,"POST","/v1/accounts:signInWithIdp",R(e,t))}class He extends Ve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new He(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,s.A)(t,d);if(!n||!r)return null;const a=new He(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function We(e,t){return M(e,"POST","/v1/accounts:sendVerificationCode",R(e,t))}const Ke={USER_NOT_FOUND:"user-not-found"};class Ge extends Ve{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ge({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ge({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n}(e,(0,r.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,(0,r.A)((0,r.A)({},t),{},{operation:"REAUTH"})),Ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:r}=e;return n||t||s||r?new Ge({verificationId:t,verificationCode:n,phoneNumber:s,temporaryProof:r}):null}}class Qe{constructor(e){var t,n,s,r,i,o;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=l.mode)&&void 0!==s?s:null);_(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(r=l.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(i=l.lang)&&void 0!==i?i:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,s=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(s?(0,a.I9)((0,a.hp)(s)).link:null)||s||n||t||e}(e);try{return new Qe(t)}catch(n){return null}}}class Ye{constructor(){this.providerId=Ye.PROVIDER_ID}static credential(e,t){return Be._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qe.parseLink(t);return _(n,"argument-error"),Be._fromEmailAndCode(e,n.code,n.tenantId)}}Ye.PROVIDER_ID="password",Ye.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ye.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $e extends Xe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Je extends $e{constructor(){super("facebook.com")}static credential(e){return He._fromParams({providerId:Je.PROVIDER_ID,signInMethod:Je.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Je.credentialFromTaggedObject(e)}static credentialFromError(e){return Je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Je.credential(t.oauthAccessToken)}catch(n){return null}}}Je.FACEBOOK_SIGN_IN_METHOD="facebook.com",Je.PROVIDER_ID="facebook.com";class Ze extends $e{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return He._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Ze.credential(n,s)}catch(r){return null}}}Ze.GOOGLE_SIGN_IN_METHOD="google.com",Ze.PROVIDER_ID="google.com";class et extends $e{constructor(){super("github.com")}static credential(e){return He._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.GITHUB_SIGN_IN_METHOD="github.com",et.PROVIDER_ID="github.com";class tt extends $e{constructor(){super("twitter.com")}static credential(e,t){return He._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return tt.credential(n,s)}catch(r){return null}}}async function nt(e,t){return L(e,"POST","/v1/accounts:signUp",R(e,t))}tt.TWITTER_SIGN_IN_METHOD="twitter.com",tt.PROVIDER_ID="twitter.com";class st{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await se._fromIdTokenResponse(e,n,s),i=rt(n);return new st({user:r,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=rt(n);return new st({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function rt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class it extends a.g{constructor(e,t,n,s){var r;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,it.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new it(e,t,n,s)}}function at(e,t,n,s){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw it._fromErrorAndOperation(e,n,t,s);throw n})}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return st._forOperation(e,"link",s)}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,i.xZ)(s.app))return Promise.reject(x(s));const r="reauthenticate";try{const i=await X(e,at(s,r,t,e),n);_(i.idToken,s,"internal-error");const a=Q(i.idToken);_(a,s,"internal-error");const{sub:o}=a;return _(e.uid===o,s,"user-mismatch"),st._forOperation(e,r,i)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&v(s,"user-mismatch"),a}}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,i.xZ)(e.app))return Promise.reject(x(e));const s="signIn",r=await at(e,s,t),a=await st._fromIdTokenResponse(e,s,r);return n||await e._updateCurrentUser(a.user),a}async function ut(e,t){return ct(ke(e),t)}async function dt(e,t){return lt((0,a.Ku)(e),t)}async function ht(e){const t=ke(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ft(e,t,n){if((0,i.xZ)(e.app))return Promise.reject(x(e));const s=ke(e),r=Re(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nt,"EMAIL_PASSWORD_PROVIDER"),a=await r.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ht(e),t}),o=await st._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function mt(e,t,n){return(0,i.xZ)(e.app)?Promise.reject(x(e)):ut((0,a.Ku)(e),Ye.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ht(e),t})}function pt(e,t){return gt((0,a.Ku)(e),null,t)}async function gt(e,t,n){const{auth:s}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const i=await X(e,async function(e,t){return M(e,"POST","/v1/accounts:update",t)}(s,r));await e._updateTokensIfNecessary(i,!0)}function vt(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:start",R(e,t))}new WeakMap;const yt="__sak";class bt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yt,"1"),this.storage.removeItem(yt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xt extends bt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xt.type="LOCAL";const wt=xt;function _t(e){var t,n;const s=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(s,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(r))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function St(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class kt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=St(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _t(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=St(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=St(e);if(window.cookieStore){const e=e=>{const s=e.changed.find(e=>e.name===n);s&&t(s.value);e.deleted.find(e=>e.name===n)&&t(null)},s=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,s),window.cookieStore.addEventListener("change",e)}let s=_t(n);const r=setInterval(()=>{const e=_t(n);e!==s&&(t(e),s=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(r))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}kt.type="COOKIE";class Nt extends bt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nt.type="SESSION";const jt=Nt;class Et{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Et(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:r}=t.data,i=this.handlersMap[s];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let s=0;s<t;s++)n+=Math.floor(10*Math.random());return e+n}Et.receivers=[];class At{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const s="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,i;return new Promise((a,o)=>{const l=Ct("",20);s.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Tt(){return window}function It(){return"undefined"!==typeof Tt().WorkerGlobalScope&&"function"===typeof Tt().importScripts}const Dt="firebaseLocalStorageDb",Pt="firebaseLocalStorage",Rt="fbase_key";class Mt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ot(e,t){return e.transaction([Pt],t?"readwrite":"readonly").objectStore(Pt)}function Lt(){const e=indexedDB.open(Dt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Pt,{keyPath:Rt})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Pt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Dt);return new Mt(e).toPromise()}(),t(await Lt()))})})}async function Ft(e,t,n){const s=Ot(e,!0).put({[Rt]:t,value:n});return new Mt(s).toPromise()}function Vt(e,t){const n=Ot(e,!0).delete(t);return new Mt(n).toPromise()}class zt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Lt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return It()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Et._getInstance(It()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new At(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lt();return await Ft(e,yt,"1"),await Vt(e,yt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ft(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ot(e,!1).get(t),s=await new Mt(n).toPromise();return void 0===s?null:s.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ot(e,!1).getAll();return new Mt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:s,value:r}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zt.type="LOCAL";const Ut=zt;function Bt(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:start",R(e,t))}Ce("rcb"),new C(3e4,6e4);const qt="recaptcha";async function Ht(e,t,n){if(!e._getRecaptchaConfig())try{await Me(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){_("enroll"===t.type,e,"internal-error");const s={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Re(e,s,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ie){_((null===n||void 0===n?void 0:n.type)===qt,e,"argument-error");return vt(e,await Wt(e,t,n))}return vt(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var s;_("signin"===t.type,e,"internal-error");const i=(null===(s=r.multiFactorHint)||void 0===s?void 0:s.uid)||r.multiFactorUid;_(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Re(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ie){_((null===n||void 0===n?void 0:n.type)===qt,e,"argument-error");return Bt(e,await Wt(e,t,n))}return Bt(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},s=Re(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ie){_((null===n||void 0===n?void 0:n.type)===qt,e,"argument-error");return We(e,await Wt(e,t,n))}return We(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Wt(e,t,n){_(n.type===qt,e,"argument-error");const s=await n.verify();_("string"===typeof s,e,"argument-error");const i=(0,r.A)({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,r=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:s,captchaResponse:t,clientType:n,recaptchaVersion:r}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:s}),i}class Kt{constructor(e){this.providerId=Kt.PROVIDER_ID,this.auth=ke(e)}verifyPhoneNumber(e,t){return Ht(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Ge._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Kt.credentialFromTaggedObject(t)}static credentialFromError(e){return Kt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:s}=t;return n&&s?Ge._fromTokenResponse(n,s):null}}function Gt(e,t){return t?ie(t):(_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Kt.PROVIDER_ID="phone",Kt.PHONE_SIGN_IN_METHOD="phone";class Qt extends Ve{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yt(e){return ct(e.auth,new Qt(e),e.bypassAuthState)}function Xt(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),lt(n,new Qt(e),e.bypassAuthState)}async function $t(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),ot(n,new Qt(e),e.bypassAuthState)}class Jt{constructor(e,t,n,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:r,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yt;case"linkViaPopup":case"linkViaRedirect":return $t;case"reauthViaPopup":case"reauthViaRedirect":return Xt;default:v(this.auth,"internal-error")}}resolve(e){k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zt=new C(2e3,1e4);class en extends Jt{constructor(e,t,n,s,r){super(e,t,s,r),this.provider=n,this.authWindow=null,this.pollId=null,en.currentPopupAction&&en.currentPopupAction.cancel(),en.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _(e,this.auth,"internal-error"),e}async onExecution(){k(1===this.filter.length,"Popup operations only handle one event");const e=Ct();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,en.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Zt.get())};e()}}en.currentPopupAction=null;const tn=new Map;class nn extends Jt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=tn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=an(t),s=rn(e);if(!await s._isAvailable())return!1;const r="true"===await s._get(n);return await s._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}tn.set(this.auth._key(),e)}return this.bypassAuthState||tn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sn(e,t){tn.set(e._key(),t)}function rn(e){return ie(e._redirectPersistence)}function an(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function on(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,i.xZ)(e.app))return Promise.reject(x(e));const s=ke(e),r=Gt(s,t),a=new nn(s,r,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}class ln{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return un(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!un(e)){var n;const s=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cn(e))}saveEventToCache(e){this.cachedEventUids.add(cn(e)),this.lastProcessedEventTime=Date.now()}}function cn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function un(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const dn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hn=/^https?/;async function fn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return M(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const s of t)try{if(mn(s))return}catch(n){}v(e,"unauthorized-domain")}function mn(e){const t=N(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===s?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===s}if(!hn.test(n))return!1;if(dn.test(e))return s===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const pn=new C(3e4,6e4);function gn(){const e=Tt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function vn(e){return new Promise((t,n)=>{var s,r;function i(){gn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gn(),n(y(e,"network-request-failed"))},timeout:pn.get()})}if(null!==(s=Tt().gapi)&&void 0!==s&&null!==(s=s.iframes)&&void 0!==s&&s.Iframe)t(gapi.iframes.getContext());else{if(null===(r=Tt().gapi)||void 0===r||!r.load){const t=Ce("iframefcb");return Tt()[t]=()=>{gapi.load?i():n(y(e,"network-request-failed"))},Ee("".concat(je.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw yn=null,e})}let yn=null;const bn=new C(5e3,15e3),xn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _n(e){const t=e.config;_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),s={apiKey:t.apiKey,appName:e.name,v:i.MF},r=wn.get(e.config.apiHost);r&&(s.eid=r);const o=e._getFrameworks();return o.length&&(s.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(s).slice(1))}async function Sn(e){const t=await function(e){return yn=yn||vn(e),yn}(e),n=Tt().gapi;return _(n,e,"internal-error"),t.open({where:document.body,url:_n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xn,dontclear:!0},t=>new Promise(async(n,s)=>{await t.restyle({setHideOnLeave:!1});const r=y(e,"network-request-failed"),i=Tt().setTimeout(()=>{s(r)},bn.get());function a(){Tt().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{s(r)})}))}const kn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function jn(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=(0,r.A)((0,r.A)({},kn),{},{width:s.toString(),height:i.toString(),top:o,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=fe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,s]=t;return"".concat(e).concat(n,"=").concat(s,",")},"");if(function(){var e;return ye(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}(t||"",c),new Nn(null);const f=window.open(t||"",c,h);_(f,e,"popup-blocked");try{f.focus()}catch(m){}return new Nn(f)}const En="__/auth/handler",Cn="emulator/auth/handler",An=encodeURIComponent("fac");async function Tn(e,t,n,s,r,o){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.MF,eventId:r};if(t instanceof Xe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof $e){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const i of Object.keys(c))void 0===c[i]&&delete c[i];const u=await e._getAppCheckToken(),d=u?"#".concat(An,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(En);return A(t,Cn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const In="webStorageSupport";const Dn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jt,this._completeRedirectFn=on,this._overrideRedirectResult=sn}async _openPopup(e,t,n,s){var r;k(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return jn(e,await Tn(e,t,n,N(),s),Ct())}async _openRedirect(e,t,n,s){await this._originValidation(e);return function(e){Tt().location.href=e}(await Tn(e,t,n,N(),s)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(k(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Sn(e),n=new ln(e);return t.register("authEvent",t=>{_(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(In,{type:In},n=>{var s;const r=null===n||void 0===n||null===(s=n[0])||void 0===s?void 0:s[In];void 0!==r&&t(!!r),v(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||he()||ye()}};var Pn="@firebase/auth",Rn="1.11.0";class Mn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const On=(0,a.XA)("authIdTokenMaxAge")||300;let Ln=null;const Fn=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>On)return;const r=null===n||void 0===n?void 0:n.token;Ln!==r&&(Ln=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))};function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.Sx)();const t=(0,i.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,i.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),s=n.getOptions();if((0,a.bD)(s,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Dn,persistence:[Ut,wt,jt]}),s=(0,a.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=Fn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,s){(0,a.Ku)(e).onIdTokenChanged(t,n,s)}(n,e=>t(e))}}const r=(0,a.Tj)("auth");return r&&Oe(n,"http://".concat(r)),n}var zn,Un;zn={loadJS:e=>new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},je=zn,Un="Browser",(0,i.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=s.options;_(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:a,authDomain:o,clientPlatform:Un,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xe(Un)},c=new Se(s,r,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ie);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,i.om)(new l.uA("auth-internal",e=>(e=>new Mn(e))(ke(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KO)(Pn,Rn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Un)),(0,i.KO)(Pn,Rn,"esm2020")},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<i(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,a=r>>>1;s<a;){var o=2*(s+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[s]=u,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>i(u,n)))break e;e[s]=u,e[c]=n,s=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=s(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=s(u)}}function _(e){if(g=!1,w(e),!p)if(null!==s(c))p=!0,k||(k=!0,S());else{var t=s(u);null!==t&&D(_,t.startTime-e)}}var S,k=!1,N=-1,j=5,E=-1;function C(){return!!v||!(t.unstable_now()-E<j)}function A(){if(v=!1,k){var e=t.unstable_now();E=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(N),N=-1),m=!0;var i=f;try{t:{for(w(e),h=s(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===s(c)&&r(c),w(e)}else r(c);h=s(c)}if(null!==h)n=!0;else{var l=s(u);null!==l&&D(_,l.startTime-e),n=!1}}break e}finally{h=null,f=i,m=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof x)S=function(){x(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=A,S=function(){I.postMessage(null)}}else S=function(){y(A,0)};function D(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===s(c)&&e===s(u)&&(g?(b(N),N=-1):g=!0,D(_,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>r,Vy:()=>c});const s=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));const i={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},a=r.INFO,o={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),s=o[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];console[s]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}},986:(e,t,n)=>{function s(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{A:()=>s})}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+".bb02ef96.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="scandale_bouffe_website:";n.l=(s,r,i,a)=>{if(e[s])e[s].push(r);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=s),e[s]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var r=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/scandale_bouffe_website/",(()=>{var e={792:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var i=new Promise((n,s)=>r=e[t]=[n,s]);s.push(r[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,r[1](o)}},"chunk-"+t,t)}};var t=(t,s)=>{var r,i,a=s[0],o=s[1],l=s[2],c=0;if(a.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(s);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},s=self.webpackChunkscandale_bouffe_website=self.webpackChunkscandale_bouffe_website||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=n(43),r=n(391),i=n(986),a=n(379);const o=["sri"],l=["page"],c=["page","matches"],u=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var f="popstate";function m(){return w(function(e,t){let{pathname:n,search:s,hash:r}=e.location;return y("",{pathname:n,search:s,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:b(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;return(0,a.A)((0,a.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t),{},{state:n,key:t&&t.key||s||Math.random().toString(36).substring(2,10)})}function b(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function x(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function w(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,u=d();function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:p.location,delta:t})}function m(e){return _(e)}null==u&&(u=0,o.replaceState((0,a.A)((0,a.A)({},o.state),{},{idx:u}),""));let p={get action(){return l},get location(){return e(r,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(f,h),c=e,()=>{r.removeEventListener(f,h),c=null}},createHref:e=>t(r,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let s=y(p.location,e,t);n&&n(s,e),u=d()+1;let a=v(s,u),h=p.createHref(s);try{o.pushState(a,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(h)}i&&c&&c({action:l,location:p.location,delta:1})},replace:function(e,t){l="REPLACE";let s=y(p.location,e,t);n&&n(s,e),u=d();let r=v(s,u),a=p.createHref(s);o.replaceState(r,"",a),i&&c&&c({action:l,location:p.location,delta:0})},go:e=>o.go(e)};return p}function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),p(n,"No window.location.(origin|href) available to create URL");let s="string"===typeof e?e:b(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}new WeakMap;function S(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function k(e,t,n,s){let r=V(("string"===typeof t?x(t):t).pathname||"/",n);if(null==r)return null;let i=N(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=F(r);a=M(i[o],e,s)}return a}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(s)&&a)return;p(l.relativePath.startsWith(s),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(s,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(s.length)}let c=H([s,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),N(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:R(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let s of j(e.path))i(e,t,!0,s);else i(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===s.length)return r?[i,""]:[i];let a=j(s.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),r&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var E=/^:[\w-]+$/,C=3,A=2,T=1,I=10,D=-2,P=e=>"*"===e;function R(e,t){let n=e.split("/"),s=n.length;return n.some(P)&&(s+=D),t&&(s+=A),n.filter(e=>!P(e)).reduce((e,t)=>e+(E.test(t)?C:""===t?T:I),s)}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:s}=e,r={},i="/",a=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!s[s.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:H([i,u.pathname]),pathnameBase:W(H([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=H([i,u.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=L(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=s.reduce((e,t,n)=>{let{paramName:s,isOptional:r}=t;if("*"===s){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function z(e,t,n,s){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(s),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e){let t=U(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let s,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?s=x(e):(s=(0,a.A)({},e),p(!s.pathname||!s.pathname.includes("?"),z("?","pathname","search",s)),p(!s.pathname||!s.pathname.includes("#"),z("#","pathname","hash",s)),p(!s.search||!s.search.includes("#"),z("#","search","hash",s)));let i,o=""===e||""===s.pathname,l=o?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:s="",hash:r=""}="string"===typeof e?x(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:K(s),hash:G(r)}}(s,i),u=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var H=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Y=["POST","PUT","PATCH","DELETE"],X=(new Set(Y),["GET",...Y]);new Set(X),Symbol("ResetLoaderData");var $=s.createContext(null);$.displayName="DataRouter";var J=s.createContext(null);J.displayName="DataRouterState";var Z=s.createContext(!1);var ee=s.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=s.createContext(new Map);te.displayName="Fetchers";var ne=s.createContext(null);ne.displayName="Await";var se=s.createContext(null);se.displayName="Navigation";var re=s.createContext(null);re.displayName="Location";var ie=s.createContext({outlet:null,matches:[],isDataRoute:!1});ie.displayName="Route";var ae=s.createContext(null);ae.displayName="RouteError";function oe(){return null!=s.useContext(re)}function le(){return p(oe(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(re).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){s.useContext(se).static||s.useLayoutEffect(e)}function de(){let{isDataRoute:e}=s.useContext(ie);return e?function(){let{router:e}=xe("useNavigate"),t=_e("useNavigate"),n=s.useRef(!1);ue(()=>{n.current=!0});let r=s.useCallback(async function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(n.current,ce),n.current&&("number"===typeof s?e.navigate(s):await e.navigate(s,(0,a.A)({fromRouteId:t},r)))},[e,t]);return r}():function(){p(oe(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext($),{basename:t,navigator:n}=s.useContext(se),{matches:r}=s.useContext(ie),{pathname:i}=le(),a=JSON.stringify(B(r)),o=s.useRef(!1);ue(()=>{o.current=!0});let l=s.useCallback(function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(o.current,ce),!o.current)return;if("number"===typeof s)return void n.go(s);let l=q(s,JSON.parse(a),i,"path"===r.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:H([t,l.pathname])),(r.replace?n.replace:n.push)(l,r.state,r)},[t,n,a,i,e]);return l}()}s.createContext(null);function he(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=s.useContext(ie),{pathname:r}=le(),i=JSON.stringify(B(n));return s.useMemo(()=>q(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function fe(e,t,n,r,i){p(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=s.useContext(se),{matches:l}=s.useContext(ie),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";Ne(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,v=le();if(t){var y;let e="string"===typeof t?x(t):t;p("/"===h||(null===(y=e.pathname)||void 0===y?void 0:y.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=v;let b=m.pathname||"/",w=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=S(e,{pathname:w});g(f||null!=_,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),g(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let k=ye(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:H([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:H([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,r,i);return t&&k?s.createElement(re.Provider,{value:{location:(0,a.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},k):k}function me(){let e=Se(),t=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=s.createElement(s.Fragment,null,s.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:a},"ErrorBoundary")," or"," ",s.createElement("code",{style:a},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,o)}var pe=s.createElement(me,null),ge=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?s.createElement(ie.Provider,{value:this.props.routeContext},s.createElement(ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ve(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext($);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(ie.Provider,{value:t},r)}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));p(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,l=-1;if(n)for(let s=0;s<i.length;s++){let e=i[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=s),e.route.id){let{loaderData:t,errors:s}=n,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||r){o=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight((e,c,u)=>{let d,h=!1,f=null,m=null;n&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||pe,o&&(l<0&&0===u?(Ne("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,u+1)),g=()=>{let t;return t=d?f:h?m:c.route.Component?s.createElement(c.route.Component,null):c.route.element?c.route.element:e,s.createElement(ve,{match:c,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?s.createElement(ge,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:r}):g()},null)}function be(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xe(e){let t=s.useContext($);return p(t,be(e)),t}function we(e){let t=s.useContext(J);return p(t,be(e)),t}function _e(e){let t=function(e){let t=s.useContext(ie);return p(t,be(e)),t}(e),n=t.matches[t.matches.length-1];return p(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Se(){var e;let t=s.useContext(ae),n=we("useRouteError"),r=_e("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var ke={};function Ne(e,t,n){t||ke[e]||(ke[e]=!0,g(!1,n))}var je={};function Ee(e,t){e||je[t]||(je[t]=!0,console.warn(t))}s.memo(function(e){let{routes:t,future:n,state:s,unstable_onError:r}=e;return fe(t,void 0,s,r,n)});function Ce(e){let{to:t,replace:n,state:r,relative:i}=e;p(oe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=s.useContext(se);g(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=s.useContext(ie),{pathname:l}=le(),c=de(),u=q(t,B(o),l,"path"===i),d=JSON.stringify(u);return s.useEffect(()=>{c(JSON.parse(d),{replace:n,state:r,relative:i})},[c,d,i,n,r]),null}function Ae(e){p(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Te(e){let{basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:a,static:o=!1}=e;p(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=s.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof r&&(r=x(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,v=s.useMemo(()=>{let e=V(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:m},navigationType:i}},[l,u,d,h,f,m,i]);return g(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:s.createElement(se.Provider,{value:c},s.createElement(re.Provider,{children:n,value:v}))}function Ie(e){let{children:t,location:n}=e;return fe(De(t),n)}s.Component;function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,De(e.props.children,i));p(e.type===Ae,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),p(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=De(e.props.children,i)),n.push(a)}),n}var Pe="get",Re="application/x-www-form-urlencoded";function Me(e){return null!=e&&"string"===typeof e.tagName}var Oe=null;var Le=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Le.has(e)?e:(g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Re,'"')),null)}function Ve(e,t){let n,s,r,i,a;if(Me(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");s=a?V(a,t):null,n=e.getAttribute("method")||Pe,r=Fe(e.getAttribute("enctype"))||Re,i=new FormData(e)}else if(function(e){return Me(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Me(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(s=o?V(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Pe,r=Fe(e.getAttribute("formenctype"))||Fe(a.getAttribute("enctype"))||Re,i=new FormData(a,e),!function(){if(null===Oe)try{new FormData(document.createElement("form"),0),Oe=!1}catch(e){Oe=!0}return Oe}()){let{name:t,type:n,value:s}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,s)}}else{if(Me(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Pe,s=null,r=Re,a=e}var o;return i&&"text/plain"===r&&(a=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function ze(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ue(e,t,n){let s="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===s.pathname?s.pathname="_root.".concat(n):t&&"/"===V(s.pathname,t)?s.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):s.pathname="".concat(s.pathname.replace(/\/$/,""),".").concat(n),s}async function Be(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qe(e){return null!=e&&"string"===typeof e.page}function He(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,s,r,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var s;return n[t].pathname!==e.pathname||(null===(s=n[t].route.path)||void 0===s?void 0:s.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=s.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let s=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof s)return s}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s=e.map(e=>{let s=t.routes[e.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1),[...new Set(s)];var s}function Ge(e,t){let n=new Set,s=new Set(t);return e.reduce((e,r)=>{if(t&&!qe(r)&&"script"===r.as&&r.href&&s.has(r.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}(r));return n.has(i)||(n.add(i),e.push({key:i,link:r})),e},[])}function Qe(e,t){return"lazy"===e.mode&&!0===t}function Ye(){let e=s.useContext($);return ze(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Xe(){let e=s.useContext(J);return ze(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $e=s.createContext(void 0);function Je(){let e=s.useContext($e);return ze(e,"You must render this element inside a <HydratedRouter> element"),e}function Ze(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function et(e,t,n){if(n&&!rt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}$e.displayName="FrameworkContext";function tt(e){let{page:t}=e,n=(0,i.A)(e,l),{router:r}=Ye(),o=s.useMemo(()=>S(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?s.createElement(st,(0,a.A)({page:t,matches:o},n)):null}function nt(e){let{manifest:t,routeModules:n}=Je(),[r,i]=s.useState([]);return s.useEffect(()=>{let s=!1;return async function(e,t,n){return Ge((await Promise.all(e.map(async e=>{let s=t.routes[e.route.id];if(s){let e=await Be(s,n);return e.links?e.links():[]}return[]}))).flat(1).filter(He).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,a.A)((0,a.A)({},e),{},{rel:"prefetch",as:"style"}):(0,a.A)((0,a.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{s||i(e)}),()=>{s=!0}},[e,t,n]),r}function st(e){let{page:t,matches:n}=e,r=(0,i.A)(e,c),o=le(),{manifest:l,routeModules:u}=Je(),{basename:d}=Ye(),{loaderData:h,matches:f}=Xe(),m=s.useMemo(()=>We(t,n,f,l,o,"data"),[t,n,f,l,o]),p=s.useMemo(()=>We(t,n,f,l,o,"assets"),[t,n,f,l,o]),g=s.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,s=!1;if(n.forEach(t=>{var n;let r=l.routes[t.route.id];r&&r.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?s=!0:e.add(t.route.id))}),0===e.size)return[];let r=Ue(t,d,"data");return s&&e.size>0&&r.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[d,h,o,l,m,n,t,u]),v=s.useMemo(()=>Ke(p,l),[p,l]),y=nt(p);return s.createElement(s.Fragment,null,g.map(e=>s.createElement("link",(0,a.A)({key:e,rel:"prefetch",as:"fetch",href:e},r))),v.map(e=>s.createElement("link",(0,a.A)({key:e,rel:"modulepreload",href:e},r))),y.map(e=>{let{key:t,link:n}=e;return s.createElement("link",(0,a.A)({key:t,nonce:r.nonce},n))}))}var rt=!1;function it(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:l,routeDiscovery:c,ssr:u}=Je(),{router:d,static:h,staticContext:f}=Ye(),{matches:m}=Xe(),p=s.useContext(Z),g=Qe(c,u);l&&(l.didRenderScripts=!0);let v=et(m,null,r);s.useEffect(()=>{rt=!0},[]);let y=s.useMemo(()=>{var r;if(p)return null;let l=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let s="route".concat(n),r=t.routes[e.route.id];ze(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...i?[{module:i,varName:"".concat(s,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(s,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(s,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(s,"_HydrateFallback")}]:[],{module:c,varName:"".concat(s,"_main")}];return 1===u.length?"import * as ".concat(s," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(s," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,s=(0,i.A)(e,o),r=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=S(t.routes,e,t.basename);n&&n.forEach(e=>r.add(e.route.id))});let u=[...r].reduce((e,t)=>Object.assign(e,{[t]:s.routes[t]}),{});return(0,a.A)((0,a.A)({},s),{},{routes:u,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return s.createElement(s.Fragment,null,s.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),s.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),b=rt||p?[]:(x=t.entry.imports.concat(Ke(v,t,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let w="object"===typeof t.sri?t.sri:{};return Ee(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),rt||p?null:s.createElement(s.Fragment,null,"object"===typeof t.sri?s.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:s.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),s.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>s.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),y)}function at(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}s.Component;function ot(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=s.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(t))return s.createElement(lt,{title:"Unhandled Thrown Response!"},s.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return s.createElement(lt,{title:"Application Error!",isOutsideRemixApp:n},s.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),s.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function lt(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:i,children:a}=e,{routeModules:o}=Je();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!i?a:s.createElement("html",{lang:"en"},s.createElement("head",null,s.createElement("meta",{charSet:"utf-8"}),s.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),s.createElement("title",null,n)),s.createElement("body",null,s.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,r?s.createElement(it,null):null)))}var ct="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ct&&(window.__reactRouterVersion="7.9.1")}catch(gc){}function ut(e){let{basename:t,children:n,window:r}=e,i=s.useRef();null==i.current&&(i.current=m({window:r,v5Compat:!0}));let a=i.current,[o,l]=s.useState({action:a.action,location:a.location}),c=s.useCallback(e=>{s.startTransition(()=>l(e))},[l]);return s.useLayoutEffect(()=>a.listen(c),[a,c]),s.createElement(Te,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var dt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=s.forwardRef(function(e,t){let n,{onClick:r,discover:o="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:f,target:m,to:v,preventScrollReset:y,viewTransition:x}=e,w=(0,i.A)(e,u),{basename:_}=s.useContext(se),S="string"===typeof v&&dt.test(v),k=!1;if("string"===typeof v&&S&&(n=v,ct))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=V(t.pathname,_);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:k=!0}catch(gc){g(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=s.useContext(se),{hash:i,pathname:a,search:o}=he(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:H([n,a])),r.createHref({pathname:l,search:o,hash:i})}(v,{relative:c}),[j,E,C]=function(e,t){let n=s.useContext($e),[r,i]=s.useState(!1),[a,o]=s.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=s.useRef(null);s.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),s.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let m=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:Ze(l,m),onBlur:Ze(c,p),onMouseEnter:Ze(u,m),onMouseLeave:Ze(d,p),onTouchStart:Ze(h,m)}]:[!1,f,{}]}(l,w),A=function(e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=de(),c=le(),u=he(e,{relative:a});return s.useCallback(s=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(s,t)){s.preventDefault();let t=void 0!==n?n:b(c)===b(u);l(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,n,r,t,e,i,a,o])}(v,{replace:h,state:f,target:m,preventScrollReset:y,relative:c,viewTransition:x});let T=s.createElement("a",(0,a.A)((0,a.A)((0,a.A)({},w),C),{},{href:n||N,onClick:k||d?r:function(e){r&&r(e),e.defaultPrevented||A(e)},ref:at(t,E),target:m,"data-discover":S||"render"!==o?void 0:"true"}));return j&&!S?s.createElement(s.Fragment,null,T,s.createElement(tt,{page:N})):T});ht.displayName="Link";var ft=s.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:l=!1,style:c,to:u,viewTransition:h,children:f}=e,m=(0,i.A)(e,d),g=he(u,{relative:m.relative}),v=le(),y=s.useContext(J),{navigator:b,basename:x}=s.useContext(se),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.useContext(ee);p(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gt("useViewTransitionState"),i=he(e,{relative:t});if(!n.isTransitioning)return!1;let a=V(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=V(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=O(i.pathname,o)||null!=O(i.pathname,a)}(g)&&!0===h,_=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,S=v.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(S=S.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&x&&(k=V(k,x)||k);const N="/"!==_&&_.endsWith("/")?_.length-1:_.length;let j,E=S===_||!l&&S.startsWith(_)&&"/"===S.charAt(N),C=null!=k&&(k===_||!l&&k.startsWith(_)&&"/"===k.charAt(_.length)),A={isActive:E,isPending:C,isTransitioning:w},T=E?n:void 0;j="function"===typeof o?o(A):[o,E?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof c?c(A):c;return s.createElement(ht,(0,a.A)((0,a.A)({},m),{},{"aria-current":T,className:j,ref:t,style:I,to:u,viewTransition:h}),"function"===typeof f?f(A):f)});ft.displayName="NavLink";var mt=s.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:o,reloadDocument:l,replace:c,state:u,method:d=Pe,action:f,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:y}=e,x=(0,i.A)(e,h),w=bt(),_=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=s.useContext(se),r=s.useContext(ie);p(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o=(0,a.A)({},he(e||".",{relative:t})),l=le();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:H([n,o.pathname]));return b(o)}(f,{relative:g}),S="get"===d.toLowerCase()?"get":"post",k="string"===typeof f&&dt.test(f);return s.createElement("form",(0,a.A)((0,a.A)({ref:t,method:S,action:_,onSubmit:l?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;w(t||e.currentTarget,{fetcherKey:r,method:n,navigate:o,replace:c,state:u,relative:g,preventScrollReset:v,viewTransition:y})}},x),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gt(e){let t=s.useContext($);return p(t,pt(e)),t}mt.displayName="Form";var vt=0,yt=()=>"__".concat(String(++vt),"__");function bt(){let{router:e}=gt("useSubmit"),{basename:t}=s.useContext(se),n=_e("useRouteId");return s.useCallback(async function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=Ve(s,t);if(!1===r.navigate){let t=r.fetcherKey||yt();await e.fetch(t,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}var xt=n(579);const wt=()=>{const e=de();return(0,xt.jsxs)("div",{className:"restaurant-home",children:[(0,xt.jsxs)("section",{className:"hero-section",children:[(0,xt.jsx)("div",{className:"hero-overlay"}),(0,xt.jsxs)("div",{className:"hero-content",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"hero-logo"}),(0,xt.jsx)("h1",{className:"hero-title",children:"Scandale Bouffe"}),(0,xt.jsx)("p",{className:"hero-subtitle",children:"L'Art Culinaire Malgache"}),(0,xt.jsx)("p",{className:"hero-description",children:"D\xe9couvrez les saveurs authentiques de Madagascar dans une ambiance fast-food conviviale"}),(0,xt.jsxs)("div",{className:"hero-actions",children:[(0,xt.jsx)("button",{className:"cta-primary",onClick:()=>e("/client/login"),children:"Commander en ligne"}),(0,xt.jsx)("button",{className:"cta-secondary",onClick:()=>e("/client/register"),children:"Rejoindre nos membres"})]})]})]}),(0,xt.jsx)("section",{className:"menu-highlights",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsx)("h2",{children:"Nos Sp\xe9cialit\xe9s"}),(0,xt.jsx)("p",{className:"section-subtitle",children:"Nos bestsellers pr\xe9par\xe9s avec passion"}),(0,xt.jsxs)("div",{className:"menu-grid",children:[(0,xt.jsxs)("div",{className:"menu-item",children:[(0,xt.jsx)("div",{className:"menu-image"}),(0,xt.jsx)("h3",{children:"Frites Artisanales"}),(0,xt.jsx)("p",{children:"Nos frites croustillantes, sp\xe9cialit\xe9 de la maison et produit phare"})]}),(0,xt.jsxs)("div",{className:"menu-item",children:[(0,xt.jsx)("div",{className:"menu-image"}),(0,xt.jsx)("h3",{children:"Cookies Maison"}),(0,xt.jsx)("p",{children:"Nos d\xe9licieux cookies faits maison, l'autre sp\xe9cialit\xe9 la plus vendue"})]}),(0,xt.jsxs)("div",{className:"menu-item",children:[(0,xt.jsx)("div",{className:"menu-image"}),(0,xt.jsx)("h3",{children:"Burgers & Cr\xeapes"}),(0,xt.jsx)("p",{children:"Burgers gourmands et cr\xeapes sal\xe9es ou sucr\xe9es pour tous les go\xfbts"})]})]})]})}),(0,xt.jsx)("section",{className:"additional-menu",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsx)("h2",{children:"\xc9galement au Menu"}),(0,xt.jsxs)("div",{className:"additional-items",children:[(0,xt.jsxs)("div",{className:"additional-item",children:[(0,xt.jsx)("div",{className:"item-icon",children:"\ud83c\udf55"}),(0,xt.jsx)("h3",{children:"Pizzas"}),(0,xt.jsx)("p",{children:"Pizzas fra\xeeches pr\xe9par\xe9es selon vos envies"})]}),(0,xt.jsxs)("div",{className:"additional-item",children:[(0,xt.jsx)("div",{className:"item-icon",children:"\ud83c\udf5b"}),(0,xt.jsx)("h3",{children:"Plats Malgaches"}),(0,xt.jsx)("p",{children:"D\xe9couvrez parfois nos sp\xe9cialit\xe9s traditionnelles de Madagascar"})]}),(0,xt.jsxs)("div",{className:"additional-item",children:[(0,xt.jsx)("div",{className:"item-icon",children:"\u2615"}),(0,xt.jsx)("h3",{children:"Boissons Chaudes"}),(0,xt.jsx)("p",{children:"Chocolat chaud, caf\xe9 (expresso), pas d'alcool"})]})]})]})}),(0,xt.jsx)("section",{className:"restaurant-info",children:(0,xt.jsx)("div",{className:"container",children:(0,xt.jsx)("div",{className:"info-content",children:(0,xt.jsxs)("div",{className:"info-text",children:[(0,xt.jsx)("h2",{children:"Fast-Food Malgache Authentique"}),(0,xt.jsx)("p",{children:"Scandale Bouffe vous propose une exp\xe9rience culinaire unique alliant la rapidit\xe9 du fast-food aux saveurs authentiques de Madagascar. Notre carte vari\xe9e satisfait toutes vos envies gourmandes."}),(0,xt.jsxs)("div",{className:"restaurant-features",children:[(0,xt.jsxs)("div",{className:"feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\ud83c\udf93"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"Chef Dipl\xf4m\xe9 INTH"}),(0,xt.jsx)("p",{children:"Formation d'excellence \xe0 l'Institut National du Tourisme et de l'H\xf4tellerie"})]})]}),(0,xt.jsxs)("div",{className:"feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\ud83c\udf31"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"Produits Bio"}),(0,xt.jsx)("p",{children:"Ingr\xe9dients frais et bio issus d'\xe9levages locaux et de plantations durables"})]})]}),(0,xt.jsxs)("div",{className:"feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\ud83e\udd67"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"P\xe2tisseries Artisanales"}),(0,xt.jsx)("p",{children:"Pain chocolat, pain raisin, quiches et tartes sal\xe9es/sucr\xe9es"})]})]})]})]})})})}),(0,xt.jsx)("section",{className:"cta-section",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsx)("h2",{children:"Pr\xeat \xe0 Vivre l'Exp\xe9rience ?"}),(0,xt.jsx)("p",{children:"Rejoignez notre communaut\xe9 de gourmets et d\xe9couvrez nos derni\xe8res cr\xe9ations"}),(0,xt.jsxs)("div",{className:"cta-buttons",children:[(0,xt.jsx)("button",{className:"cta-primary",onClick:()=>e("/client/register"),children:"Cr\xe9er mon compte"}),(0,xt.jsx)("button",{className:"cta-outline",onClick:()=>e("/client/login"),children:"D\xe9j\xe0 membre ? Se connecter"})]})]})}),(0,xt.jsx)("footer",{className:"restaurant-footer",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsxs)("div",{className:"footer-content",children:[(0,xt.jsxs)("div",{className:"footer-brand",children:[(0,xt.jsx)("h3",{children:"Scandale Bouffe"}),(0,xt.jsx)("p",{children:"L'art culinaire malgache \xe0 votre service"})]}),(0,xt.jsxs)("div",{className:"footer-info",children:[(0,xt.jsx)("h4",{children:"Horaires"}),(0,xt.jsx)("p",{children:"Lundi - Samedi: 07h - 19h"}),(0,xt.jsx)("p",{children:"Ferm\xe9 le dimanche"})]})]}),(0,xt.jsx)("div",{className:"footer-bottom",children:(0,xt.jsx)("p",{children:"\xa9 2025 Scandale Bouffe. Tous droits r\xe9serv\xe9s."})})]})})]})},_t=()=>{const e=de();return(0,xt.jsxs)("div",{className:"business-portal",children:[(0,xt.jsx)("header",{className:"portal-header",children:(0,xt.jsxs)("div",{className:"header-content",children:[(0,xt.jsxs)("div",{className:"brand-section",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"brand-logo"}),(0,xt.jsxs)("div",{className:"brand-info",children:[(0,xt.jsx)("h1",{children:"Scandale Bouffe"}),(0,xt.jsx)("span",{children:"Business Portal"})]})]}),(0,xt.jsx)("div",{className:"header-actions",children:(0,xt.jsx)("button",{className:"login-btn",onClick:()=>e("/staff/login"),children:"Connexion S\xe9curis\xe9e"})})]})}),(0,xt.jsx)("section",{className:"portal-hero",children:(0,xt.jsxs)("div",{className:"hero-grid",children:[(0,xt.jsxs)("div",{className:"hero-text",children:[(0,xt.jsx)("h1",{children:"Plateforme de Gestion"}),(0,xt.jsx)("h2",{children:"Restaurant Scandale Bouffe"}),(0,xt.jsx)("p",{children:"Syst\xe8me int\xe9gr\xe9 de gestion des op\xe9rations, administration du personnel et pilotage de la performance commerciale."}),(0,xt.jsxs)("div",{className:"hero-stats",children:[(0,xt.jsxs)("div",{className:"stat",children:[(0,xt.jsx)("span",{className:"stat-number",children:"24/7"}),(0,xt.jsx)("span",{className:"stat-label",children:"Surveillance"})]}),(0,xt.jsxs)("div",{className:"stat",children:[(0,xt.jsx)("span",{className:"stat-number",children:"100%"}),(0,xt.jsx)("span",{className:"stat-label",children:"S\xe9curis\xe9"})]}),(0,xt.jsxs)("div",{className:"stat",children:[(0,xt.jsx)("span",{className:"stat-number",children:"Real-time"}),(0,xt.jsx)("span",{className:"stat-label",children:"Analytics"})]})]})]}),(0,xt.jsx)("div",{className:"hero-visual",children:(0,xt.jsxs)("div",{className:"dashboard-preview",children:[(0,xt.jsxs)("div",{className:"preview-header",children:[(0,xt.jsxs)("div",{className:"preview-dots",children:[(0,xt.jsx)("span",{}),(0,xt.jsx)("span",{}),(0,xt.jsx)("span",{})]}),(0,xt.jsx)("span",{className:"preview-title",children:"Dashboard Admin"})]}),(0,xt.jsxs)("div",{className:"preview-content",children:[(0,xt.jsx)("div",{className:"preview-chart"}),(0,xt.jsxs)("div",{className:"preview-metrics",children:[(0,xt.jsx)("div",{className:"metric"}),(0,xt.jsx)("div",{className:"metric"}),(0,xt.jsx)("div",{className:"metric"})]})]})]})})]})}),(0,xt.jsx)("section",{className:"management-modules",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsx)("h2",{children:"Modules de Gestion"}),(0,xt.jsx)("p",{className:"section-description",children:"Suite compl\xe8te d'outils pour l'administration et le pilotage op\xe9rationnel"}),(0,xt.jsxs)("div",{className:"modules-grid",children:[(0,xt.jsxs)("div",{className:"module-card",children:[(0,xt.jsx)("div",{className:"module-icon operations",children:(0,xt.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,xt.jsx)("path",{d:"M12 2L15.09 8.26L22 9L16 14.74L17.18 21.02L12 18.77L6.82 21.02L8 14.74L2 9L8.91 8.26L12 2Z",fill:"currentColor"})})}),(0,xt.jsx)("h3",{children:"Op\xe9rations"}),(0,xt.jsx)("p",{children:"Gestion des commandes, suivi de production, coordination cuisine-service"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{children:"Commandes en temps r\xe9el"}),(0,xt.jsx)("li",{children:"Gestion des files d'attente"}),(0,xt.jsx)("li",{children:"Optimisation des temps"})]})]}),(0,xt.jsxs)("div",{className:"module-card",children:[(0,xt.jsx)("div",{className:"module-icon inventory",children:(0,xt.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,xt.jsx)("path",{d:"M20 6H16L15.38 4.76C15.15 4.31 14.68 4 14.17 4H9.83C9.32 4 8.85 4.31 8.62 4.76L8 6H4C3.45 6 3 6.45 3 7C3 7.55 3.45 8 4 8H5V19C5 20.1 5.9 21 7 21H17C18.1 21 19 20.1 19 19V8H20C20.55 8 21 7.55 21 7C21 6.45 20.55 6 20 6Z",fill:"currentColor"})})}),(0,xt.jsx)("h3",{children:"Inventaire"}),(0,xt.jsx)("p",{children:"Contr\xf4le des stocks, approvisionnements, gestion des fournisseurs"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{children:"Suivi automatis\xe9 des stocks"}),(0,xt.jsx)("li",{children:"Alertes r\xe9approvisionnement"}),(0,xt.jsx)("li",{children:"Tra\xe7abilit\xe9 produits"})]})]}),(0,xt.jsxs)("div",{className:"module-card",children:[(0,xt.jsx)("div",{className:"module-icon finance",children:(0,xt.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,xt.jsx)("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19Z",fill:"currentColor"})})}),(0,xt.jsx)("h3",{children:"Finance"}),(0,xt.jsx)("p",{children:"Comptabilit\xe9, analyses de rentabilit\xe9, rapports financiers"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{children:"Tableau de bord financier"}),(0,xt.jsx)("li",{children:"Analyses de marge"}),(0,xt.jsx)("li",{children:"Reporting automatique"})]})]}),(0,xt.jsxs)("div",{className:"module-card",children:[(0,xt.jsx)("div",{className:"module-icon hr",children:(0,xt.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,xt.jsx)("path",{d:"M16 4C16.55 4 17 4.45 17 5V8H15V6H9V8H7V5C7 4.45 7.45 4 8 4H16Z",fill:"currentColor"}),(0,xt.jsx)("path",{d:"M12 9C13.1 9 14 9.9 14 11C14 12.1 13.1 13 12 13C10.9 13 10 12.1 10 11C10 9.9 10.9 9 12 9Z",fill:"currentColor"})]})}),(0,xt.jsx)("h3",{children:"Ressources Humaines"}),(0,xt.jsx)("p",{children:"Gestion du personnel, plannings, \xe9valuations, formation"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{children:"Planning intelligent"}),(0,xt.jsx)("li",{children:"Gestion des cong\xe9s"}),(0,xt.jsx)("li",{children:"\xc9valuation performance"})]})]})]})]})}),(0,xt.jsx)("section",{className:"access-control",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsx)("h2",{children:"Acc\xe8s S\xe9curis\xe9 & Niveaux d'Autorisation"}),(0,xt.jsxs)("div",{className:"access-grid",children:[(0,xt.jsxs)("div",{className:"access-level admin",children:[(0,xt.jsx)("div",{className:"level-badge",children:"ADMIN"}),(0,xt.jsx)("h3",{children:"Administration Compl\xe8te"}),(0,xt.jsx)("p",{children:"Acc\xe8s total aux syst\xe8mes, gestion des utilisateurs, configuration"})]}),(0,xt.jsxs)("div",{className:"access-level manager",children:[(0,xt.jsx)("div",{className:"level-badge",children:"MANAGER"}),(0,xt.jsx)("h3",{children:"Gestion Op\xe9rationnelle"}),(0,xt.jsx)("p",{children:"Supervision \xe9quipes, rapports, gestion stocks et planning"})]}),(0,xt.jsxs)("div",{className:"access-level staff",children:[(0,xt.jsx)("div",{className:"level-badge",children:"STAFF"}),(0,xt.jsx)("h3",{children:"Interface Employ\xe9"}),(0,xt.jsx)("p",{children:"Consultation planning, demandes cong\xe9s, suivi personnel"})]})]})]})}),(0,xt.jsx)("footer",{className:"portal-footer",children:(0,xt.jsxs)("div",{className:"container",children:[(0,xt.jsxs)("div",{className:"footer-grid",children:[(0,xt.jsxs)("div",{className:"footer-brand",children:[(0,xt.jsx)("h4",{children:"Scandale Bouffe Business Portal"}),(0,xt.jsx)("p",{children:"Plateforme de gestion int\xe9gr\xe9e pour l'excellence op\xe9rationnelle"})]}),(0,xt.jsxs)("div",{className:"footer-security",children:[(0,xt.jsx)("h4",{children:"S\xe9curit\xe9 & Conformit\xe9"}),(0,xt.jsx)("p",{children:"Chiffrement SSL \u2022 Authentification multi-facteurs \u2022 Sauvegarde automatique"})]})]}),(0,xt.jsx)("div",{className:"footer-bottom",children:(0,xt.jsx)("p",{children:"\xa9 2025 Scandale Bouffe Business Solutions. Tous droits r\xe9serv\xe9s."})})]})})]})};var St=n(22);const kt=()=>{const[e,t]=(0,s.useState)({email:"",password:""}),[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=de(),c=n=>{t((0,a.A)((0,a.A)({},e),{},{[n.target.name]:n.target.value}))};return(0,xt.jsxs)("div",{className:"restaurant-auth-container",children:[(0,xt.jsx)("div",{className:"restaurant-auth-backdrop"}),(0,xt.jsx)("div",{className:"restaurant-auth-content",children:(0,xt.jsxs)("div",{className:"restaurant-auth-card",children:[(0,xt.jsxs)("div",{className:"restaurant-auth-header",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"restaurant-auth-logo"}),(0,xt.jsx)("h1",{children:"Scandale Bouffe"}),(0,xt.jsx)("p",{children:"L'Art Culinaire Malgache"}),(0,xt.jsx)("h2",{children:"Connexion Membres"})]}),(0,xt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),r("");try{const t=await(0,St.Lx)(e.email,e.password),n=await(0,St.Nr)("clients",[{field:"uid",operator:"==",value:t.uid}]);if(n.length>0){const e=n[0];localStorage.setItem("userRole",e.role),localStorage.setItem("userId",t.uid),localStorage.setItem("userEmail",t.email),l("/client/dashboard")}else r("Profil client non trouv\xe9")}catch(n){r("Email ou mot de passe incorrect")}finally{o(!1)}},className:"restaurant-auth-form",children:[n&&(0,xt.jsx)("div",{className:"restaurant-error-message",children:n}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"email",children:"Adresse Email"}),(0,xt.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,required:!0,placeholder:"votre@email.com"})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"password",children:"Mot de Passe"}),(0,xt.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:c,required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,xt.jsx)("button",{type:"submit",className:"restaurant-auth-button",disabled:i,children:i?"Connexion en cours...":"Acc\xe9der \xe0 mon espace"})]}),(0,xt.jsxs)("div",{className:"restaurant-auth-footer",children:[(0,xt.jsx)("p",{className:"restaurant-signup-text",children:"Pas encore membre de notre communaut\xe9 ?"}),(0,xt.jsx)("button",{className:"restaurant-signup-button",onClick:()=>l("/client/register"),children:"Rejoindre Scandale Bouffe"}),(0,xt.jsx)("div",{className:"restaurant-back-link",children:(0,xt.jsx)("button",{className:"restaurant-back-button",onClick:()=>l("/"),children:"\u2190 Retour au restaurant"})})]})]})})]})},Nt=()=>{const[e,t]=(0,s.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:""}),[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=de(),c=n=>{t((0,a.A)((0,a.A)({},e),{},{[n.target.name]:n.target.value}))};return(0,xt.jsxs)("div",{className:"restaurant-auth-container",children:[(0,xt.jsx)("div",{className:"restaurant-auth-backdrop"}),(0,xt.jsx)("div",{className:"restaurant-auth-content",children:(0,xt.jsxs)("div",{className:"restaurant-auth-card register-card",children:[(0,xt.jsxs)("div",{className:"restaurant-auth-header",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"restaurant-auth-logo"}),(0,xt.jsx)("h1",{children:"Scandale Bouffe"}),(0,xt.jsx)("p",{children:"L'Art Culinaire Malgache"}),(0,xt.jsx)("h2",{children:"Rejoindre Notre Communaut\xe9"})]}),(0,xt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o(!0),r(""),e.password!==e.confirmPassword)return r("Les mots de passe ne correspondent pas"),void o(!1);try{const t=await(0,St.DY)(e.email,e.password);await(0,St.createDocument)("clients",{uid:t.uid,email:e.email,firstName:e.firstName,lastName:e.lastName,phone:e.phone,role:"client"}),l("/client/dashboard")}catch(n){r("Erreur lors de l'inscription: "+n.message)}finally{o(!1)}},className:"restaurant-auth-form",children:[n&&(0,xt.jsx)("div",{className:"restaurant-error-message",children:n}),(0,xt.jsxs)("div",{className:"restaurant-form-row",children:[(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"firstName",children:"Pr\xe9nom"}),(0,xt.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:c,required:!0,placeholder:"Votre pr\xe9nom"})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"lastName",children:"Nom de Famille"}),(0,xt.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:c,required:!0,placeholder:"Votre nom"})]})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"email",children:"Adresse Email"}),(0,xt.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,required:!0,placeholder:"votre@email.com"})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,xt.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:c,placeholder:"+261 32 12 345 67"})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"password",children:"Mot de Passe"}),(0,xt.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:c,required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,xt.jsxs)("div",{className:"restaurant-form-group",children:[(0,xt.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le Mot de Passe"}),(0,xt.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:c,required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,xt.jsx)("button",{type:"submit",className:"restaurant-auth-button",disabled:i,children:i?"Cr\xe9ation du compte...":"Rejoindre Scandale Bouffe"})]}),(0,xt.jsxs)("div",{className:"restaurant-auth-footer",children:[(0,xt.jsx)("p",{className:"restaurant-signup-text",children:"D\xe9j\xe0 membre de notre communaut\xe9 ?"}),(0,xt.jsx)("button",{className:"restaurant-signup-button",onClick:()=>l("/client/login"),children:"Se connecter"}),(0,xt.jsx)("div",{className:"restaurant-back-link",children:(0,xt.jsx)("button",{className:"restaurant-back-button",onClick:()=>l("/"),children:"\u2190 Retour au restaurant"})})]})]})})]})};(async()=>{try{console.log("\ud83d\udd04 R\xe9cup\xe9ration de l'admin avec email par d\xe9faut...");const e="admin@scandalebouffe.com",t=await(0,St.Nr)("users",[{field:"role",operator:"==",value:"admin"}]);t.length>0&&(await(0,St.lU)("users",t[0].id,{email:e}),console.log("\u2705 Collection users mise \xe0 jour"));const n=await(0,St.Nr)("adminAccount",[{field:"role",operator:"==",value:"admin"}]);return n.length>0&&(await(0,St.lU)("adminAccount",n[0].id,{email:e}),console.log("\u2705 Collection adminAccount mise \xe0 jour")),console.log("\u2705 R\xc9CUP\xc9RATION TERMIN\xc9E!"),console.log("Connectez-vous avec:"),console.log("Email: admin@scandalebouffe.com"),console.log("Mot de passe: Admin123!@#"),!0}catch(e){throw console.error("\u274c Erreur lors de la r\xe9cup\xe9ration:",e),e}})();const jt=()=>{const[e,t]=(0,s.useState)({email:"",password:""}),[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=de(),c=n=>{t((0,a.A)((0,a.A)({},e),{},{[n.target.name]:n.target.value}))};return(0,xt.jsxs)("div",{className:"business-auth-container",children:[(0,xt.jsxs)("div",{className:"business-auth-sidebar",children:[(0,xt.jsxs)("div",{className:"business-branding",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"business-logo"}),(0,xt.jsxs)("div",{className:"business-brand-info",children:[(0,xt.jsx)("h1",{children:"Scandale Bouffe"}),(0,xt.jsx)("span",{children:"Business Portal"})]})]}),(0,xt.jsxs)("div",{className:"business-features",children:[(0,xt.jsxs)("div",{className:"business-feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\ud83d\udd10"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"S\xe9curit\xe9 Renforc\xe9e"}),(0,xt.jsx)("p",{children:"Authentification multi-niveaux et chiffrement SSL"})]})]}),(0,xt.jsxs)("div",{className:"business-feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\ud83d\udcca"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"Analytics en Temps R\xe9el"}),(0,xt.jsx)("p",{children:"Tableaux de bord et m\xe9triques instantan\xe9es"})]})]}),(0,xt.jsxs)("div",{className:"business-feature",children:[(0,xt.jsx)("div",{className:"feature-icon",children:"\u26a1"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h4",{children:"Performance Optimis\xe9e"}),(0,xt.jsx)("p",{children:"Interface rapide et responsive pour tous les appareils"})]})]})]})]}),(0,xt.jsx)("div",{className:"business-auth-main",children:(0,xt.jsxs)("div",{className:"business-auth-content",children:[(0,xt.jsxs)("div",{className:"business-auth-header",children:[(0,xt.jsx)("h2",{children:"Connexion S\xe9curis\xe9e"}),(0,xt.jsx)("p",{children:"Acc\xe9dez \xe0 votre espace de gestion professionnel"})]}),(0,xt.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),r("");try{const t=await(0,St.Lx)(e.email,e.password),s=await(async e=>{try{return(await(0,St.Nr)("users",[{field:"email",operator:"==",value:e},{field:"role",operator:"==",value:"admin"}])).length>0}catch(n){return console.error("Erreur lors de la v\xe9rification du r\xf4le admin:",n),!1}})(e.email);if(s)return localStorage.setItem("userRole","admin"),localStorage.setItem("userEmail",e.email),localStorage.setItem("userId",t.uid),void l("/admin/dashboard");const i=await(0,St.Nr)("employees",[{field:"email",operator:"==",value:e.email}]);if(0===i.length)return void r("Acc\xe8s non autoris\xe9. Contactez l'administrateur.");const a=i[0];localStorage.setItem("userRole","employee"),localStorage.setItem("userEmail",e.email),localStorage.setItem("employeeId",a.id),localStorage.setItem("userId",t.uid),l("/employee/dashboard")}catch(n){r("Email ou mot de passe incorrect")}finally{o(!1)}},className:"business-auth-form",children:[n&&(0,xt.jsx)("div",{className:"business-error-message",children:n}),(0,xt.jsxs)("div",{className:"business-form-group",children:[(0,xt.jsxs)("label",{htmlFor:"email",children:[(0,xt.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,xt.jsx)("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,xt.jsx)("path",{d:"M22 6L12 13L2 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),"Email Professionnel"]}),(0,xt.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,required:!0,placeholder:"nom@scandalebouffe.com"})]}),(0,xt.jsxs)("div",{className:"business-form-group",children:[(0,xt.jsxs)("label",{htmlFor:"password",children:[(0,xt.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,xt.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,xt.jsx)("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"}),(0,xt.jsx)("path",{d:"M7 11V7A5 5 0 0 1 17 7V11",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),"Mot de Passe"]}),(0,xt.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:c,required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,xt.jsx)("button",{type:"submit",className:"business-auth-button",disabled:i,children:i?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("svg",{className:"loading-spinner",width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,xt.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none",opacity:"0.25"}),(0,xt.jsx)("path",{d:"M4 12A8 8 0 018 4",stroke:"currentColor",strokeWidth:"4",fill:"none"})]}),"Authentification..."]}):(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,xt.jsx)("path",{d:"M15 3H6A3 3 0 003 6V18A3 3 0 006 21H15",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,xt.jsx)("path",{d:"M10 17L15 12L10 7",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,xt.jsx)("path",{d:"M15 12H21",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),"Acc\xe9der au portail"]})})]}),(0,xt.jsxs)("div",{className:"business-auth-footer",children:[(0,xt.jsxs)("div",{className:"business-security-notice",children:[(0,xt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,xt.jsx)("path",{d:"M12 22S2 16 2 9C2 7 4 5 6 5C8 5 10 6 12 8C14 6 16 5 18 5C20 5 22 7 22 9C22 16 12 22 12 22Z",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),(0,xt.jsx)("span",{children:"Connexion s\xe9curis\xe9e SSL \u2022 Donn\xe9es chiffr\xe9es"})]}),(0,xt.jsx)("button",{className:"business-back-button",onClick:()=>l("/staff"),children:"\u2190 Retour au portail"}),(0,xt.jsx)("div",{className:"business-help-text",children:(0,xt.jsx)("small",{children:"Pour l'inscription du personnel ou l'assistance technique, contactez l'administrateur syst\xe8me."})})]})]})})]})},Et=()=>{const e=de(),[t,n]=(0,s.useState)("");(0,s.useEffect)(()=>{const e=localStorage.getItem("userEmail")||"admin@scandalebouffe.com";n(e)},[]);return(0,xt.jsxs)("div",{className:"dashboard-container",children:[(0,xt.jsxs)("header",{className:"dashboard-header",children:[(0,xt.jsxs)("div",{className:"header-left",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"header-logo"}),(0,xt.jsx)("h1",{children:"Tableau de Bord - Administrateur"})]}),(0,xt.jsxs)("div",{className:"header-right",children:[(0,xt.jsxs)("div",{className:"user-profile",children:[(0,xt.jsx)("div",{className:"user-avatar",children:(0,xt.jsx)("span",{className:"avatar-icon",children:"\ud83d\udc64"})}),(0,xt.jsxs)("div",{className:"user-details",children:[(0,xt.jsx)("span",{className:"user-email",children:t}),(0,xt.jsx)("span",{className:"user-role",children:"Administrateur"})]})]}),(0,xt.jsxs)("button",{onClick:()=>{localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),e("/staff/login")},className:"logout-button",children:[(0,xt.jsx)("span",{className:"logout-icon",children:"\ud83d\udeaa"}),"D\xe9connexion"]})]})]}),(0,xt.jsx)("main",{className:"dashboard-main",children:(0,xt.jsx)("div",{className:"dashboard-grid",children:[{title:"Cat\xe9gories Produits",path:"/admin/categories",icon:"\ud83d\udcc2"},{title:"Gestion Produits",path:"/admin/products",icon:"\ud83c\udf7d\ufe0f"},{title:"Gestion Stock",path:"/admin/stock",icon:"\ud83d\udce6"},{title:"Gestion Commandes",path:"/admin/orders",icon:"\ud83d\udccb"},{title:"Gestion D\xe9penses",path:"/admin/expenses",icon:"\ud83d\udcb8"},{title:"R\xe9capitulatifs",path:"/admin/reports",icon:"\ud83d\udcca"},{title:"Gestion Employ\xe9s",path:"/admin/employees",icon:"\ud83d\udc65"},{title:"Notes Employ\xe9s",path:"/admin/ratings",icon:"\u2b50"},{title:"Gestion Salaires",path:"/admin/salaries",icon:"\ud83d\udcb0"},{title:"Gestion Cong\xe9s",path:"/admin/leaves",icon:"\ud83d\udcc5"},{title:"Mon Profil",path:"/admin/profile",icon:"\ud83d\udc64"}].map((t,n)=>(0,xt.jsxs)("div",{className:"dashboard-card",onClick:()=>e(t.path),children:[(0,xt.jsx)("div",{className:"card-icon",children:t.icon}),(0,xt.jsx)("h3",{children:t.title})]},n))})})]})},Ct=()=>{const e=de(),t=localStorage.getItem("userEmail");return(0,xt.jsxs)("div",{className:"dashboard-container",children:[(0,xt.jsxs)("header",{className:"dashboard-header",children:[(0,xt.jsxs)("div",{className:"header-left",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"header-logo"}),(0,xt.jsx)("h1",{children:"Tableau de Bord - Employ\xe9"})]}),(0,xt.jsxs)("div",{className:"header-right",children:[(0,xt.jsx)("span",{className:"user-info",children:t}),(0,xt.jsx)("button",{onClick:()=>{localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),localStorage.removeItem("employeeId"),e("/staff/login")},className:"logout-button",children:"D\xe9connexion"})]})]}),(0,xt.jsxs)("main",{className:"dashboard-main",children:[(0,xt.jsxs)("div",{className:"welcome-section",children:[(0,xt.jsxs)("h2",{children:["Bienvenue, ",t]}),(0,xt.jsx)("p",{children:"G\xe9rez vos informations personnelles et vos demandes"})]}),(0,xt.jsx)("div",{className:"dashboard-grid employee-grid",children:[{title:"Mon Profil",path:"/employee/profile",icon:"\ud83d\udc64"},{title:"Mes Cong\xe9s",path:"/employee/leaves",icon:"\ud83d\udcc5"},{title:"Mon Salaire",path:"/employee/salary",icon:"\ud83d\udcb0"}].map((t,n)=>(0,xt.jsxs)("div",{className:"dashboard-card",onClick:()=>e(t.path),children:[(0,xt.jsx)("div",{className:"card-icon",children:t.icon}),(0,xt.jsx)("h3",{children:t.title})]},n))})]})]})},At=()=>{const e=de(),t=localStorage.getItem("userEmail");return(0,xt.jsxs)("div",{className:"dashboard-container",children:[(0,xt.jsxs)("header",{className:"dashboard-header",children:[(0,xt.jsxs)("div",{className:"header-left",children:[(0,xt.jsx)("img",{src:"/images/scandale_logo.jpg",alt:"Scandale Bouffe",className:"header-logo"}),(0,xt.jsx)("h1",{children:"Scandale Bouffe - Espace Client"})]}),(0,xt.jsxs)("div",{className:"header-right",children:[(0,xt.jsx)("span",{className:"user-info",children:t}),(0,xt.jsx)("button",{onClick:()=>{localStorage.removeItem("userRole"),localStorage.removeItem("userEmail"),e("/client/login")},className:"logout-button",children:"D\xe9connexion"})]})]}),(0,xt.jsxs)("main",{className:"dashboard-main",children:[(0,xt.jsxs)("div",{className:"welcome-section",children:[(0,xt.jsx)("h2",{children:"Bienvenue chez Scandale Bouffe !"}),(0,xt.jsx)("p",{children:"D\xe9couvrez notre menu du jour et passez vos commandes"})]}),(0,xt.jsx)("div",{className:"dashboard-grid client-grid",children:[{title:"Mon Profil",path:"/client/profile",icon:"\ud83d\udc64"},{title:"Menu du Jour",path:"/client/menu",icon:"\ud83c\udf7d\ufe0f"},{title:"Mon Panier",path:"/client/cart",icon:"\ud83d\uded2"},{title:"Mes Commandes",path:"/client/orders",icon:"\ud83d\udccb"}].map((t,n)=>(0,xt.jsxs)("div",{className:"dashboard-card",onClick:()=>e(t.path),children:[(0,xt.jsx)("div",{className:"card-icon",children:t.icon}),(0,xt.jsx)("h3",{children:t.title})]},n))}),(0,xt.jsxs)("div",{className:"featured-section",children:[(0,xt.jsx)("h3",{children:"\ud83c\udf7d\ufe0f Plat du Jour"}),(0,xt.jsx)("p",{children:"D\xe9couvrez nos sp\xe9cialit\xe9s fra\xeeches pr\xe9par\xe9es quotidiennement"}),(0,xt.jsx)("button",{className:"cta-button",onClick:()=>e("/client/menu"),children:"Voir le Menu"})]})]})]})},Tt=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)({name:"",description:"",color:"#8B4513"}),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[b,x]=(0,s.useState)("name");(0,s.useEffect)(()=>{const e=(0,St.sy)("categories",e=>{const t=w(e,b);n(t),h(!1)});return()=>e()},[b]);const w=(e,t)=>[...e].sort((e,n)=>{return"name"===t?e.name.localeCompare(n.name):"createdAt"===t?new Date(1e3*(null===(s=n.createdAt)||void 0===s?void 0:s.seconds))-new Date(1e3*(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)):0;var s,r}),_=e=>{u((0,a.A)((0,a.A)({},c),{},{[e.target.name]:e.target.value}))},S=()=>{u({name:"",description:"",color:"#8B4513"}),l(null),i(!1),m(""),g("")},k=t.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.description&&e.description.toLowerCase().includes(v.toLowerCase()));return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des Cat\xe9gories de Produits"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Nouvelle Cat\xe9gorie"})]}),f&&(0,xt.jsx)("div",{className:"error-message",children:f}),p&&(0,xt.jsx)("div",{className:"success-message",children:p}),r&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[o?"Modifier":"Ajouter"," une Cat\xe9gorie"]}),(0,xt.jsx)("button",{className:"close-button",onClick:S,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h(!0),m(""),g(""),c.name.trim()?c.name.length<2?(m("Le nom doit contenir au moins 2 caract\xe8res"),0):!(c.name.length>50)||(m("Le nom ne peut pas d\xe9passer 50 caract\xe8res"),0):(m("Le nom de la cat\xe9gorie est obligatoire"),0))try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return(await(0,St.Nr)("categories",[{field:"name",operator:"==",value:e.trim()}])).some(e=>e.id!==t)}catch(f){return console.error("Erreur v\xe9rification doublon:",f),!1}}(c.name,null===o||void 0===o?void 0:o.id);if(e)return m("Une cat\xe9gorie avec ce nom existe d\xe9j\xe0"),void h(!1);const t={name:c.name.trim(),description:c.description.trim(),color:c.color,isActive:!0};o?(await(0,St.lU)("categories",o.id,t),g("Cat\xe9gorie modifi\xe9e avec succ\xe8s!")):(await(0,St.createDocument)("categories",t),g("Cat\xe9gorie cr\xe9\xe9e avec succ\xe8s!")),S(),setTimeout(()=>g(""),3e3)}catch(f){console.error("Erreur sauvegarde:",f),m("Erreur lors de la sauvegarde: ".concat(f.message))}finally{h(!1)}else h(!1)},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"name",children:"Nom de la cat\xe9gorie *"}),(0,xt.jsx)("input",{type:"text",id:"name",name:"name",value:c.name,onChange:_,required:!0,placeholder:"Ex: Entr\xe9es, Plats principaux, Desserts"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"description",children:"Description"}),(0,xt.jsx)("textarea",{id:"description",name:"description",value:c.description,onChange:_,placeholder:"Description de la cat\xe9gorie",rows:"3"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"color",children:"Couleur d'affichage"}),(0,xt.jsx)("input",{type:"color",id:"color",name:"color",value:c.color,onChange:_})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:S,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:d||!c.name.trim(),className:"save-button",children:d?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("span",{className:"button-spinner"}),o?"Modification...":"Cr\xe9ation..."]}):o?"Modifier":"Cr\xe9er"})]})]})]})}),(0,xt.jsxs)("div",{className:"admin-controls",children:[(0,xt.jsxs)("div",{className:"search-bar",children:[(0,xt.jsx)("input",{type:"text",placeholder:"Rechercher une cat\xe9gorie...",value:v,onChange:e=>y(e.target.value),className:"search-input"}),(0,xt.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]}),(0,xt.jsxs)("div",{className:"sort-controls",children:[(0,xt.jsx)("label",{htmlFor:"sortBy",children:"Trier par:"}),(0,xt.jsxs)("select",{id:"sortBy",value:b,onChange:e=>x(e.target.value),className:"sort-select",children:[(0,xt.jsx)("option",{value:"name",children:"Nom (A-Z)"}),(0,xt.jsx)("option",{value:"createdAt",children:"Date de cr\xe9ation"})]})]}),(0,xt.jsx)("div",{className:"stats",children:(0,xt.jsxs)("span",{className:"category-count",children:[k.length," cat\xe9gorie(s) trouv\xe9e(s)"]})})]}),(0,xt.jsx)("main",{className:"admin-main",children:d&&0===t.length?(0,xt.jsxs)("div",{className:"loading",children:[(0,xt.jsx)("div",{className:"loading-spinner"}),(0,xt.jsx)("p",{children:"Chargement des cat\xe9gories..."})]}):(0,xt.jsxs)("div",{className:"categories-grid",children:[k.map(e=>{var t;return(0,xt.jsxs)("div",{className:"category-card",children:[(0,xt.jsx)("div",{className:"category-color",style:{backgroundColor:e.color||"#8B4513"}}),(0,xt.jsxs)("div",{className:"category-content",children:[(0,xt.jsx)("h3",{children:e.name}),e.description&&(0,xt.jsx)("p",{className:"category-description",children:e.description}),(0,xt.jsxs)("div",{className:"category-meta",children:[(0,xt.jsxs)("small",{children:["Cr\xe9\xe9 le: ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("fr-FR"):"Date inconnue"]}),e.updatedAt&&e.updatedAt.seconds!==(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)&&(0,xt.jsxs)("small",{children:["Modifi\xe9 le: ",new Date(1e3*e.updatedAt.seconds).toLocaleDateString("fr-FR")]})]})]}),(0,xt.jsxs)("div",{className:"category-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{l(e),u({name:e.name,description:e.description||"",color:e.color||"#8B4513"}),i(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async(e,t)=>{if(window.confirm('\xcates-vous s\xfbr de vouloir supprimer la cat\xe9gorie "'.concat(t,'" ?\n\nCette action est irr\xe9versible.')))try{h(!0),m("");const t=await(0,St.Nr)("products",[{field:"categoryId",operator:"==",value:e}]);if(t.length>0)return m("Impossible de supprimer cette cat\xe9gorie car ".concat(t.length," produit(s) l'utilisent encore.")),void h(!1);await(0,St.Nn)("categories",e),g("Cat\xe9gorie supprim\xe9e avec succ\xe8s!"),setTimeout(()=>g(""),3e3)}catch(f){console.error("Erreur suppression:",f),m("Erreur lors de la suppression: ".concat(f.message))}finally{h(!1)}})(e.id,e.name),disabled:d,children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)}),0===k.length&&t.length>0&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"\ud83d\udd0d Aucun r\xe9sultat"}),(0,xt.jsxs)("p",{children:['Aucune cat\xe9gorie ne correspond \xe0 votre recherche "',v,'"']}),(0,xt.jsx)("button",{className:"clear-search-button",onClick:()=>y(""),children:"Effacer la recherche"})]}),0===t.length&&!d&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"\ud83d\udcc1 Aucune cat\xe9gorie"}),(0,xt.jsx)("p",{children:"Commencez par cr\xe9er votre premi\xe8re cat\xe9gorie de produits"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Cr\xe9er une cat\xe9gorie"})]})]})})]})},It=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)({min:"",max:""}),[f,m]=(0,s.useState)("all"),[p,g]=(0,s.useState)({name:"",description:"",price:"",categoryId:"",image:"",ingredients:[],allergens:[],available:!0}),[v,y]=(0,s.useState)(!1),[b,x]=(0,s.useState)("");(0,s.useEffect)(()=>{w()},[]);const w=async()=>{try{y(!0);const[e,t]=await Promise.all([(0,St.gP)("products"),(0,St.gP)("categories")]);n(e),i(t)}catch(b){x("Erreur lors du chargement des donn\xe9es")}finally{y(!1)}},_=t.filter(e=>{if(d.min&&e.price<parseFloat(d.min))return!1;if(d.max&&e.price>parseFloat(d.max))return!1;if("all"!==f){const t="available"===f;if(e.available!==t)return!1}return!0}),S=()=>{h({min:"",max:""}),m("all")},k={total:t.length,filtered:_.length,hasFilters:d.min||d.max||"all"!==f},N=e=>{const t=r.find(t=>t.id===e);return t?t.name:"Cat\xe9gorie inconnue"},j=e=>{const t=r.find(t=>t.id===e);return t?t.color:"#8B4513"},E=e=>{const{name:t,value:n,type:s,checked:r}=e.target;g((0,a.A)((0,a.A)({},p),{},{[t]:"checkbox"===s?r:n}))},C=(e,t)=>{const n=t.split(",").map(e=>e.trim()).filter(e=>e);g((0,a.A)((0,a.A)({},p),{},{[e]:n}))},A=e=>new Intl.NumberFormat("fr-MG",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e),T=()=>{g({name:"",description:"",price:"",categoryId:"",image:"",ingredients:[],allergens:[],available:!0}),u(null),l(!1),x("")};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des Produits"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>{T(),l(!0)},children:"+ Nouveau Produit"})]}),b&&(0,xt.jsx)("div",{className:"error-message",children:b}),(0,xt.jsxs)("div",{className:"admin-controls",children:[(0,xt.jsxs)("div",{className:"filters-grid",children:[(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Prix (Ar)"}),(0,xt.jsxs)("div",{className:"price-range",children:[(0,xt.jsx)("input",{type:"number",placeholder:"Min",value:d.min,onChange:e=>h((0,a.A)((0,a.A)({},d),{},{min:e.target.value})),className:"price-input",step:"100",min:"0"}),(0,xt.jsx)("span",{className:"price-separator",children:"-"}),(0,xt.jsx)("input",{type:"number",placeholder:"Max",value:d.max,onChange:e=>h((0,a.A)((0,a.A)({},d),{},{max:e.target.value})),className:"price-input",step:"100",min:"0"})]})]}),(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Disponibilit\xe9"}),(0,xt.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"filter-select",children:[(0,xt.jsx)("option",{value:"all",children:"Tous les produits"}),(0,xt.jsx)("option",{value:"available",children:"Disponibles uniquement"}),(0,xt.jsx)("option",{value:"unavailable",children:"Indisponibles uniquement"})]})]})]}),(0,xt.jsx)("div",{className:"filter-stats",children:(0,xt.jsxs)("div",{className:"stats-info",children:[(0,xt.jsxs)("span",{className:"result-count",children:[_.length," sur ",t.length," produit(s)"]}),k.hasFilters&&(0,xt.jsx)("button",{onClick:S,className:"clear-filters-btn",children:"\ud83d\uddd1\ufe0f Effacer les filtres"})]})})]}),o&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal large",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[c?"Modifier":"Ajouter"," un Produit"]}),(0,xt.jsx)("button",{className:"close-button",onClick:T,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y(!0),x(""),p.name.trim()?p.categoryId?!p.price||parseFloat(p.price)<=0?(x("Le prix doit \xeatre sup\xe9rieur \xe0 0 Ar"),0):!(parseFloat(p.price)<100)||(x("Le prix minimum est de 100 Ar"),0):(x("Veuillez s\xe9lectionner une cat\xe9gorie"),0):(x("Le nom du produit est obligatoire"),0))try{const e=(0,a.A)((0,a.A)({},p),{},{name:p.name.trim(),description:p.description.trim(),price:parseFloat(p.price),currency:"MGA",priceDisplay:"".concat(A(parseFloat(p.price))," Ar")});p.image.trim()&&(e.image=p.image.trim()),c?await(0,St.lU)("products",c.id,e):await(0,St.createDocument)("products",e),await w(),T()}catch(b){x("Erreur lors de la sauvegarde: "+b.message)}finally{y(!1)}else y(!1)},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"name",children:"Nom du produit *"}),(0,xt.jsx)("input",{type:"text",id:"name",name:"name",value:p.name,onChange:E,required:!0,placeholder:"Ex: Romazava, Ravitoto, Vary amin'anana"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"categoryId",children:"Cat\xe9gorie *"}),(0,xt.jsxs)("select",{id:"categoryId",name:"categoryId",value:p.categoryId,onChange:E,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),r.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"price",children:"Prix (Ar) *"}),(0,xt.jsx)("input",{type:"number",id:"price",name:"price",value:p.price,onChange:E,required:!0,step:"100",min:"100",placeholder:"Ex: 25000"}),(0,xt.jsx)("small",{className:"form-help",children:"Prix en Ariary malgache (Ar) - Minimum 100 Ar"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"image",children:"Image du produit (optionnel)"}),(0,xt.jsx)("input",{type:"url",id:"image",name:"image",value:p.image,onChange:E,placeholder:"https://example.com/image.jpg"}),(0,xt.jsx)("small",{className:"form-help",children:"URL de l'image h\xe9berg\xe9e sur internet (ex: imgur, Google Photos, etc.)"}),p.image&&(0,xt.jsxs)("div",{className:"image-preview",children:[(0,xt.jsx)("div",{className:"preview-header",children:(0,xt.jsx)("span",{children:"Pr\xe9visualisation"})}),(0,xt.jsxs)("div",{className:"preview-image",children:[(0,xt.jsx)("img",{src:p.image,alt:"Pr\xe9visualisation",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,xt.jsx)("div",{style:{display:"none",color:"#c62828",padding:"20px",textAlign:"center"},children:"\u274c Impossible de charger l'image. V\xe9rifiez l'URL."})]})]})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"description",children:"Description"}),(0,xt.jsx)("textarea",{id:"description",name:"description",value:p.description,onChange:E,placeholder:"Description du produit",rows:"3"})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"ingredients",children:"Ingr\xe9dients (s\xe9par\xe9s par des virgules)"}),(0,xt.jsx)("input",{type:"text",id:"ingredients",value:p.ingredients.join(", "),onChange:e=>C("ingredients",e.target.value),placeholder:"Ex: Viande de b\u0153uf, Bredes mafana, Gingembre"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"allergens",children:"Allerg\xe8nes (s\xe9par\xe9s par des virgules)"}),(0,xt.jsx)("input",{type:"text",id:"allergens",value:p.allergens.join(", "),onChange:e=>C("allergens",e.target.value),placeholder:"Ex: Gluten, Lactose, Arachides"})]})]}),(0,xt.jsx)("div",{className:"form-group",children:(0,xt.jsxs)("label",{className:"checkbox-label",children:[(0,xt.jsx)("input",{type:"checkbox",name:"available",checked:p.available,onChange:E}),"Produit disponible"]})}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:T,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:v,className:"save-button",children:v?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsx)("main",{className:"admin-main",children:v&&0===t.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des produits..."}):(0,xt.jsxs)("div",{className:"products-grid",children:[_.map(e=>(0,xt.jsxs)("div",{className:"product-card",children:[(0,xt.jsxs)("div",{className:"product-header",children:[(0,xt.jsx)("div",{className:"product-category-badge",style:{backgroundColor:j(e.categoryId)},children:N(e.categoryId)}),(0,xt.jsx)("div",{className:"product-status ".concat(e.available?"available":"unavailable"),children:e.available?"Disponible":"Indisponible"})]}),e.image&&(0,xt.jsx)("div",{className:"product-image",children:(0,xt.jsx)("img",{src:e.image,alt:e.name})}),(0,xt.jsxs)("div",{className:"product-content",children:[(0,xt.jsx)("h3",{children:e.name}),(0,xt.jsxs)("div",{className:"product-price",children:[A(e.price)," Ar"]}),e.description&&(0,xt.jsx)("p",{className:"product-description",children:e.description}),e.ingredients&&e.ingredients.length>0&&(0,xt.jsxs)("div",{className:"product-ingredients",children:[(0,xt.jsx)("strong",{children:"Ingr\xe9dients:"})," ",e.ingredients.join(", ")]}),e.allergens&&e.allergens.length>0&&(0,xt.jsxs)("div",{className:"product-allergens",children:[(0,xt.jsx)("strong",{children:"Allerg\xe8nes:"})," ",e.allergens.join(", ")]})]}),(0,xt.jsxs)("div",{className:"product-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{u(e),g({name:e.name,description:e.description||"",price:e.price.toString(),categoryId:e.categoryId,image:e.image||"",ingredients:e.ingredients||[],allergens:e.allergens||[],available:!1!==e.available}),l(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit ?"))try{y(!0),await(0,St.Nn)("products",e),await w()}catch(b){x("Erreur lors de la suppression")}finally{y(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)),0===_.length&&!v&&(0,xt.jsx)("div",{className:"empty-state",children:k.hasFilters?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("h3",{children:"\ud83d\udd0d Aucun r\xe9sultat"}),(0,xt.jsx)("p",{children:"Aucun produit ne correspond \xe0 vos crit\xe8res de recherche"}),(0,xt.jsx)("button",{onClick:S,className:"clear-filters-btn large",children:"Effacer tous les filtres"})]}):(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("h3",{children:"\ud83c\udf7d\ufe0f Aucun produit"}),(0,xt.jsx)("p",{children:"Commencez par cr\xe9er votre premier produit"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>{T(),l(!0)},children:"+ Cr\xe9er un produit"})]})})]})})]})},Dt=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)((new Date).toISOString().split("T")[0]),[d,h]=(0,s.useState)({date:(new Date).toISOString().split("T")[0],items:[{name:"",quantity:1,unitPrice:"",total:0}],totalExpense:0,description:"",category:"Ingr\xe9dients"}),[f,m]=(0,s.useState)(!1),[p,g]=(0,s.useState)(""),v=(0,s.useCallback)(async()=>{try{m(!0);const e=await(0,St.gP)("expenses");n(e.filter(e=>e.date===c))}catch(p){g("Erreur lors du chargement des d\xe9penses")}finally{m(!1)}},[c]);(0,s.useEffect)(()=>{v()},[c,v]),(0,s.useEffect)(()=>{h(e=>(0,a.A)((0,a.A)({},e),{},{date:c}))},[c]);const y=e=>e.reduce((e,t)=>e+t.total,0),b=(e,t,n)=>{const s=[...d.items];var r,i;s[e][t]=n,"quantity"!==t&&"unitPrice"!==t||(s[e].total=(r=s[e].quantity,i=s[e].unitPrice,r*parseFloat(i||0)));const o=y(s);h((0,a.A)((0,a.A)({},d),{},{items:s,totalExpense:o}))},x=e=>{h((0,a.A)((0,a.A)({},d),{},{[e.target.name]:e.target.value}))},w=()=>{h({date:c,items:[{name:"",quantity:1,unitPrice:"",total:0}],totalExpense:0,description:"",category:"Ingr\xe9dients"}),l(null),i(!1)};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des D\xe9penses"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Nouvelle D\xe9pense"})]}),p&&(0,xt.jsx)("div",{className:"error-message",children:p}),(0,xt.jsxs)("div",{className:"filters",children:[(0,xt.jsxs)("div",{className:"date-filter",children:[(0,xt.jsx)("label",{children:"Date s\xe9lectionn\xe9e:"}),(0,xt.jsx)("input",{type:"date",value:c,onChange:e=>u(e.target.value),className:"date-input"})]}),(0,xt.jsx)("div",{className:"daily-total",children:(0,xt.jsxs)("strong",{children:["Total du jour: ",t.reduce((e,t)=>e+(t.totalExpense||0),0).toFixed(2)," Ar"]})})]}),r&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal large",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[o?"Modifier":"Ajouter"," une D\xe9pense"]}),(0,xt.jsx)("button",{className:"close-button",onClick:w,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0),g("");try{const e=(0,a.A)((0,a.A)({},d),{},{totalExpense:y(d.items)});o?await(0,St.lU)("expenses",o.id,e):await(0,St.createDocument)("expenses",e),await v(),w()}catch(p){g("Erreur lors de la sauvegarde")}finally{m(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,xt.jsx)("input",{type:"date",id:"date",name:"date",value:d.date,onChange:x,required:!0})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"category",children:"Cat\xe9gorie *"}),(0,xt.jsx)("select",{id:"category",name:"category",value:d.category,onChange:x,required:!0,children:["Ingr\xe9dients","\xc9quipement","Maintenance","\xc9lectricit\xe9","Eau","Gaz","Marketing","Autres"].map(e=>(0,xt.jsx)("option",{value:e,children:e},e))})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"description",children:"Description"}),(0,xt.jsx)("textarea",{id:"description",name:"description",value:d.description,onChange:x,placeholder:"Description de la d\xe9pense",rows:"2"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{children:"Articles achet\xe9s"}),(0,xt.jsxs)("div",{className:"items-list",children:[d.items.map((e,t)=>(0,xt.jsxs)("div",{className:"item-row",children:[(0,xt.jsx)("input",{type:"text",placeholder:"Nom de l'article",value:e.name,onChange:e=>b(t,"name",e.target.value),required:!0}),(0,xt.jsx)("input",{type:"number",placeholder:"Quantit\xe9",value:e.quantity,onChange:e=>b(t,"quantity",parseInt(e.target.value)||1),min:"1",required:!0}),(0,xt.jsx)("input",{type:"number",placeholder:"Prix unitaire",value:e.unitPrice,onChange:e=>b(t,"unitPrice",e.target.value),step:"0.01",min:"0",required:!0}),(0,xt.jsxs)("div",{className:"item-total",children:[e.total.toFixed(2)," Ar"]}),d.items.length>1&&(0,xt.jsx)("button",{type:"button",className:"remove-item-button",onClick:()=>(e=>{if(d.items.length>1){const t=d.items.filter((t,n)=>n!==e),n=y(t);h((0,a.A)((0,a.A)({},d),{},{items:t,totalExpense:n}))}})(t),children:"\ud83d\uddd1\ufe0f"})]},t)),(0,xt.jsx)("button",{type:"button",className:"add-item-button",onClick:()=>{h((0,a.A)((0,a.A)({},d),{},{items:[...d.items,{name:"",quantity:1,unitPrice:"",total:0}]}))},children:"+ Ajouter un article"})]})]}),(0,xt.jsx)("div",{className:"total-expense",children:(0,xt.jsxs)("strong",{children:["Total de la d\xe9pense: ",d.totalExpense.toFixed(2)," Ar"]})}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:w,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:f,className:"save-button",children:f?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsx)("main",{className:"admin-main",children:f&&0===t.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des d\xe9penses..."}):(0,xt.jsxs)("div",{className:"expenses-list",children:[t.map(e=>{var t,n,s;return(0,xt.jsxs)("div",{className:"expense-card",children:[(0,xt.jsxs)("div",{className:"expense-header",children:[(0,xt.jsx)("div",{className:"expense-category",children:e.category}),(0,xt.jsxs)("div",{className:"expense-total",children:[null===(t=e.totalExpense)||void 0===t?void 0:t.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"expense-content",children:[(0,xt.jsx)("div",{className:"expense-date",children:new Date(e.date).toLocaleDateString("fr-FR")}),e.description&&(0,xt.jsx)("p",{className:"expense-description",children:e.description}),(0,xt.jsxs)("div",{className:"expense-items",children:[(0,xt.jsx)("h4",{children:"Articles:"}),null===(n=e.items)||void 0===n?void 0:n.map((e,t)=>{var n;return(0,xt.jsxs)("div",{className:"expense-item",children:[(0,xt.jsx)("span",{className:"item-name",children:e.name}),(0,xt.jsxs)("span",{className:"item-details",children:[e.quantity," x ",e.unitPrice,"Ar = ",null===(n=e.total)||void 0===n?void 0:n.toFixed(2),"Ar"]})]},t)})]}),(0,xt.jsx)("div",{className:"expense-meta",children:(0,xt.jsxs)("small",{children:["Cr\xe9\xe9 le: ",new Date(1e3*(null===(s=e.createdAt)||void 0===s?void 0:s.seconds)).toLocaleString("fr-FR")]})})]}),(0,xt.jsxs)("div",{className:"expense-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{l(e),h({date:e.date,items:e.items||[{name:"",quantity:1,unitPrice:"",total:0}],totalExpense:e.totalExpense||0,description:e.description||"",category:e.category||"Ingr\xe9dients"}),i(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette d\xe9pense ?"))try{m(!0),await(0,St.Nn)("expenses",e),await v()}catch(p){g("Erreur lors de la suppression")}finally{m(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)}),0===t.length&&!f&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune d\xe9pense trouv\xe9e"}),(0,xt.jsxs)("p",{children:["Aucune d\xe9pense enregistr\xe9e pour le ",new Date(c).toLocaleDateString("fr-FR")]}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Ajouter une d\xe9pense"})]})]})})]})},Pt=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(null),[f,m]=(0,s.useState)((new Date).toISOString().split("T")[0]),[p,g]=(0,s.useState)("all"),[v,y]=(0,s.useState)({productId:"",date:f,initialStock:0,addedStock:0,currentStock:0,soldQuantity:0,notes:""}),[b,x]=(0,s.useState)(!1),[w,_]=(0,s.useState)(""),[S,k]=(0,s.useState)(null),N=(0,s.useCallback)(async(e,t)=>{try{const n=(await(0,St.gP)("orders")).filter(e=>"delivered"===e.status),s={};n.forEach(e=>{e.items.forEach(e=>{const n=t.find(t=>t.name===e.name||t.name.toLowerCase().trim()===e.name.toLowerCase().trim());n&&(s[n.id]||(s[n.id]=0),s[n.id]+=Number(e.quantity)||0)})});const r=e.map(async e=>{const t=s[e.productId]||0;if(e.soldQuantity!==t){const n=A(e.initialStock,e.addedStock,t);await(0,St.lU)("stock",e.id,{soldQuantity:t,currentStock:n,updatedAt:new Date}),e.soldQuantity=t,e.currentStock=n}});await Promise.all(r)}catch(w){console.error("Erreur lors de la synchronisation des quantit\xe9s vendues:",w)}},[]),j=(0,s.useCallback)(async()=>{try{x(!0);const[e,t,s]=await Promise.all([(0,St.gP)("stock"),(0,St.gP)("products"),(0,St.gP)("categories")]);await N(e,t),n(e),i(t),l(s)}catch(w){_("Erreur lors du chargement des donn\xe9es")}finally{x(!1)}},[N]),E=e=>r.find(t=>t.id===e);(0,s.useEffect)(()=>{j()},[f,j]),(0,s.useEffect)(()=>{const e=async()=>{try{const[e,t]=await Promise.all([(0,St.gP)("stock"),(0,St.gP)("products")]);await N(e,t),n(e),k(new Date)}catch(w){console.log("Synchronisation silencieuse \xe9chou\xe9e:",w)}},t=setInterval(e,5e3),s=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",s),()=>{clearInterval(t),document.removeEventListener("visibilitychange",s)}},[N]),(0,s.useEffect)(()=>{y(e=>(0,a.A)((0,a.A)({},e),{},{date:f}))},[f]);const C=t.filter(e=>e.date===f).filter(e=>{if("all"===p)return!0;const t=E(e.productId);return(null===t||void 0===t?void 0:t.categoryId)===p}),A=(e,t,n)=>(parseInt(e)||0)+(parseInt(t)||0)-(parseInt(n)||0),T=e=>{const{name:t,value:n}=e.target,s=(0,a.A)((0,a.A)({},v),{},{[t]:n});"initialStock"!==t&&"addedStock"!==t||(s.currentStock=A(s.initialStock,s.addedStock,s.soldQuantity)),y(s)},I=async(e,n)=>{const s=t.find(t=>t.id===e);if(s)try{const t=(s.addedStock||0)+n,r=A(s.initialStock,t,s.soldQuantity);await(0,St.lU)("stock",e,{addedStock:t,currentStock:r}),await j()}catch(w){_("Erreur lors de l'ajout du stock")}},D=()=>{y({productId:"",date:f,initialStock:0,addedStock:0,currentStock:0,soldQuantity:0,notes:""}),h(null),u(!1)};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsxs)("div",{className:"header-title-section",children:[(0,xt.jsx)("h1",{children:"Gestion des Stocks"}),S&&(0,xt.jsxs)("div",{className:"sync-indicator",children:[(0,xt.jsx)("span",{className:"sync-dot",children:"\ud83d\udfe2"}),(0,xt.jsxs)("small",{children:["Derni\xe8re sync: ",S.toLocaleTimeString("fr-FR")]})]})]}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Nouveau Stock"})]}),w&&(0,xt.jsx)("div",{className:"error-message",children:w}),(0,xt.jsxs)("div",{className:"filters",children:[(0,xt.jsxs)("div",{className:"date-filter",children:[(0,xt.jsx)("label",{children:"Date s\xe9lectionn\xe9e:"}),(0,xt.jsx)("input",{type:"date",value:f,onChange:e=>m(e.target.value),className:"date-input"})]}),(0,xt.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"category-filter",children:[(0,xt.jsx)("option",{value:"all",children:"Toutes les cat\xe9gories"}),o.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),c&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[d?"Modifier":"Ajouter"," un Stock"]}),(0,xt.jsx)("button",{className:"close-button",onClick:D,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),_("");try{const e=(0,a.A)((0,a.A)({},v),{},{initialStock:parseInt(v.initialStock)||0,addedStock:parseInt(v.addedStock)||0,currentStock:A(v.initialStock,v.addedStock,v.soldQuantity)});if(d)await(0,St.lU)("stock",d.id,e);else{if(t.find(e=>e.productId===v.productId&&e.date===v.date))return _("Le stock pour ce produit existe d\xe9j\xe0 pour cette date"),void x(!1);await(0,St.createDocument)("stock",e)}await j(),D()}catch(w){_("Erreur lors de la sauvegarde")}finally{x(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"productId",children:"Produit *"}),(0,xt.jsxs)("select",{id:"productId",name:"productId",value:v.productId,onChange:T,required:!0,disabled:d,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un produit"}),(d?r:r.filter(e=>!t.find(t=>t.productId===e.id&&t.date===f))).map(e=>(0,xt.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,xt.jsx)("input",{type:"date",id:"date",name:"date",value:v.date,onChange:T,required:!0,disabled:d})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"initialStock",children:"Stock initial"}),(0,xt.jsx)("input",{type:"number",id:"initialStock",name:"initialStock",value:v.initialStock,onChange:T,min:"0",placeholder:"0"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"addedStock",children:"Stock ajout\xe9"}),(0,xt.jsx)("input",{type:"number",id:"addedStock",name:"addedStock",value:v.addedStock,onChange:T,min:"0",placeholder:"0"})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"soldQuantity",children:"Quantit\xe9 vendue (auto)"}),(0,xt.jsxs)("div",{className:"calculated-stock sold-readonly",children:[v.soldQuantity," (mis \xe0 jour automatiquement)"]}),(0,xt.jsx)("small",{className:"field-note",children:"Cette valeur est calcul\xe9e automatiquement depuis les commandes livr\xe9es"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{children:"Stock actuel (calcul\xe9)"}),(0,xt.jsx)("div",{className:"calculated-stock",children:v.currentStock})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,xt.jsx)("textarea",{id:"notes",name:"notes",value:v.notes,onChange:T,placeholder:"Notes ou commentaires",rows:"3"})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:D,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:b,className:"save-button",children:b?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsx)("main",{className:"admin-main",children:b&&0===t.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des stocks..."}):(0,xt.jsxs)("div",{className:"stock-grid",children:[C.map(e=>{const t=E(e.productId),n=t?(s=t.categoryId,o.find(e=>e.id===s)):null;var s;return(0,xt.jsxs)("div",{className:"stock-card",children:[(0,xt.jsxs)("div",{className:"stock-header",children:[(0,xt.jsx)("div",{className:"stock-category-badge",style:{backgroundColor:(null===n||void 0===n?void 0:n.color)||"#8B4513"},children:(null===n||void 0===n?void 0:n.name)||"Cat\xe9gorie inconnue"}),(0,xt.jsx)("div",{className:"stock-status ".concat(e.currentStock>0?"in-stock":"out-of-stock"),children:e.currentStock>0?"En stock":"\xc9puis\xe9"})]}),(0,xt.jsxs)("div",{className:"stock-content",children:[(0,xt.jsx)("h3",{children:(null===t||void 0===t?void 0:t.name)||"Produit inconnu"}),(0,xt.jsxs)("div",{className:"stock-details",children:[(0,xt.jsxs)("div",{className:"stock-row",children:[(0,xt.jsx)("span",{children:"Stock initial:"}),(0,xt.jsx)("span",{children:e.initialStock||0})]}),(0,xt.jsxs)("div",{className:"stock-row",children:[(0,xt.jsx)("span",{children:"Stock ajout\xe9:"}),(0,xt.jsxs)("span",{className:"added",children:["+",e.addedStock||0]})]}),(0,xt.jsxs)("div",{className:"stock-row",children:[(0,xt.jsx)("span",{children:"Quantit\xe9 vendue:"}),(0,xt.jsxs)("span",{className:"sold",children:["-",e.soldQuantity||0]})]}),(0,xt.jsxs)("div",{className:"stock-row total",children:[(0,xt.jsx)("span",{children:"Stock actuel:"}),(0,xt.jsx)("span",{className:"current",children:e.currentStock||0})]})]}),e.notes&&(0,xt.jsxs)("div",{className:"stock-notes",children:[(0,xt.jsx)("strong",{children:"Notes:"})," ",e.notes]}),(0,xt.jsxs)("div",{className:"quick-actions",children:[(0,xt.jsx)("button",{className:"quick-add-button",onClick:()=>I(e.id,5),title:"Ajouter 5 au stock",children:"+5"}),(0,xt.jsx)("button",{className:"quick-add-button",onClick:()=>I(e.id,10),title:"Ajouter 10 au stock",children:"+10"})]})]}),(0,xt.jsxs)("div",{className:"stock-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{h(e),y({productId:e.productId,date:e.date,initialStock:e.initialStock||0,addedStock:e.addedStock||0,currentStock:e.currentStock||0,soldQuantity:e.soldQuantity||0,notes:e.notes||""}),u(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce stock ?"))try{x(!0),await(0,St.Nn)("stock",e),await j()}catch(w){_("Erreur lors de la suppression")}finally{x(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)}),0===C.length&&!b&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucun stock trouv\xe9"}),(0,xt.jsxs)("p",{children:["Aucun stock enregistr\xe9 pour le ",new Date(f).toLocaleDateString("fr-FR"),"all"!==p&&" dans cette cat\xe9gorie"]}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Ajouter un stock"})]})]})})]})};var Rt=n(705);function Mt(e){return e+.5|0}const Ot=(e,t,n)=>Math.max(Math.min(e,n),t);function Lt(e){return Ot(Mt(2.55*e),0,255)}function Ft(e){return Ot(Mt(255*e),0,255)}function Vt(e){return Ot(Mt(e/2.55)/100,0,1)}function zt(e){return Ot(Mt(100*e),0,100)}const Ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bt=[..."0123456789ABCDEF"],qt=e=>Bt[15&e],Ht=e=>Bt[(240&e)>>4]+Bt[15&e],Wt=e=>(240&e)>>4===(15&e);function Kt(e){var t=(e=>Wt(e.r)&&Wt(e.g)&&Wt(e.b)&&Wt(e.a))(e)?qt:Ht;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Gt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qt(e,t,n){const s=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-s*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Yt(e,t,n){const s=function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(s+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[s(5),s(3),s(1)]}function Xt(e,t,n){const s=Qt(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function $t(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),i=Math.min(t,n,s),a=(r+i)/2;let o,l,c;return r!==i&&(c=r-i,l=a>.5?c/(2-r-i):c/(r+i),o=function(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}(t,n,s,c,r),o=60*o+.5),[0|o,l||0,a]}function Jt(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Ft)}function Zt(e,t,n){return Jt(Qt,e,t,n)}function en(e){return(e%360+360)%360}function tn(e){const t=Gt.exec(e);let n,s=255;if(!t)return;t[5]!==n&&(s=t[6]?Lt(+t[5]):Ft(+t[5]));const r=en(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Jt(Xt,e,t,n)}(r,i,a):"hsv"===t[1]?function(e,t,n){return Jt(Yt,e,t,n)}(r,i,a):Zt(r,i,a),{r:n[0],g:n[1],b:n[2],a:s}}const nn={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let rn;function an(e){rn||(rn=function(){const e={},t=Object.keys(sn),n=Object.keys(nn);let s,r,i,a,o;for(s=0;s<t.length;s++){for(a=o=t[s],r=0;r<n.length;r++)i=n[r],o=o.replace(i,nn[i]);i=parseInt(sn[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),rn.transparent=[0,0,0,0]);const t=rn[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const on=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ln=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,cn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function un(e,t,n){if(e){let s=$t(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,0===t?360:1)),s=Zt(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function dn(e,t){return e?Object.assign(t||{},e):e}function hn(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ft(e[3]))):(t=dn(e,{r:0,g:0,b:0,a:1})).a=Ft(t.a),t}function fn(e){return"r"===e.charAt(0)?function(e){const t=on.exec(e);let n,s,r,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?Lt(e):Ot(255*e,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?Lt(n):Ot(n,0,255)),s=255&(t[4]?Lt(s):Ot(s,0,255)),r=255&(t[6]?Lt(r):Ot(r,0,255)),{r:n,g:s,b:r,a:i}}}(e):tn(e)}class mn{constructor(e){if(e instanceof mn)return e;const t=typeof e;let n;"object"===t?n=hn(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ut[e[1]],g:255&17*Ut[e[2]],b:255&17*Ut[e[3]],a:5===n?17*Ut[e[4]]:255}:7!==n&&9!==n||(t={r:Ut[e[1]]<<4|Ut[e[2]],g:Ut[e[3]]<<4|Ut[e[4]],b:Ut[e[5]]<<4|Ut[e[6]],a:9===n?Ut[e[7]]<<4|Ut[e[8]]:255})),t}(e)||an(e)||fn(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=dn(this._rgb);return e&&(e.a=Vt(e.a)),e}set rgb(e){this._rgb=hn(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Vt(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Kt(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=$t(e),n=t[0],s=zt(t[1]),r=zt(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(s,"%, ").concat(r,"%, ").concat(Vt(e.a),")"):"hsl(".concat(n,", ").concat(s,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,s=e.rgb;let r;const i=t===r?.5:t,a=2*i-1,o=n.a-s.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*s.r+.5,n.g=255&l*n.g+r*s.g+.5,n.b=255&l*n.b+r*s.b+.5,n.a=i*n.a+(1-i)*s.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const s=cn(Vt(e.r)),r=cn(Vt(e.g)),i=cn(Vt(e.b));return{r:Ft(ln(s+n*(cn(Vt(t.r))-s))),g:Ft(ln(r+n*(cn(Vt(t.g))-r))),b:Ft(ln(i+n*(cn(Vt(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new mn(this.rgb)}alpha(e){return this._rgb.a=Ft(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Mt(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return un(this._rgb,2,e),this}darken(e){return un(this._rgb,2,-e),this}saturate(e){return un(this._rgb,1,e),this}desaturate(e){return un(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=$t(e);n[0]=en(n[0]+t),n=Zt(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function pn(){}const gn=(()=>{let e=0;return()=>e++})();function vn(e){return null===e||void 0===e}function yn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function bn(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function xn(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function wn(e,t){return xn(e)?e:t}function _n(e,t){return"undefined"===typeof e?t:e}const Sn=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function kn(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Nn(e,t,n,s){let r,i,a;if(yn(e))if(i=e.length,s)for(r=i-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<i;r++)t.call(n,e[r],r);else if(bn(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function jn(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function En(e){if(yn(e))return e.map(En);if(bn(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=En(e[n[r]]);return t}return e}function Cn(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function An(e,t,n,s){if(!Cn(e))return;const r=t[e],i=n[e];bn(r)&&bn(i)?Tn(r,i,s):t[e]=En(i)}function Tn(e,t,n){const s=yn(t)?t:[t],r=s.length;if(!bn(e))return e;const i=(n=n||{}).merger||An;let a;for(let o=0;o<r;++o){if(a=s[o],!bn(a))continue;const t=Object.keys(a);for(let s=0,r=t.length;s<r;++s)i(t[s],e,a,n)}return e}function In(e,t){return Tn(e,t,{merger:Dn})}function Dn(e,t,n){if(!Cn(e))return;const s=t[e],r=n[e];bn(s)&&bn(r)?In(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=En(r))}const Pn={"":e=>e,x:e=>e.x,y:e=>e.y};function Rn(e,t){const n=Pn[t]||(Pn[t]=function(e){const t=function(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Mn(e){return e.charAt(0).toUpperCase()+e.slice(1)}const On=e=>"undefined"!==typeof e,Ln=e=>"function"===typeof e,Fn=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Vn=Math.PI,zn=2*Vn,Un=zn+Vn,Bn=Number.POSITIVE_INFINITY,qn=Vn/180,Hn=Vn/2,Wn=Vn/4,Kn=2*Vn/3,Gn=Math.log10,Qn=Math.sign;function Yn(e,t,n){return Math.abs(e-t)<n}function Xn(e){const t=Math.round(e);e=Yn(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Gn(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function $n(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Jn(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Zn(e){return e*(Vn/180)}function es(e){return e*(180/Vn)}function ts(e){if(!xn(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function ns(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Vn&&(i+=zn),{angle:i,distance:r}}function ss(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rs(e,t){return(e-t+Un)%zn-Vn}function is(e){return(e%zn+zn)%zn}function as(e,t,n,s){const r=is(e),i=is(t),a=is(n),o=is(i-r),l=is(a-r),c=is(r-i),u=is(r-a);return r===i||r===a||s&&i===a||o>l&&c<u}function os(e,t,n){return Math.max(t,Math.min(n,e))}function ls(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function cs(e,t,n){n=n||(n=>e[n]<t);let s,r=e.length-1,i=0;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const us=(e,t,n,s)=>cs(e,n,s?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),ds=(e,t,n)=>cs(e,n,s=>e[s][t]>=n);const hs=["push","pop","shift","splice","unshift"];function fs(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);-1!==r&&s.splice(r,1),s.length>0||(hs.forEach(t=>{delete e[t]}),delete e._chartjs)}function ms(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ps="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function gs(e,t){let n=[],s=!1;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n=i,s||(s=!0,ps.call(window,()=>{s=!1,e.apply(t,n)}))}}const vs=e=>"start"===e?"left":"end"===e?"right":"center",ys=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function bs(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:m}=a.getUserBounds();if(f){if(r=Math.min(us(l,u,d).lo,n?s:us(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!vn(e[o.axis]));r-=Math.max(0,e)}r=os(r,0,s-1)}if(m){let e=Math.max(us(l,a.axis,h,!0).hi+1,n?0:us(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!vn(e[o.axis]));e+=Math.max(0,t)}i=os(e,r,s)-r}else i=s-r}return{start:r,count:i}}function xs(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const ws=e=>0===e||1===e,_s=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*zn/n),Ss=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*zn/n)+1,ks={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Hn),easeOutSine:e=>Math.sin(e*Hn),easeInOutSine:e=>-.5*(Math.cos(Vn*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ws(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ws(e)?e:_s(e,.075,.3),easeOutElastic:e=>ws(e)?e:Ss(e,.075,.3),easeInOutElastic(e){const t=.1125;return ws(e)?e:e<.5?.5*_s(2*e,t,.45):.5+.5*Ss(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ks.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*ks.easeInBounce(2*e):.5*ks.easeOutBounce(2*e-1)+.5};function Ns(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function js(e){return Ns(e)?e:new mn(e)}function Es(e){return Ns(e)?e:new mn(e).saturate(.5).darken(.1).hexString()}const Cs=["x","y","borderWidth","radius","tension"],As=["color","borderColor","backgroundColor"];const Ts=new Map;function Is(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Ts.get(n);return s||(s=new Intl.NumberFormat(e,t),Ts.set(n,s)),s}(t,n).format(e)}const Ds={values:e=>yn(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Gn(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Is(e,s,l)},logarithmic(e,t,n){if(0===e)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Gn(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?Ds.numeric.call(this,e,t,n):""}};var Ps={formatters:Ds};const Rs=Object.create(null),Ms=Object.create(null);function Os(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const t=n[s];e=e[t]||(e[t]=Object.create(null))}return e}function Ls(e,t,n){return"string"===typeof t?Tn(Os(e,t),n):Tn(Os(e,""),t)}class Fs{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Es(t.backgroundColor),this.hoverBorderColor=(e,t)=>Es(t.borderColor),this.hoverColor=(e,t)=>Es(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ls(this,e,t)}get(e){return Os(this,e)}describe(e,t){return Ls(Ms,e,t)}override(e,t){return Ls(Rs,e,t)}route(e,t,n,s){const r=Os(this,e),i=Os(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[s];return bn(e)?Object.assign({},t,e):_n(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Vs=new Fs({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:As},numbers:{type:"number",properties:Cs}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ps.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function zs(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Us(e,t,n,s){let r=(s=s||{}).data=s.data||{},i=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(r=s.data={},i=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||yn(d)){if(yn(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||yn(h)||(a=zs(e,r,i,a,h))}else a=zs(e,r,i,a,d);e.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[i[l]];i.splice(0,f)}return a}function Bs(e,t,n){const s=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function qs(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Hs(e,t,n,s){Ws(e,t,n,s,null)}function Ws(e,t,n,s,r){let i,a,o,l,c,u,d,h;const f=t.pointStyle,m=t.rotation,p=t.radius;let g=(m||0)*qn;if(f&&"object"===typeof f&&(i=f.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,s),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,s,r/2,p,0,0,zn):e.arc(n,s,p,0,zn),e.closePath();break;case"triangle":u=r?r/2:p,e.moveTo(n+Math.sin(g)*u,s-Math.cos(g)*p),g+=Kn,e.lineTo(n+Math.sin(g)*u,s-Math.cos(g)*p),g+=Kn,e.lineTo(n+Math.sin(g)*u,s-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(g+Wn)*l,d=Math.cos(g+Wn)*(r?r/2-c:l),o=Math.sin(g+Wn)*l,h=Math.sin(g+Wn)*(r?r/2-c:l),e.arc(n-d,s-o,c,g-Vn,g-Hn),e.arc(n+h,s-a,c,g-Hn,g),e.arc(n+d,s+o,c,g,g+Hn),e.arc(n-h,s+a,c,g+Hn,g+Vn),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*p,u=r?r/2:l,e.rect(n-u,s-l,2*u,2*l);break}g+=Wn;case"rectRot":d=Math.cos(g)*(r?r/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-d,s-o),e.lineTo(n+h,s-a),e.lineTo(n+d,s+o),e.lineTo(n-h,s+a),e.closePath();break;case"crossRot":g+=Wn;case"cross":d=Math.cos(g)*(r?r/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a);break;case"star":d=Math.cos(g)*(r?r/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a),g+=Wn,d=Math.cos(g)*(r?r/2:p),a=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-d,s-o),e.lineTo(n+d,s+o),e.moveTo(n+h,s-a),e.lineTo(n-h,s+a);break;case"line":a=r?r/2:Math.cos(g)*p,o=Math.sin(g)*p,e.moveTo(n-a,s-o),e.lineTo(n+a,s+o);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(g)*(r?r/2:p),s+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Ks(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Gs(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qs(e){e.restore()}function Ys(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else"after"===r!==!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Xs(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function $s(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Js(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Zs(e,t,n,s,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=yn(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vn(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&Js(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),vn(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,s,i.maxWidth)),e.fillText(c,n,s,i.maxWidth),$s(e,n,s,c,i),s+=Number(r.lineHeight);e.restore()}function er(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*Vn,Vn,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,Vn,Hn,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,Hn,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-Hn,!0),e.lineTo(n+a.topLeft,s)}const tr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sr(e,t){const n=(""+e).match(tr);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const rr=e=>+e||0;function ir(e,t){const n={},s=bn(t),r=s?Object.keys(t):t,i=bn(e)?s?n=>_n(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=rr(i(a));return n}function ar(e){return ir(e,{top:"y",right:"x",bottom:"y",left:"x"})}function or(e){return ir(e,["topLeft","topRight","bottomLeft","bottomRight"])}function lr(e){const t=ar(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function cr(e,t){e=e||{},t=t||Vs.font;let n=_n(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let s=_n(e.style,t.style);s&&!(""+s).match(nr)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:_n(e.family,t.family),lineHeight:sr(_n(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:_n(e.weight,t.weight),string:""};return r.string=function(e){return!e||vn(e.size)||vn(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function ur(e,t,n,s){let r,i,a,o=!0;for(r=0,i=e.length;r<i;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&yn(a)&&(a=a[n%a.length],o=!1),void 0!==a))return s&&!o&&(s.cacheable=!1),a}function dr(e,t){return Object.assign(Object.create(e),t)}function hr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Sr("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:s=>hr([s,...e],t,r,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,s)=>vr(n,s,()=>function(e,t,n,s){let r;for(const i of t)if(r=Sr(pr(i,e),n),"undefined"!==typeof r)return gr(e,r)?wr(n,s,e,r):r}(s,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>kr(e).includes(t),ownKeys:e=>kr(e),set(e,t,n){const r=e._storage||(e._storage=s());return e[t]=r[t]=n,delete e._keys,!0}})}function fr(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:mr(e,s),setContext:t=>fr(e,t,n,s),override:r=>fr(e.override(r),t,n,s)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>vr(e,t,()=>function(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let o=s[t];Ln(o)&&a.isScriptable(t)&&(o=function(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||s);o.delete(e),gr(e,l)&&(l=wr(r._scopes,r,e,l));return l}(t,o,e,n));yn(o)&&o.length&&(o=function(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&s(e))return t[i.index%t.length];if(bn(t[0])){const n=t,s=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=wr(s,r,e,l);t.push(fr(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));gr(t,o)&&(o=fr(o,r,i&&i[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,s)=>(e[n]=s,delete t[n],!0)})}function mr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Ln(n)?n:()=>n,isIndexable:Ln(s)?s:()=>s}}const pr=(e,t)=>e?e+Mn(t):t,gr=(e,t)=>bn(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vr(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const s=n();return e[t]=s,s}function yr(e,t,n){return Ln(e)?e(t,n):e}const br=(e,t)=>!0===e?t:"string"===typeof e?Rn(t,e):void 0;function xr(e,t,n,s,r){for(const i of t){const t=br(n,i);if(t){e.add(t);const i=yr(t._fallback,n,r);if("undefined"!==typeof i&&i!==n&&i!==s)return i}else if(!1===t&&"undefined"!==typeof s&&n!==s)return null}return!1}function wr(e,t,n,s){const r=t._rootScopes,i=yr(t._fallback,n,s),a=[...e,...r],o=new Set;o.add(s);let l=_r(o,a,n,i||n,s);return null!==l&&(("undefined"===typeof i||i===n||(l=_r(o,a,i,l,s),null!==l))&&hr(Array.from(o),[""],r,i,()=>function(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];if(yn(r)&&bn(n))return n;return r||{}}(t,n,s)))}function _r(e,t,n,s,r){for(;n;)n=xr(e,t,n,s,r);return n}function Sr(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function kr(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Nr(e,t,n,s){const{iScale:r}=e,{key:i="r"}=this._parsing,a=new Array(s);let o,l,c,u;for(o=0,l=s;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(Rn(u,i),c)};return a}const jr=Number.EPSILON||1e-14,Er=(e,t)=>t<e.length&&!e[t].skip&&e[t],Cr=e=>"x"===e?"y":"x";function Ar(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,o=ss(i,r),l=ss(a,i);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=s*c,h=s*u;return{previous:{x:i.x-d*(a.x-r.x),y:i.y-d*(a.y-r.y)},next:{x:i.x+h*(a.x-r.x),y:i.y+h*(a.y-r.y)}}}function Tr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Cr(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,o,l,c=Er(e,0);for(a=0;a<s;++a)if(o=l,l=c,c=Er(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Qn(r[a-1])!==Qn(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const s=e.length;let r,i,a,o,l,c=Er(e,0);for(let u=0;u<s-1;++u)l=c,c=Er(e,u+1),l&&c&&(Yn(t[u],0,jr)?n[u]=n[u+1]=0:(r=n[u]/t[u],i=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=i*a*t[u])))}(e,r,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const s=Cr(n),r=e.length;let i,a,o,l=Er(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=Er(e,c+1),!o)continue;const r=o[n],u=o[s];a&&(i=(r-a[n])/3,o["cp1".concat(n)]=r-i,o["cp1".concat(s)]=u-i*t[c]),l&&(i=(l[n]-r)/3,o["cp2".concat(n)]=r+i,o["cp2".concat(s)]=u+i*t[c])}}(e,i,t)}function Ir(e,t,n){return Math.max(Math.min(e,n),t)}function Dr(e,t,n,s,r){let i,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Tr(e,r);else{let n=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=Ar(n,o,e[Math.min(i+1,a-(s?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,s,r,i,a,o=Ks(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=o,o=n<s-1&&Ks(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=Ir(r.cp1x,t.left,t.right),r.cp1y=Ir(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=Ir(r.cp2x,t.left,t.right),r.cp2y=Ir(r.cp2y,t.top,t.bottom)))}(e,n)}function Pr(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Rr(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Mr(e,t,n){let s;return"string"===typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[n])):s=e,s}const Or=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Lr=["top","right","bottom","left"];function Fr(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=Lr[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function Vr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=Or(n),i="border-box"===r.boxSizing,a=Fr(r,"padding"),o=Fr(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,i,e.target))a=r,o=i;else{const e=t.getBoundingClientRect();a=s.clientX-e.left,o=s.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:m}=t;return i&&(f-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/f*n.width/s),y:Math.round((c-h)/m*n.height/s)}}const zr=e=>Math.round(10*e)/10;function Ur(e,t,n,s){const r=Or(e),i=Fr(r,"margin"),a=Mr(r.maxWidth,e,"clientWidth")||Bn,o=Mr(r.maxHeight,e,"clientHeight")||Bn,l=function(e,t,n){let s,r;if(void 0===t||void 0===n){const i=e&&Rr(e);if(i){const e=i.getBoundingClientRect(),a=Or(i),o=Fr(a,"border","width"),l=Fr(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,s=Mr(a.maxWidth,i,"clientWidth"),r=Mr(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:s||Bn,maxHeight:r||Bn}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Fr(r,"border","width"),t=Fr(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=zr(Math.min(c,a,l.maxWidth)),u=zr(Math.min(u,o,l.maxHeight)),c&&!u&&(u=zr(c/2));return(void 0!==t||void 0!==n)&&s&&l.height&&u>l.height&&(u=l.height,c=zr(Math.floor(u*s))),{width:c,height:u}}function Br(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i)&&(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0)}const qr=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Pr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(gc){}return e}();function Hr(e,t){const n=function(e,t){return Or(e).getPropertyValue(t)}(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Wr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Kr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:"middle"===s?n<.5?e.y:t.y:"after"===s?n<1?e.y:t.y:n>0?t.y:e.y}}function Gr(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Wr(e,r,n),o=Wr(r,i,n),l=Wr(i,t,n),c=Wr(a,o,n),u=Wr(o,l,n);return Wr(c,u,n)}function Qr(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Yr(e,t){let n,s;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Xr(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function $r(e){return"angle"===e?{between:as,compare:rs,normalize:is}:{between:ls,compare:(e,t)=>e-t,normalize:e=>e}}function Jr(e){let{start:t,end:n,count:s,loop:r,style:i}=e;return{start:t%s,end:n%s,loop:r&&(n-t+1)%s===0,style:i}}function Zr(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=$r(s),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:o}=$r(s),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][s]),r,i);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),m=[];let p,g,v,y=!1,b=null;const x=()=>y||l(r,v,p)&&0!==o(r,v),w=()=>!y||0===o(i,p)||l(i,v,p);for(let _=u,S=u;_<=d;++_)g=t[_%a],g.skip||(p=c(g[s]),p!==v&&(y=l(p,r,i),null===b&&x()&&(b=0===o(p,r)?_:S),null!==b&&w()&&(m.push(Jr({start:b,end:_,loop:h,count:a,style:f})),b=null),S=_,v=p));return null!==b&&m.push(Jr({start:b,end:d,loop:h,count:a,style:f})),m}function ei(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=Zr(s[r],e.points,t);i.length&&n.push(...i)}return n}function ti(e,t,n,s){return s&&s.setContext&&n?function(e,t,n,s){const r=e._chart.getContext(),i=ni(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=i,d=t[0].start,h=d;function f(e,t,s,r){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:s,style:r}),u=r,d=t%l)}}for(const m of t){d=o?d:m.start;let e,t=n[d%l];for(h=d+1;h<=m.end;h++){const i=n[h%l];e=ni(s.setContext(dr(r,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),si(e,u)&&f(d,h-1,m.loop,u),t=i,u=e}d<h-1&&f(d,h-1,m.loop,u)}return c}(e,t,n,s):t}function ni(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function si(e,t){if(!t)return!1;const n=[],s=function(e,t){return Ns(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function ri(e,t,n){return e.options.clip?e[n]:t[n]}function ii(e,t){const n=t._clip;if(n.disabled)return!1;const s=function(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:ri(n,t,"left"),right:ri(n,t,"right"),top:ri(s,t,"top"),bottom:ri(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:s.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:s.right+(!0===n.right?0:n.right),top:!1===n.top?0:s.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:s.bottom+(!0===n.bottom?0:n.bottom)}}class ai{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,s){const r=t.listeners[s],i=t.duration;r.forEach(s=>s({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=ps.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let i,a=r.length-1,o=!1;for(;a>=0;--a)i=r[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(s.draw(),this._notify(s,n,e,"progress")),r.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oi=new ai;const li="transparent",ci={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const s=js(e||li),r=s.valid&&js(t||li);return r&&r.valid?r.mix(s,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class ui{constructor(e,t,n,s){const r=t[n];s=ur([e.to,s,r,e.from]);const i=ur([e.from,r,s]);this._active=!0,this._fn=e.fn||ci[e.type||typeof i],this._easing=ks[e.easing]||ks.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,i=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ur([e.to,t,s,e.from]),this._from=ur([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,s=this._prop,r=this._from,i=this._loop,a=this._to;let o;if(this._active=r!==a&&(i||t<n),!this._active)return this._target[s]=a,void this._notify(!0);t<0?this._target[s]=r:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[s]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][t]()}}class di{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bn(e))return;const t=Object.keys(Vs.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!bn(r))return;const i={};for(const e of t)i[e]=r[e];(yn(r.properties)&&r.properties||[s]).forEach(e=>{e!==s&&n.has(e)||n.set(e,i)})})}_animateOptions(e,t){const n=t.options,s=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&function(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const t=e[s[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,s=[],r=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(r[l]=u=new ui(d,e,l,c),s.push(u)):e[l]=c}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(oi.add(this._chart,n),!0):void 0}}function hi(e,t){const n=e&&e.options||{},s=n.reverse,r=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:s?i:r,end:s?r:i}}function fi(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function mi(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,i="single"===s.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,s.all)continue;break}c=e.values[l],xn(c)&&(i||0===t||Qn(t)===Qn(c))&&(t+=c)}return u||s.all?t:0}function pi(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function gi(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function vi(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function yi(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=s,l=i.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(i,a,s),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=gi(r,u,n),h[o]=i,h._top=vi(h,a,!0,s.type),h._bottom=vi(h,a,!1,s.type);(h._visualValues||(h._visualValues={}))[o]=i}}function bi(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function xi(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[s]||void 0===t[s][n])return;delete t[s][n],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[n]&&delete t[s]._visualValues[n]}}}const wi=e=>"reset"===e||"none"===e,_i=(e,t)=>t?e:Object.assign({},e);class Si{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pi(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),s=(e,t,n,s)=>"x"===e?t:"r"===e?s:n,r=t.xAxisID=_n(n.xAxisID,bi(e,"x")),i=t.yAxisID=_n(n.yAxisID,bi(e,"y")),a=t.rAxisID=_n(n.rAxisID,bi(e,"r")),o=t.indexAxis,l=t.iAxisID=s(o,r,i,a),c=t.vAxisID=s(o,i,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fs(this._data,this),e._stacked&&xi(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(bn(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:s}=t,r="x"===n.axis?"x":"y",i="x"===s.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[i]:e[u]};return o}(t,e)}else if(n!==t){if(n){fs(n,this);const e=this._cachedMeta;xi(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(s=t)._chartjs?s._chartjs.listeners.push(r):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),hs.forEach(e=>{const t="_onData"+Mn(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];const a=n.apply(this,r);return s._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),a}})}))),this._syncList=[],this._data=t}var s,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=pi(t.vScale,t),t.stack!==n.stack&&(s=!0,xi(t),t.stack=n.stack),this._resyncElements(e),(s||r!==t._stacked)&&(yi(this,t._parsed),t._stacked=pi(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:i}=n,a=r.axis;let o,l,c,u=0===e&&t===s.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=s,n._sorted=!0,c=s;else{c=yn(s[e])?this.parseArrayData(n,s,e,t):bn(s[e])?this.parseObjectData(n,s,e,t):this.parsePrimitiveData(n,s,e,t);const r=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),d=l);n._sorted=u}i&&yi(this,c)}parsePrimitiveData(e,t,n,s){const{iScale:r,vScale:i}=e,a=r.axis,o=i.axis,l=r.getLabels(),c=r===i,u=new Array(s);let d,h,f;for(d=0,h=s;d<h;++d)f=d+n,u[d]={[a]:c||r.parse(l[f],f),[o]:i.parse(t[f],f)};return u}parseArrayData(e,t,n,s){const{xScale:r,yScale:i}=e,a=new Array(s);let o,l,c,u;for(o=0,l=s;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:i.parse(u[1],c)};return a}parseObjectData(e,t,n,s){const{xScale:r,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Rn(h,a),d),y:i.parse(Rn(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const s=this.chart,r=this._cachedMeta,i=t[e.axis];return mi({keys:fi(s,!0),values:t._stacks[e.axis]._visualValues},i,r.index,{mode:n})}updateRangeFromParsed(e,t,n,s){const r=n[t.axis];let i=null===r?NaN:r;const a=s&&n._stacks[t.axis];s&&a&&(s.values=a,i=mi(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&e===n.iScale,i=s.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:fi(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=s[d];const t=h[a.axis];return!xn(h[e.axis])||c>t||u<t}for(d=0;d<i&&(f()||(this.updateRangeFromParsed(l,e,h,o),!r));++d);if(r)for(d=i-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let s,r,i;for(s=0,r=t.length;s<r;++s)i=t[s][e.axis],xn(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,s,r;return bn(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:!1===e}}(_n(this.options.clip,function(e,t,n){if(!1===n)return!1;const s=hi(e,n),r=hi(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,s=n.data||[],r=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=s[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,r))}for(c=0;c<i.length;++c)i[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return dr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return dr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const s="active"===t,r=this._cachedDataOpts,i=e+"-"+t,a=r[i],o=this.enableOptionSharing&&On(n);if(a)return _i(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=s?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Vs.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,s,t),u);return f.$shared&&(f.$shared=o,r[i]=Object.freeze(_i(f,o))),f}_resolveAnimations(e,t,n){const s=this.chart,r=this._cachedDataOpts,i="animation-".concat(t),a=r[i];if(a)return a;let o;if(!1!==s.options.animation){const s=this.chart.config,r=s.datasetAnimationScopeKeys(this._type,t),i=s.getOptionScopes(this.getDataset(),r);o=s.createResolver(i,this.getContext(e,n,t))}const l=new di(s,o&&o.animations);return o&&o._cacheable&&(r[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||wi(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(n),i=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:i}}updateElement(e,t,n,s){wi(s)?Object.assign(e,n):this._resolveAnimations(t,s).update(e,n)}updateSharedOptions(e,t,n){e&&!wi(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,n,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const s=n.length,r=t.length,i=Math.min(r,s);i&&this.parse(0,i),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this._cachedMeta,r=s.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(r),a=e;a<i;++a)r[a]=new this.dataElementType;this._parsing&&o(s._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,s){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,t);n._stacked&&xi(n,s)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,s]=e;this[t](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ki(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let t=0,r=n.length;t<r;t++)s=s.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=ms(s.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let s,r,i,a,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(On(a)&&(o=Math.min(o,Math.abs(i-a)||o)),a=i)};for(s=0,r=n.length;s<r;++s)i=t.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)i=t.getPixelForTick(s),l();return o}function Ni(e,t,n,s){return yn(e)?function(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),a=Math.min(r,i),o=Math.max(r,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:i,min:a,max:o}}(e,t,n,s):t[n.axis]=n.parse(e,s),t}function ji(e,t,n,s){const r=e.iScale,i=e.vScale,a=r.getLabels(),o=r===i,l=[];let c,u,d,h;for(c=n,u=n+s;c<u;++c)h=t[c],d={},d[r.axis]=o||r.parse(a[c],c),l.push(Ni(h,d,i,c));return l}function Ei(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Ci(e,t,n,s){let r=t.borderSkipped;const i={};if(!r)return void(e.borderSkipped=i);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=c:(n._bottom||0)===s?r=u:(i[Ai(u,a,o,l)]=!0,r=c)),i[Ai(r,a,o,l)]=!0,e.borderSkipped=i}function Ai(e,t,n,s){var r,i,a;return s?(a=n,e=Ti(e=(r=e)===(i=t)?a:r===a?i:r,n,t)):e=Ti(e,t,n),e}function Ti(e,t,n){return"start"===e?t:"end"===e?n:e}function Ii(e,t,n){let{inflateAmount:s}=t;e.inflateAmount="auto"===s?1===n?.33:0:s}(0,Rt.A)(Si,"defaults",{}),(0,Rt.A)(Si,"datasetElementType",null),(0,Rt.A)(Si,"dataElementType",null);class Di extends Si{parsePrimitiveData(e,t,n,s){return ji(e,t,n,s)}parseArrayData(e,t,n,s){return ji(e,t,n,s)}parseObjectData(e,t,n,s){const{iScale:r,vScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===i.axis?a:o,u=[];let d,h,f,m;for(d=n,h=n+s;d<h;++d)m=t[d],f={},f[r.axis]=r.parse(Rn(m,l),d),u.push(Ni(Rn(m,c),f,i,d));return u}updateRangeFromParsed(e,t,n,s){super.updateRangeFromParsed(e,t,n,s);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:s}=t,r=this.getParsed(e),i=r._custom,a=Ei(i)?"["+i.start+", "+i.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,s){const r="reset"===s,{index:i,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||vn(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),m=(t._stacks||{})[a.axis],p={horizontal:l,base:n.base,enableBorderRadius:!m||Ei(t._custom)||i===m._top||i===m._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(p.options=u||this.resolveDataElementOptions(h,e[h].active?"active":s));const g=p.options||e[h].options;Ci(p,g,m,i),Ii(p,g,c.ratio),this.updateElement(e[h],h,p,s)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,i=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),s=t&&t[e.vScale.axis];if(vn(s)||isNaN(s))return!0};for(const c of s)if((void 0===t||!l(c))&&((!1===r||-1===i.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[_n("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const s=this._getStacks(e,n),r=void 0!==t?s.indexOf(t):-1;return-1===r?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,s=[];let r,i;for(r=0,i=t.data.length;r<i;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||ki(t),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:s},options:{base:r,minBarLength:i}}=this,a=r||0,o=this.getParsed(e),l=o._custom,c=Ei(l);let u,d,h=o[t.axis],f=0,m=n?this.applyStack(t,o,n):h;m!==h&&(f=m-h,m=h),c&&(h=l.barStart,m=l.barEnd-l.barStart,0!==h&&Qn(h)!==Qn(l.barEnd)&&(f=0),f+=h);const p=vn(r)||c?f:r;let g=t.getPixelForValue(p);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+m):g,d=u-g,Math.abs(d)<i){d=function(e,t,n){return 0!==e?Qn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*i,h===a&&(g-=d/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[s]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=Qn(d)*t.getLineWidthForValue(a)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,s=this.options,r=s.skipNull,i=_n(s.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===s.barThickness?function(e,t,n,s){const r=t.pixels,i=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/s,ratio:n.barPercentage,start:c}}(e,t,s,n*l):function(e,t,n,s){const r=n.barThickness;let i,a;return vn(r)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=r*s,a=1),{chunk:i/s,ratio:a,start:t.pixels[e]-i/2}}(e,t,s,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(_n(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+d;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(i,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(i,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,s=n.length;let r=0;for(;r<s;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}(0,Rt.A)(Di,"id","bar"),(0,Rt.A)(Di,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Rt.A)(Di,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Pi extends Si{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,s){const r=super.parsePrimitiveData(e,t,n,s);for(let i=0;i<r.length;i++)r[i]._custom=this.resolveDataElementOptions(i+n).radius;return r}parseArrayData(e,t,n,s){const r=super.parseArrayData(e,t,n,s);for(let i=0;i<r.length;i++){const e=t[n+i];r[i]._custom=_n(e[2],this.resolveDataElementOptions(i+n).radius)}return r}parseObjectData(e,t,n,s){const r=super.parseObjectData(e,t,n,s);for(let i=0;i<r.length;i++){const e=t[n+i];r[i]._custom=_n(e&&e.r&&+e.r,this.resolveDataElementOptions(i+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=t,i=this.getParsed(e),a=s.getLabelForValue(i.x),o=r.getLabelForValue(i.y),l=i._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,s){const r="reset"===s,{iScale:i,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,s),c=i.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},f=h[c]=r?i.getPixelForDecimal(.5):i.getPixelForValue(n[c]),m=h[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(m),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":s),r&&(h.options.radius=0)),this.updateElement(t,d,h,s)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return"active"!==t&&(s.radius=0),s.radius+=_n(n&&n._custom,r),s}}(0,Rt.A)(Pi,"id","bubble"),(0,Rt.A)(Pi,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Rt.A)(Pi,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Ri extends Si{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=n;else{let r,i,a=e=>+n[e];if(bn(n[e])){const{key:e="value"}=this._parsing;a=t=>+Rn(n[t],e)}for(r=e,i=e+t;r<i;++r)s._parsed[r]=a(r)}}_getRotation(){return Zn(this.options.rotation-90)}_getCircumference(){return Zn(this.options.circumference)}_getRotationExtents(){let e=zn,t=-zn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),i=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,s=this._cachedMeta,r=s.data,i=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-i)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=function(e,t,n){let s=1,r=1,i=0,a=0;if(t<zn){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,s)=>as(e,o,l,!0)?1:Math.max(t,t*n,s,s*n),m=(e,t,s)=>as(e,o,l,!0)?-1:Math.min(t,t*n,s,s*n),p=f(0,c,d),g=f(Hn,u,h),v=m(Vn,c,d),y=m(Vn+Hn,u,h);s=(p-v)/2,r=(g-y)/2,i=-(p+v)/2,a=-(g+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:a}}(h,d,o),v=(n.width-i)/f,y=(n.height-i)/m,b=Math.max(Math.min(v,y)/2,0),x=Sn(this.options.radius,b),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=g*x,s.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/zn)}updateElements(e,t,n,s){const r="reset"===s,i=this.chart,a=i.chartArea,o=i.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,s);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,r);for(p=t;p<t+n;++p){const t=this._circumference(p,r),n=e[p],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};m&&(i.options=f||this.resolveDataElementOptions(p,n.active?"active":s)),g+=t,this.updateElement(n,p,i,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,s=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?zn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=Is(t._parsed[e],n.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let s,r,i,a,o;if(!e)for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){i=n.getDatasetMeta(s),e=i.data,a=i.controller;break}if(!e)return 0;for(s=0,r=e.length;s<r;++s)o=a.resolveDataElementOptions(s),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,s=e.length;n<s;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(_n(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Rt.A)(Ri,"id","doughnut"),(0,Rt.A)(Ri,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Rt.A)(Ri,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Rt.A)(Ri,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return t.labels.map((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Mi extends Si{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=bs(t,s,i);this._drawStart=a,this._drawCount=o,xs(t)&&(a=0,o=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(s,a,o,e)}updateElements(e,t,n,s){const r="reset"===s,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,s),d=i.axis,h=a.axis,{spanGaps:f,segment:m}=this.options,p=$n(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===s,v=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<y;++x){const n=e[x],f=g?n:{};if(x<t||x>=v){f.skip=!0;continue}const y=this.getParsed(x),w=vn(y[h]),_=f[d]=i.getPixelForValue(y[d],x),S=f[h]=r||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],x);f.skip=isNaN(_)||isNaN(S)||w,f.stop=x>0&&Math.abs(y[d]-b[d])>p,m&&(f.parsed=y,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":s)),g||this.updateElement(n,x,f,s),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const r=s[0].size(this.resolveDataElementOptions(0)),i=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Rt.A)(Mi,"id","line"),(0,Rt.A)(Mi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Rt.A)(Mi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Oi extends Si{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=Is(t._parsed[e].r,n.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,n,s){return Nr.bind(this)(e,t,n,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const s=this.getParsed(n).r;!isNaN(s)&&this.chart.getDataVisibility(n)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),i=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,n,s){const r="reset"===s,i=this.chart,a=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Vn;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,s,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,m=h+this._computeAngle(d,s,f),p=i.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=m,r&&(a.animateScale&&(p=0),a.animateRotate&&(n=m=u));const g={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:m,options:this.resolveDataElementOptions(d,t.active?"active":s)};this.updateElement(t,d,g,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Zn(this.resolveDataElementOptions(e,t).angle||n):0}}(0,Rt.A)(Oi,"id","polarArea"),(0,Rt.A)(Oi,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Rt.A)(Oi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return t.labels.map((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Li extends Ri{}(0,Rt.A)(Li,"id","pie"),(0,Rt.A)(Li,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Fi extends Si{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,s){return Nr.bind(this)(e,t,n,s)}update(e){const t=this._cachedMeta,n=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(n.points=s,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:r.length===s.length,options:t};this.updateElement(n,void 0,i,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,n,s){const r=this._cachedMeta.rScale,i="reset"===s;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":s),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=i?r.xCenter:o.x,c=i?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,s)}}}(0,Rt.A)(Fi,"id","radar"),(0,Rt.A)(Fi,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Rt.A)(Fi,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Vi extends Si{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=t,i=this.getParsed(e),a=s.getLabelForValue(i.x),o=r.getLabelForValue(i.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:i}=bs(t,n,s);if(this._drawStart=r,this._drawCount=i,xs(t)&&(r=0,i=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:i}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,s){const r="reset"===s,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,s),u=this.getSharedOptions(c),d=this.includeOptions(s,u),h=i.axis,f=a.axis,{spanGaps:m,segment:p}=this.options,g=$n(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===s;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=v?t:{},m=vn(n[f]),x=c[h]=i.getPixelForValue(n[h],b),w=c[f]=r||m?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(x)||isNaN(w)||m,c.stop=b>0&&Math.abs(n[h]-y[h])>g,p&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":s)),v||this.updateElement(t,b,c,s),y=n}this.updateSharedOptions(u,s,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,i)/2}}(0,Rt.A)(Vi,"id","scatter"),(0,Rt.A)(Vi,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Rt.A)(Vi,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ui{static override(e){Object.assign(Ui.prototype,e)}constructor(e){(0,Rt.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return zi()}parse(){return zi()}format(){return zi()}add(){return zi()}diff(){return zi()}startOf(){return zi()}endOf(){return zi()}}var Bi=Ui;function qi(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?ds:us;if(!s){const s=a(i,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,i=n.slice(0,s.lo+1).reverse().findIndex(e=>!vn(e[t.axis]));s.lo-=Math.max(0,i);const a=n.slice(s.hi).findIndex(e=>!vn(e[t.axis]));s.hi+=Math.max(0,a)}return s}if(r._sharedOptions){const e=i[0],s="function"===typeof e.getRange&&e.getRange(t);if(s){const e=a(i,t,n-s),r=a(i,t,n+s);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:i.length-1}}function Hi(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=qi(i[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||s(r,e,t)}}}function Wi(e,t,n,s,r){const i=[];if(!r&&!e.isPointInArea(t))return i;return Hi(e,n,t,function(n,a,o){(r||Ks(n,e.chartArea,0))&&n.inRange(t.x,t.y,s)&&i.push({element:n,datasetIndex:a,index:o})},!0),i}function Ki(e,t,n,s,r,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,s){const r=t?Math.abs(e.x-s.x):0,i=n?Math.abs(e.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return Hi(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,r);if(s&&!d)return;const h=n.getCenterPoint(r);if(!(!!i||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function Gi(e,t,n,s,r,i){return i||e.isPointInArea(t)?"r"!==n||s?Ki(e,t,n,s,r,i):function(e,t,n,s){let r=[];return Hi(e,n,t,function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],s),{angle:l}=ns(e,{x:t.x,y:t.y});as(l,a,o)&&r.push({element:e,datasetIndex:n,index:i})}),r}(e,t,n,r):[]}function Qi(e,t,n,s,r){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Hi(e,n,t,(e,s,l)=>{e[a]&&e[a](t[n],r)&&(i.push({element:e,datasetIndex:s,index:l}),o=o||e.inRange(t.x,t.y,r))}),s&&!o?[]:i}var Yi={evaluateInteractionItems:Hi,modes:{index(e,t,n,s){const r=Vr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Wi(e,r,i,s,a):Gi(e,r,i,!1,s,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,s){const r=Vr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Wi(e,r,i,s,a):Gi(e,r,i,!1,s,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,s)=>Wi(e,Vr(t,e),n.axis||"xy",s,n.includeInvisible||!1),nearest(e,t,n,s){const r=Vr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return Gi(e,r,i,n.intersect,s,a)},x:(e,t,n,s)=>Qi(e,Vr(t,e),"x",n.intersect,s),y:(e,t,n,s)=>Qi(e,Vr(t,e),"y",n.intersect,s)}};const Xi=["left","top","right","bottom"];function $i(e,t){return e.filter(e=>e.pos===t)}function Ji(e,t){return e.filter(e=>-1===Xi.indexOf(e.pos)&&e.box.axis===t)}function Zi(e,t){return e.sort((e,n)=>{const s=t?n:e,r=t?e:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function ea(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:s,stackWeight:r}=n;if(!e||!Xi.includes(s))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=r}return t}(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*s:a&&t.availableWidth,o.height=r):(o.width=s,o.height=c?c*r:a&&t.availableHeight)}return n}function ta(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function na(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function sa(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!bn(r)){n.size&&(e[r]-=n.size);const t=s[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[r]+=n.size}i.getPadding&&na(a,i.getPadding());const o=Math.max(0,t.outerWidth-ta(a,e,"left","right")),l=Math.max(0,t.outerHeight-ta(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function ra(e,t){const n=t.maxPadding;function s(e){const s={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{s[e]=Math.max(t[e],n[e])}),s}return s(e?["left","right"]:["top","bottom"])}function ia(e,t,n,s){const r=[];let i,a,o,l,c,u;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,ra(o.horizontal,t));const{same:a,other:d}=sa(t,n,o,s);c|=a&&r.length,u=u||d,l.fullSize||r.push(o)}return c&&ia(r,t,n,s)||u}function aa(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function oa(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=s[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const s=t.w*c,i=l.size||e.height;On(l.start)&&(a=l.start),e.fullSize?aa(e,r.left,a,n.outerWidth-r.right-r.left,i):aa(e,t.left+l.placed,a,s,i),l.start=a,l.placed+=s,a=e.bottom}else{const s=t.h*c,a=l.size||e.width;On(l.start)&&(i=l.start),e.fullSize?aa(e,i,r.top,a,n.outerHeight-r.bottom-r.top):aa(e,i,t.top+l.placed,a,s),l.start=i,l.placed+=s,i=e.right}}t.x=i,t.y=a}var la={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=lr(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,s,r,i,a,o;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=Zi(t.filter(e=>e.box.fullSize),!0),s=Zi($i(t,"left"),!0),r=Zi($i(t,"right")),i=Zi($i(t,"top"),!0),a=Zi($i(t,"bottom")),o=Ji(t,"x"),l=Ji(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:$i(t,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Nn(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);na(h,lr(s));const f=Object.assign({maxPadding:h,w:i,h:a,x:r.left,y:r.top},r),m=ea(l.concat(c),d);ia(o.fullSize,f,d,m),ia(l,f,d,m),ia(c,f,d,m)&&ia(l,f,d,m),function(e){const t=e.maxPadding;function n(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),oa(o.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,oa(o.rightAndBottom,f,d,m),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Nn(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ca{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,s){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):n)}}isAttached(e){return!0}updateConfig(e){}}class ua extends ca{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const da="$chartjs",ha={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fa=e=>null===e||""===e;const ma=!!qr&&{passive:!0};function pa(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,ma)}function ga(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function va(e,t,n){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ga(n.addedNodes,s),t=t&&!ga(n.removedNodes,s);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function ya(e,t,n){const s=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ga(n.removedNodes,s),t=t&&!ga(n.addedNodes,s);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ba=new Map;let xa=0;function wa(){const e=window.devicePixelRatio;e!==xa&&(xa=e,ba.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function _a(e,t,n){const s=e.canvas,r=s&&Rr(s);if(!r)return;const i=gs((e,t)=>{const s=r.clientWidth;n(e,t),s<r.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,s=t.contentRect.height;0===n&&0===s||i(n,s)});return a.observe(r),function(e,t){ba.size||window.addEventListener("resize",wa),ba.set(e,t)}(e,i),a}function Sa(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){ba.delete(e),ba.size||window.removeEventListener("resize",wa)}(e)}function ka(e,t,n){const s=e.canvas,r=gs(t=>{null!==e.ctx&&n(function(e,t){const n=ha[e.type]||e.type,{x:s,y:r}=Vr(e,t);return{type:n,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,ma)}(s,t,r),r}class Na extends ca{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[da]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",fa(r)){const t=Hr(e,"width");void 0!==t&&(e.width=t)}if(fa(s))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Hr(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[da])return!1;const n=t[da].initial;["height","width"].forEach(e=>{const s=n[e];vn(s)?t.removeAttribute(e):t.setAttribute(e,s)});const s=n.style||{};return Object.keys(s).forEach(e=>{t.style[e]=s[e]}),t.width=t.width,delete t[da],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),r={attach:va,detach:ya,resize:_a}[t]||ka;s[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),s=n[t];if(!s)return;({attach:Sa,detach:Sa,resize:Sa}[t]||pa)(e,t,s),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,s){return Ur(e,t,n,s)}isAttached(e){const t=e&&Rr(e);return!(!t||!t.isConnected)}}class ja{constructor(){(0,Rt.A)(this,"x",void 0),(0,Rt.A)(this,"y",void 0),(0,Rt.A)(this,"active",!1),(0,Rt.A)(this,"options",void 0),(0,Rt.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return $n(this.x)&&$n(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const s={};return e.forEach(e=>{s[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),s}}function Ea(e,t){const n=e.options.ticks,s=function(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?function(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>r)return function(e,t,n,s){let r,i=0,a=n[0];for(s=Math.ceil(s),r=0;r<e.length;r++)r===a&&(t.push(e[r]),i++,a=n[i*s])}(t,c,i,a/r),c;const u=function(e,t,n){const s=function(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}(e),r=t.length/n;if(!s)return Math.max(r,1);const i=function(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(s);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>r)return e}return Math.max(r,1)}(i,t,r);if(a>0){let e,n;const s=a>1?Math.round((l-o)/(a-1)):null;for(Ca(t,c,u,vn(s)?0:o-s,o),e=0,n=a-1;e<n;e++)Ca(t,c,u,i[e],i[e+1]);return Ca(t,c,u,l,vn(s)?t.length:l+s),c}return Ca(t,c,u),c}function Ca(e,t,n,s,r){const i=_n(s,0),a=Math.min(_n(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-s,n=o/Math.floor(o/n)),c=i;c<0;)u++,c=Math.round(i+u*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(i+u*n))}(0,Rt.A)(ja,"defaults",{}),(0,Rt.A)(ja,"defaultRoutes",void 0);const Aa=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Ta=(e,t)=>Math.min(t||e,e);function Ia(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function Da(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===s?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<i-o||c>a+o)))return c}function Pa(e){return e.drawTicks?e.tickLength:0}function Ra(e,t){if(!e.display)return 0;const n=cr(e.font,t),s=lr(e.padding);return(yn(e.text)?e.text.length:1)*n.lineHeight+s.height}function Ma(e,t,n){let s=vs(e);return(n&&"right"!==t||!n&&"right"===t)&&(s=(e=>"left"===e?"right":"right"===e?"left":e)(s)),s}class Oa extends ja{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:s}=this;return e=wn(e,Number.POSITIVE_INFINITY),t=wn(t,Number.NEGATIVE_INFINITY),n=wn(n,Number.POSITIVE_INFINITY),s=wn(s,Number.NEGATIVE_INFINITY),{min:wn(e,n),max:wn(t,s),minDefined:xn(e),maxDefined:xn(t)}}getMinMax(e){let t,{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds();if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),i||(s=Math.max(s,t.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:wn(n,wn(s,n)),max:wn(s,wn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kn(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:s,grace:r,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:s,max:r}=e,i=Sn(t,(r-s)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(s,-Math.abs(i)),max:a(r,i)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Ia(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=Ea(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kn(this.options.afterUpdate,[this])}beforeSetDimensions(){kn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n],r.label=kn(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){kn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Ta(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let i,a,o,l=s;if(!this._isVisible()||!t.display||s>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=s);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=os(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),u+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-Pa(e.grid)-t.padding-Ra(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=es(Math.min(Math.asin(os((c.highest.height+6)/i,-1,1)),Math.asin(os(a/o,-1,1))-Math.asin(os(d/o,-1,1)))),l=Math.max(s,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){kn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:s,grid:r}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=Ra(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Pa(r)+i):(e.height=this.maxHeight,e.width=Pa(r)+i),n.display&&this.ticks.length){const{first:t,last:s,widest:r,highest:i}=this._getLabelSizes(),o=2*n.padding,l=Zn(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,s,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,s){const{ticks:{align:r,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=s*e.width,d=n*t.height):(u=n*e.height,d=s*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,s=e.height/2;"start"===r?(n=0,s=e.height):"end"===r&&(n=t.height,s=0),this.paddingTop=n+i,this.paddingBottom=s+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)vn(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Ia(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:s,_longestTextCache:r}=this,i=[],a=[],o=Math.floor(t/Ta(t,n));let l,c,u,d,h,f,m,p,g,v,y,b=0,x=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),s.font=f=h.string,m=r[f]=r[f]||{data:{},gc:[]},p=h.lineHeight,g=v=0,vn(d)||yn(d)){if(yn(d))for(c=0,u=d.length;c<u;++c)y=d[c],vn(y)||yn(y)||(g=zs(s,m.data,m.gc,g,y),v+=p)}else g=zs(s,m.data,m.gc,g,d),v=p;i.push(g),a.push(v),b=Math.max(g,b),x=Math.max(v,x)}!function(e,t){Nn(e,e=>{const n=e.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[n[r]];n.splice(0,s)}})}(r,t);const w=i.indexOf(b),_=a.indexOf(x),S=e=>({width:i[e]||0,height:a[e]||0});return{first:S(0),last:S(t-1),widest:S(w),highest:S(_),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return os(this._alignToPixels?Bs(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return dr(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=dr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Zn(this.labelRotation),n=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),i=e.autoSkipPadding||0,a=r?r.widest.width+i:0,o=r?r.highest.height+i:0;return this.isHorizontal()?o*n>a*s?a/n:o/s:o*s<a*n?o/n:a/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,s=this.options,{grid:r,position:i,border:a}=s,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=Pa(r),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,m=f/2,p=function(e){return Bs(n,e,f)};let g,v,y,b,x,w,_,S,k,N,j,E;if("top"===i)g=p(this.bottom),w=this.bottom-u,S=g-m,N=p(e.top)+m,E=e.bottom;else if("bottom"===i)g=p(this.top),N=e.top,E=p(e.bottom)-m,w=g+m,S=this.top+u;else if("left"===i)g=p(this.right),x=this.right-u,_=g-m,k=p(e.left)+m,j=e.right;else if("right"===i)g=p(this.left),k=e.left,j=p(e.right)-m,x=g+m,_=this.left+u;else if("x"===t){if("center"===i)g=p((e.top+e.bottom)/2+.5);else if(bn(i)){const e=Object.keys(i)[0],t=i[e];g=p(this.chart.scales[e].getPixelForValue(t))}N=e.top,E=e.bottom,w=g+m,S=w+u}else if("y"===t){if("center"===i)g=p((e.left+e.right)/2);else if(bn(i)){const e=Object.keys(i)[0],t=i[e];g=p(this.chart.scales[e].getPixelForValue(t))}x=g-m,_=x-u,k=e.left,j=e.right}const C=_n(s.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=A){const e=this.getContext(v),t=r.setContext(e),s=a.setContext(e),i=t.lineWidth,c=t.color,u=s.dash||[],h=s.dashOffset,f=t.tickWidth,m=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=Da(this,v,o),void 0!==y&&(b=Bs(n,y,i),l?x=_=k=j=b:w=S=N=E=b,d.push({tx1:x,ty1:w,tx2:_,ty2:S,x1:k,y1:N,x2:j,y2:E,width:i,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:m,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:s,ticks:r}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,d=Pa(n.grid),h=d+c,f=u?-c:h,m=-Zn(this.labelRotation),p=[];let g,v,y,b,x,w,_,S,k,N,j,E,C="middle";if("top"===s)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===s)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===s){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===s){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===s)w=(e.top+e.bottom)/2+h;else if(bn(s)){const e=Object.keys(s)[0],t=s[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)x=(e.left+e.right)/2-h;else if(bn(s)){const e=Object.keys(s)[0],t=s[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const A=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],b=y.label;const e=r.setContext(this.getContext(g));S=this.getPixelForTick(g)+r.labelOffset,k=this._resolveTickFontOptions(g),N=k.lineHeight,j=yn(b)?b.length:1;const t=j/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(i?(x=S,"inner"===_&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),E="top"===s?"near"===l||0!==m?-j*N+N/2:"center"===l?-A.highest.height/2-t*N+N:-A.highest.height+N/2:"near"===l||0!==m?N/2:"center"===l?A.highest.height/2-t*N:A.highest.height-j*N,u&&(E*=-1),0===m||e.showLabelBackdrop||(x+=N/2*Math.sin(m))):(w=S,E=(1-j)*N/2),e.showLabelBackdrop){const t=lr(e.backdropPadding),n=A.heights[g],s=A.widths[g];let r=E-t.top,i=0-t.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":i-=s/2;break;case"right":i-=s;break;case"inner":g===v-1?i-=s:g>0&&(i-=s/2)}d={left:i,top:r,width:s+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:b,font:k,textOffset:E,options:{rotation:m,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[x,w],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Zn(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,i=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?s?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?s?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:s,width:r,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,s,r,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,i;const a=(e,t,s)=>{s.width&&s.color&&(n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.setLineDash(s.borderDash||[]),n.lineDashOffset=s.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,i=s.length;r<i;++r){const e=s[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),i=n.display?r.width:0;if(!i)return;const a=s.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Bs(e,this.left,i)-i/2,c=Bs(e,this.right,a)+a/2,u=d=o):(u=Bs(e,this.top,i)-i/2,d=Bs(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Gs(t,n);const s=this.getLabelItems(e);for(const r of s){const e=r.options,n=r.font;Zs(t,r.label,0,r.textOffset,n,e)}n&&Qs(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:s}}=this;if(!n.display)return;const r=cr(n.font),i=lr(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||bn(t)?(o+=i.bottom,yn(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,s){const{top:r,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,m=0;const p=a-r,g=o-i;if(e.isHorizontal()){if(h=ys(s,i,o),bn(n)){const e=Object.keys(n)[0],s=n[e];f=u[e].getPixelForValue(s)+p-t}else f="center"===n?(c.bottom+c.top)/2+p-t:Aa(e,n,t);d=o-i}else{if(bn(n)){const e=Object.keys(n)[0],s=n[e];h=u[e].getPixelForValue(s)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:Aa(e,n,t);f=ys(s,a,r),m="left"===n?-Hn:Hn}return{titleX:h,titleY:f,maxWidth:d,rotation:m}}(this,o,t,a);Zs(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:Ma(a,t,s),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=_n(e.grid&&e.grid.z,-1),s=_n(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Oa.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];i[n]!==this.id||e&&i.type!==e||s.push(i)}return s}_resolveTickFontOptions(e){return cr(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class La{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const s=this.items,r=e.id,i=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function(e,t,n){const s=Tn(Object.create(null),[n?Vs.get(n):{},Vs.get(t),e.defaults]);Vs.set(t,s),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Vs.route(i,r,l,o)})}(t,e.defaultRoutes);e.descriptors&&Vs.describe(t,e.descriptors)}(e,i,n),this.override&&Vs.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,s=this.scope;n in t&&delete t[n],s&&n in Vs[s]&&(delete Vs[s][n],this.override&&delete Rs[n])}}class Fa{constructor(){this.controllers=new La(Si,"datasets",!0),this.elements=new La(ja,"elements"),this.plugins=new La(Object,"plugins"),this.scales=new La(Oa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const s=n||this._getRegistryForType(t);n||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):Nn(t,t=>{const s=n||this._getRegistryForType(t);this._exec(e,s,t)})})}_exec(e,t,n){const s=Mn(e);kn(n["before"+s],[],n),t[e](n),kn(n["after"+s],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var Va=new Fa;class za{constructor(){this._init=[]}notify(e,t,n,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),i=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,s){s=s||{};for(const r of e){const e=r.plugin;if(!1===kn(e[n],[t,s,r.options],e)&&s.cancelable)return!1}return!0}invalidate(){vn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,s=_n(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],s=Object.keys(Va.plugins.items);for(let i=0;i<s.length;i++)n.push(Va.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const e=r[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==s||t?function(e,t,n,s){let{plugins:r,localIds:i}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=Ua(n[t],s);null!==r&&a.push({plugin:l,options:Ba(e.config,{plugin:l,local:i[t]},r,o)})}return a}(e,r,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,s=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(s(t,n),e,"stop"),this._notify(s(n,t),e,"start")}}function Ua(e,t){return t||!1!==e?!0===e?{}:e:null}function Ba(e,t,n,s){let{plugin:r,local:i}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return i&&r.defaults&&o.push(r.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qa(e,t){const n=Vs.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ha(e){if("x"===e||"y"===e||"r"===e)return e}function Wa(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Ka(e){if(Ha(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(const r of n){const t=r.axis||Wa(r.position)||e.length>1&&Ha(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Ga(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Qa(e,t){const n=Rs[e.type]||{scales:{}},s=t.scales||{},r=qa(e.type,t),i=Object.create(null);return Object.keys(s).forEach(t=>{const a=s[t];if(!bn(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Ka(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Ga(e,"x",n[0])||Ga(e,"y",n[0])}return{}}(t,e),Vs.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};i[t]=In(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,a=n.indexAxis||qa(r,t),o=(Rs[r]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;i[r]=i[r]||Object.create(null),In(i[r],[{axis:t},s[r],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];In(t,[Vs.scales[t.type],Vs.scale])}),i}function Ya(e){const t=e.options||(e.options={});t.plugins=_n(t.plugins,{}),t.scales=Qa(e,t)}function Xa(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const $a=new Map,Ja=new Set;function Za(e,t){let n=$a.get(e);return n||(n=t(),$a.set(e,n),Ja.add(n)),n}const eo=(e,t,n)=>{const s=Rn(t,n);void 0!==s&&e.add(s)};class to{constructor(e){this._config=function(e){return(e=e||{}).data=Xa(e.data),Ya(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Xa(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ya(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Za(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Za("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Za("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return Za("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let s=n.get(e);return s&&!t||(s=new Map,n.set(e,s)),s}getOptionScopes(e,t,n){const{options:s,type:r}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>eo(o,e,t))),t.forEach(e=>eo(o,s,e)),t.forEach(e=>eo(o,Rs[r]||{},e)),t.forEach(e=>eo(o,Vs,e)),t.forEach(e=>eo(o,Ms,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Ja.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Rs[t]||{},Vs.datasets[t]||{},{type:t},Vs,Ms]}resolveNamedOptions(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:i,subPrefixes:a}=no(this._resolverCache,e,s);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:s}=mr(e);for(const r of t){const t=n(r),i=s(r),a=(i||t)&&e[r];if(t&&(Ln(a)||so(a))||i&&yn(a))return!0}return!1}(i,t)){r.$shared=!1;o=fr(i,n=Ln(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],s=arguments.length>3?arguments[3]:void 0;const{resolver:r}=no(this._resolverCache,e,n);return bn(t)?fr(r,t,void 0,s):r}}function no(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);if(!i){i={resolver:hr(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},s.set(r,i)}return i}const so=e=>bn(e)&&Object.getOwnPropertyNames(e).some(t=>Ln(e[t]));const ro=["top","bottom","left","right","chartArea"];function io(e,t){return"top"===e||"bottom"===e||-1===ro.indexOf(e)&&"x"===t}function ao(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function oo(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),kn(n&&n.onComplete,[e],t)}function lo(e){const t=e.chart,n=t.options.animation;kn(n&&n.onProgress,[e],t)}function co(e){return Pr()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const uo={},ho=e=>{const t=co(e);return Object.values(uo).filter(e=>e.canvas===t).pop()};function fo(e,t,n){const s=Object.keys(e);for(const r of s){const s=+r;if(s>=t){const i=e[r];delete e[r],(n>0||s>t)&&(e[s+n]=i)}}}class mo{static register(){Va.add(...arguments),po()}static unregister(){Va.remove(...arguments),po()}constructor(e,t){const n=this.config=new to(t),s=co(e),r=ho(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Pr()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ua:Na}(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=gn(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new za,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],uo[this.id]=this,a&&o?(oi.listen(this,"complete",oo),oi.listen(this,"progress",lo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:s,_aspectRatio:r}=this;return vn(e)?t&&r?r:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Va}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Br(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qs(this.canvas,this.ctx),this}stop(){return oi.stop(this),this}resize(e,t){oi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(s,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Br(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),kn(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Nn(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,s=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],s=Ka(e,n),r="r"===s,i="x"===s;return{options:n,dposition:r?"chartArea":i?"bottom":"left",dtype:r?"radialLinear":i?"category":"linear"}}))),Nn(r,t=>{const r=t.options,i=r.id,a=Ka(i,r),o=_n(r.type,t.dtype);void 0!==r.position&&io(r.position,a)===io(t.dposition)||(r.position=t.dposition),s[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(Va.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),Nn(s,(e,t)=>{e||delete n[t]}),Nn(n,e=>{la.configure(this,e,e.options),la.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ao("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=t.length;n<s;n++){const s=t[n];let r=this.getDatasetMeta(n);const i=s.type||this.config.type;if(r.type&&r.type!==i&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=i,r.indexAxis=s.indexAxis||qa(i,this.options),r.order=s.order||0,r.index=n,r.label=""+s.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=Va.getController(i),{datasetElementType:s,dataElementType:a}=Vs.datasets[i];Object.assign(t,{dataElementType:Va.getElement(a),datasetElementType:s&&Va.getElement(s)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Nn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!s&&-1===r.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),s||Nn(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ao("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Nn(this.scales,e=>{la.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Fn(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of t){fo(e,s,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),s=n(0);for(let r=1;r<t;r++)if(!Fn(s,n(r)))return;return Array.from(s).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;la.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Nn(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ln(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(n.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(oi.has(this)?this.attached&&!oi.running(this)&&oi.start(this):(this.draw(),oo({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let s,r;for(s=0,r=t.length;s<r;++s){const r=t[s];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=ii(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(s&&Gs(t,s),e.controller.draw(),s&&Qs(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ks(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,s){const r=Yi.modes[t];return"function"===typeof r?r(this,e,n,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let s=n.filter(e=>e&&e._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=dr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const s=n?"show":"hide",r=this.getDatasetMeta(e),i=r.controller._resolveAnimations(void 0,s);On(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),oi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qs(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete uo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,s)=>{t.addEventListener(this,n,s),e[n]=s},s=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Nn(this.options.events,e=>n(e,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,s)=>{t.addEventListener(this,n,s),e[n]=s},s=(n,s)=>{e[n]&&(t.removeEventListener(this,n,s),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",i)};i=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){Nn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Nn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const s=n?"set":"remove";let r,i,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[s+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const s=this.getDatasetMeta(t);if(!s)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:s.data[n],index:n}});!jn(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const s=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=r(t,e),a=n?e:r(e,t);i.length&&this.updateHoverStyle(i,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,s))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:s=[],options:r}=this,i=t,a=this._getActiveElements(e,s,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,s){return n&&"mouseout"!==e.type?s?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,kn(r.onHover,[e,a,this],this),o&&kn(r.onClick,[e,a,this],this));const c=!jn(a,s);return(c||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,s){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}function po(){return Nn(mo.instances,e=>e._plugins.invalidate())}function go(e,t,n,s){const r=ir(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const i=(n-t)/2,a=Math.min(i,s*t/2),o=e=>{const t=(n-Math.min(i,e))*s/2;return os(e,0,Math.min(i,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:os(r.innerStart,0,a),innerEnd:os(r.innerEnd,0,a)}}function vo(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function yo(e,t,n,s,r,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+s+n-c,0),h=u>0?u+s+n+c:0;let f=0;const m=r-l;if(s){const e=((u>0?u-s:0)+(d>0?d-s:0))/2;f=(m-(0!==e?m*e/(e+s):m))/2}const p=(m-Math.max(.001,m*d-n/Vn)/d)/2,g=l+p+f,v=r-p-f,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:w}=go(t,h,d,v-g),_=d-y,S=d-b,k=g+y/_,N=v-b/S,j=h+x,E=h+w,C=g+x/j,A=v-w/E;if(e.beginPath(),i){const t=(k+N)/2;if(e.arc(a,o,d,k,t),e.arc(a,o,d,t,N),b>0){const t=vo(S,N,a,o);e.arc(t.x,t.y,b,N,v+Hn)}const n=vo(E,v,a,o);if(e.lineTo(n.x,n.y),w>0){const t=vo(E,A,a,o);e.arc(t.x,t.y,w,v+Hn,A+Math.PI)}const s=(v-w/h+(g+x/h))/2;if(e.arc(a,o,h,v-w/h,s,!0),e.arc(a,o,h,s,g+x/h,!0),x>0){const t=vo(j,C,a,o);e.arc(t.x,t.y,x,C+Math.PI,g-Hn)}const r=vo(_,g,a,o);if(e.lineTo(r.x,r.y),y>0){const t=vo(_,k,a,o);e.arc(t.x,t.y,y,g-Hn,k)}}else{e.moveTo(a,o);const t=Math.cos(k)*d+a,n=Math.sin(k)*d+o;e.lineTo(t,n);const s=Math.cos(N)*d+a,r=Math.sin(N)*d+o;e.lineTo(s,r)}e.closePath()}function bo(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(i){yo(e,t,n,s,p,r);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(p=a+(o%zn||zn))}m&&function(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(i,a,o,s-c,n+c),l>r?(c=r/l,e.arc(i,a,l,n+c,s-c,!0)):e.arc(i,a,r,n+Hn,s-Hn),e.closePath(),e.clip()}(e,t,p),l.selfJoin&&p-a>=Vn&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/a,is(s-n));if(e.beginPath(),e.arc(r,i,a-c/2,s+d/2,n-d/2),o>0){const t=Math.min(c/o,is(s-n));e.arc(r,i,o+c/2,n-t/2,s+t/2,!0)}else{const t=Math.min(c/2,a*is(s-n));if("round"===u)e.arc(r,i,t,n-Vn/2,s+Vn/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+Vn/2)+r,l=-a*Math.sin(n+Vn/2)+i,c=a*Math.cos(s+Vn/2)+r,u=a*Math.sin(s+Vn/2)+i;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),i||(yo(e,t,n,s,p,r),e.stroke())}(0,Rt.A)(mo,"defaults",Vs),(0,Rt.A)(mo,"instances",uo),(0,Rt.A)(mo,"overrides",Rs),(0,Rt.A)(mo,"registry",Va),(0,Rt.A)(mo,"version","4.5.0"),(0,Rt.A)(mo,"getChart",ho);class xo extends ja{constructor(e){super(),(0,Rt.A)(this,"circumference",void 0),(0,Rt.A)(this,"endAngle",void 0),(0,Rt.A)(this,"fullCircles",void 0),(0,Rt.A)(this,"innerRadius",void 0),(0,Rt.A)(this,"outerRadius",void 0),(0,Rt.A)(this,"pixelMargin",void 0),(0,Rt.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const s=this.getProps(["x","y"],n),{angle:r,distance:i}=ns(s,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=_n(u,o-a),f=as(r,a,o)&&a!==o,m=h>=zn||f,p=ls(i,l+d,c+d);return m&&p}getCenterPoint(e){const{x:t,y:n,startAngle:s,endAngle:r,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(s+r)/2,u=(i+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,s=(t.offset||0)/4,r=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>zn?Math.floor(n/zn):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const o=s*(1-Math.sin(Math.min(Vn,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:o}=t;let l=t.endAngle;if(i){yo(e,t,n,s,l,r);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=a+(o%zn||zn))}yo(e,t,n,s,l,r),e.fill()}(e,this,o,r,i),bo(e,this,o,r,i),e.restore()}}function wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=_n(n.borderCapStyle,t.borderCapStyle),e.setLineDash(_n(n.borderDash,t.borderDash)),e.lineDashOffset=_n(n.borderDashOffset,t.borderDashOffset),e.lineJoin=_n(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=_n(n.borderWidth,t.borderWidth),e.strokeStyle=_n(n.borderColor,t.borderColor)}function _o(e,t,n){e.lineTo(n.x,n.y)}function So(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(i,o),u=r<a&&i<a||r>o&&i>o;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function ko(e,t,n,s){const{points:r,options:i}=t,{count:a,start:o,loop:l,ilen:c}=So(r,n,s),u=function(e){return e.stepped?Ys:e.tension||"monotone"===e.cubicInterpolationMode?Xs:_o}(i);let d,h,f,{move:m=!0,reverse:p}=s||{};for(d=0;d<=c;++d)h=r[(o+(p?c-d:d))%a],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):u(e,f,h,p,i.stepped),f=h);return l&&(h=r[(o+(p?c:0))%a],u(e,f,h,p,i.stepped)),!!l}function No(e,t,n,s){const r=t.points,{count:i,start:a,ilen:o}=So(r,n,s),{move:l=!0,reverse:c}=s||{};let u,d,h,f,m,p,g=0,v=0;const y=e=>(a+(c?o-e:e))%i,b=()=>{f!==m&&(e.lineTo(g,m),e.lineTo(g,f),e.lineTo(g,p))};for(l&&(d=r[y(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=r[y(u)],d.skip)continue;const t=d.x,n=d.y,s=0|t;s===h?(n<f?f=n:n>m&&(m=n),g=(v*g+t)/++v):(b(),e.lineTo(t,n),h=s,v=0,f=m=n),p=n}b()}function jo(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?No:ko}(0,Rt.A)(xo,"id","arc"),(0,Rt.A)(xo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Rt.A)(xo,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Rt.A)(xo,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Eo="function"===typeof Path2D;function Co(e,t,n,s){Eo&&!t.options.segment?function(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),wo(e,t.options),e.stroke(r)}(e,t,n,s):function(e,t,n,s){const{segments:r,options:i}=t,a=jo(t);for(const o of r)wo(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}(e,t,n,s)}class Ao extends ja{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;Dr(this._points,n,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}(n,r,i,s);return ti(e,!0===s?[{start:a,end:o,loop:i}]:function(e,t,n,s){const r=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(s=!1,i.push({start:t%r,end:(a-1)%r,loop:s}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%r,end:o%r,loop:s}),i}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,s=e[t],r=this.points,i=ei(this,{property:t,start:s,end:s});if(!i.length)return;const a=[],o=function(e){return e.stepped?Kr:e.tension||"monotone"===e.cubicInterpolationMode?Gr:Wr}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:u}=i[l],d=r[c],h=r[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((s-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return jo(this)(e,this,t,n)}path(e,t,n){const s=this.segments,r=jo(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of s)i&=r(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Co(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function To(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}(0,Rt.A)(Ao,"id","line"),(0,Rt.A)(Ao,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Rt.A)(Ao,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Rt.A)(Ao,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Io extends ja{constructor(e){super(),(0,Rt.A)(this,"parsed",void 0),(0,Rt.A)(this,"skip",void 0),(0,Rt.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const s=this.options,{x:r,y:i}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-i,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return To(this,e,"x",t)}inYRange(e,t){return To(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Ks(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Hs(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Do(e,t){const{x:n,y:s,base:r,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,r),l=Math.max(n,r),c=s-d,u=s+d):(d=i/2,o=n-d,l=n+d,c=Math.min(s,r),u=Math.max(s,r)),{left:o,top:c,right:l,bottom:u}}function Po(e,t,n,s){return e?0:os(t,n,s)}function Ro(e){const t=Do(e),n=t.right-t.left,s=t.bottom-t.top,r=function(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=ar(s);return{t:Po(r.top,i.top,0,n),r:Po(r.right,i.right,0,t),b:Po(r.bottom,i.bottom,0,n),l:Po(r.left,i.left,0,t)}}(e,n/2,s/2),i=function(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=or(r),a=Math.min(t,n),o=e.borderSkipped,l=s||bn(r);return{topLeft:Po(!l||o.top||o.left,i.topLeft,0,a),topRight:Po(!l||o.top||o.right,i.topRight,0,a),bottomLeft:Po(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:Po(!l||o.bottom||o.right,i.bottomRight,0,a)}}(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Mo(e,t,n,s){const r=null===t,i=null===n,a=e&&!(r&&i)&&Do(e,s);return a&&(r||ls(t,a.left,a.right))&&(i||ls(n,a.top,a.bottom))}function Oo(e,t){e.rect(t.x,t.y,t.w,t.h)}function Lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+a,radius:e.radius}}(0,Rt.A)(Io,"id","point"),(0,Rt.A)(Io,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Rt.A)(Io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Fo extends ja{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:i}=Ro(this),a=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?er:Oo;var o;e.save(),i.w===r.w&&i.h===r.h||(e.beginPath(),a(e,Lo(i,t,r)),e.clip(),a(e,Lo(r,-t,i)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Lo(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,n){return Mo(this,e,t,n)}inXRange(e,t){return Mo(this,e,null,t)}inYRange(e,t){return Mo(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?n:(n+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Rt.A)(Fo,"id","bar"),(0,Rt.A)(Fo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Rt.A)(Fo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Vo=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}};class zo extends ja{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=kn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,s=cr(n.font),r=s.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Vo(n,r);let l,c;t.font=s.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,s,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,s){const{ctx:r,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=s+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const m=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+m+2*a>i)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:m,height:s},l[l.length-1]+=m+a}),u}_fitCols(e,t,n,s){const{ctx:r,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let u=a,d=0,h=0,f=0,m=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:p,itemHeight:g}=function(e,t,n,s,r){const i=function(e,t,n,s){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+s.measureText(r).width}(s,e,t,n),a=function(e,t,n){let s=e;"string"!==typeof t.text&&(s=Uo(t,n));return s}(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,r,e,s);i>0&&h+g+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,m++,d=h=0),o[i]={left:f,top:h,col:m,width:p,height:g},d=Math.max(d,p),h+=g+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:s},rtl:r}}=this,i=Qr(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=ys(n,this.left+s,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=ys(n,this.left+s,this.right-this.lineWidths[r])),o.top+=this.top+e+s,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+s}else{let r=0,a=ys(n,this.top+e+s,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=ys(n,this.top+e+s,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+s,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Gs(e,this),this._draw(),Qs(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:s}=this,{align:r,labels:i}=e,a=Vs.color,o=Qr(e.rtl,this.left,this.width),l=cr(i.font),{padding:c}=i,u=l.size,d=u/2;let h;this.drawTitle(),s.textAlign=o.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:f,boxHeight:m,itemHeight:p}=Vo(i,u),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:ys(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:ys(r,this.top+v+c,this.bottom-t[0].height),line:0},Yr(this.ctx,e.textDirection);const y=p+c;this.legendItems.forEach((b,x)=>{s.strokeStyle=b.fontColor,s.fillStyle=b.fontColor;const w=s.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=i.textAlign)),S=f+d+w;let k=h.x,N=h.y;o.setWidth(this.width),g?x>0&&k+S+c>this.right&&(N=h.y+=y,h.line++,k=h.x=ys(r,this.left+c,this.right-n[h.line])):x>0&&N+y>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,N=h.y=ys(r,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(m)||m<0)return;s.save();const r=_n(n.lineWidth,1);if(s.fillStyle=_n(n.fillStyle,a),s.lineCap=_n(n.lineCap,"butt"),s.lineDashOffset=_n(n.lineDashOffset,0),s.lineJoin=_n(n.lineJoin,"miter"),s.lineWidth=r,s.strokeStyle=_n(n.strokeStyle,a),s.setLineDash(_n(n.lineDash,[])),i.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);Ws(s,a,l,t+d,i.pointStyleWidth&&f)}else{const i=t+Math.max((u-m)/2,0),a=o.leftForLtr(e,f),l=or(n.borderRadius);s.beginPath(),Object.values(l).some(e=>0!==e)?er(s,{x:a,y:i,w:f,h:m,radius:l}):s.rect(a,i,f,m),s.fill(),0!==r&&s.stroke()}s.restore()}(o.x(k),N,b),k=((e,t,n,s)=>e===(s?"left":"right")?n:"center"===e?(t+n)/2:t)(_,k+f+d,g?k+S:this.right,e.rtl),function(e,t,n){Zs(s,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),N,b),g)h.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Uo(b,e)+c}else h.y+=y}),Xr(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=cr(t.font),s=lr(t.padding);if(!t.display)return;const r=Qr(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=s.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=ys(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+ys(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=ys(a,u,u+d);i.textAlign=r.textAlign(vs(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,Zs(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=cr(e.font),n=lr(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,s,r;if(ls(e,this.left,this.right)&&ls(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],ls(e,s.left,s.left+s.width)&&ls(t,s.top,s.top+s.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,a=(r=n,null!==(s=i)&&null!==r&&s.datasetIndex===r.datasetIndex&&s.index===r.index);i&&!a&&kn(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&kn(t.onHover,[e,n,this],this)}else n&&kn(t.onClick,[e,n,this],this);var s,r}}function Uo(e,t){return t*(e.text?e.text.length:0)}var Bo={id:"legend",_element:zo,start(e,t,n){const s=e.legend=new zo({ctx:e.ctx,options:n,chart:e});la.configure(e,s,n),la.addBox(e,s)},stop(e){la.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;la.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=lr(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qo extends ja{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=yn(n.text)?n.text.length:1;this._padding=lr(n.padding);const r=s*cr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:s,right:r,options:i}=this,a=i.align;let o,l,c,u=0;return this.isHorizontal()?(l=ys(a,n,r),c=t+e,o=r-n):("left"===i.position?(l=n+e,c=ys(a,s,t),u=-.5*Vn):(l=r-e,c=ys(a,t,s),u=.5*Vn),o=s-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=cr(t.font),s=n.lineHeight/2+this._padding.top,{titleX:r,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(s);Zs(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:vs(t.align),textBaseline:"middle",translation:[r,i]})}}var Ho={id:"title",_element:qo,start(e,t,n){!function(e,t){const n=new qo({ctx:e.ctx,options:t,chart:e});la.configure(e,n,t),la.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;la.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;la.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Wo={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();s.add(e.x),r+=e.y,++i}}if(0===i||0===s.size)return!1;return{x:[...s].reduce((e,t)=>e+t)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n,s,r,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,s=e.length;n<s;++n){const s=e[n].element;if(s&&s.hasValue()){const e=ss(t,s.getCenterPoint());e<o&&(o=e,r=s)}}if(r){const e=r.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function Ko(e,t){return t&&(yn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Go(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Qo(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:o}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:o,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function Yo(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=cr(t.bodyFont),c=cr(t.titleFont),u=cr(t.footerFont),d=i.length,h=r.length,f=s.length,m=lr(t.padding);let p=m.height,g=0,v=s.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){p+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,Nn(e.title,b),n.font=l.string,Nn(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?a+2+t.boxPadding:0,Nn(s,e=>{Nn(e.before,b),Nn(e.lines,b),Nn(e.after,b)}),y=0,n.font=u.string,Nn(e.footer,b),n.restore(),g+=m.width,{width:g,height:p}}function Xo(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===s?c=r<=(o+l)/2?"left":"right":r<=i/2?c="left":r>=a-i/2&&(c="right"),function(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;return"left"===e&&r+i+a>t.width||"right"===e&&r-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function $o(e,t,n){const s=n.yAlign||t.yAlign||function(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Xo(e,t,n,s),yAlign:s}}function Jo(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=or(a);let m=function(e,t){let{x:n,width:s}=e;return"right"===t?n-=s:"center"===t&&(n-=s/2),n}(t,o);const p=function(e,t,n){let{y:s,height:r}=e;return"top"===t?s+=n:s-="bottom"===t?r+n:r/2,s}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(u,h)+r:"right"===o&&(m+=Math.max(d,f)+r),{x:os(m,0,s.width-t.width),y:os(p,0,s.height-t.height)}}function Zo(e,t,n){const s=lr(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function el(e){return Ko([],Go(e))}function tl(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const nl={beforeTitle:pn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:pn,beforeBody:pn,beforeLabel:pn,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return vn(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:pn,afterBody:pn,beforeFooter:pn,footer:pn,afterFooter:pn};function sl(e,t,n,s){const r=e[t].call(n,s);return"undefined"===typeof r?nl[t].call(n,s):r}class rl extends ja{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&t.options.animation&&n.animations,r=new di(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,dr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,s=sl(n,"beforeTitle",this,e),r=sl(n,"title",this,e),i=sl(n,"afterTitle",this,e);let a=[];return a=Ko(a,Go(s)),a=Ko(a,Go(r)),a=Ko(a,Go(i)),a}getBeforeBody(e,t){return el(sl(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,s=[];return Nn(e,e=>{const t={before:[],lines:[],after:[]},r=tl(n,e);Ko(t.before,Go(sl(r,"beforeLabel",this,e))),Ko(t.lines,sl(r,"label",this,e)),Ko(t.after,Go(sl(r,"afterLabel",this,e))),s.push(t)}),s}getAfterBody(e,t){return el(sl(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,s=sl(n,"beforeFooter",this,e),r=sl(n,"footer",this,e),i=sl(n,"afterFooter",this,e);let a=[];return a=Ko(a,Go(s)),a=Ko(a,Go(r)),a=Ko(a,Go(i)),a}_createItems(e){const t=this._active,n=this.chart.data,s=[],r=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(Qo(this.chart,t[a]));return e.filter&&(l=l.filter((t,s,r)=>e.filter(t,s,r,n))),e.itemSort&&(l=l.sort((t,s)=>e.itemSort(t,s,n))),Nn(l,t=>{const n=tl(e.callbacks,t);s.push(sl(n,"labelColor",this,t)),r.push(sl(n,"labelPointStyle",this,t)),i.push(sl(n,"labelTextColor",this,t))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),s=this._active;let r,i=[];if(s.length){const e=Wo[n.position].call(this,s,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=Yo(this,n),a=Object.assign({},e,t),o=$o(this.chart,n,a),l=Jo(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=i,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,s){const r=this.getCaretPosition(e,n,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:s,yAlign:r}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=or(a),{x:d,y:h}=e,{width:f,height:m}=t;let p,g,v,y,b,x;return"center"===r?(b=h+m/2,"left"===s?(p=d,g=p-i,y=b+i,x=b-i):(p=d+f,g=p+i,y=b-i,x=b+i),v=p):(g="left"===s?d+Math.max(o,c)+i:"right"===s?d+f-Math.max(l,u)-i:this.caretX,"top"===r?(y=h,b=y-i,p=g-i,v=g+i):(y=h+m,b=y+i,p=g+i,v=g-i),x=y),{x1:p,x2:g,x3:v,y1:y,y2:b,y3:x}}drawTitle(e,t,n){const s=this.title,r=s.length;let i,a,o;if(r){const l=Qr(n.rtl,this.x,this.width);for(e.x=Zo(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=cr(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<r;++o)t.fillText(s[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,s,r){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=cr(r.bodyFont),u=Zo(this,"left",r),d=s.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=s.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Hs(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Hs(e,t,n,c)}else{e.lineWidth=bn(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=s.leftForLtr(d,l),n=s.leftForLtr(s.xPlus(d,1),l-2),a=or(i.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,er(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),er(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:s}=this,{bodySpacing:r,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=cr(n.bodyFont);let d=u.lineHeight,h=0;const f=Qr(n.rtl,this.x,this.width),m=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+r},p=f.textAlign(i);let g,v,y,b,x,w,_;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=Zo(this,p,n),t.fillStyle=n.bodyColor,Nn(this.beforeBody,m),h=a&&"right"!==p?"center"===i?l/2+c:l+2+c:0,b=0,w=s.length;b<w;++b){for(g=s[b],v=this.labelTextColors[b],t.fillStyle=v,Nn(g.before,m),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,o)),x=0,_=y.length;x<_;++x)m(y[x]),d=u.lineHeight;Nn(g.after,m)}h=0,d=u.lineHeight,Nn(this.afterBody,m),e.y-=r}drawFooter(e,t,n){const s=this.footer,r=s.length;let i,a;if(r){const o=Qr(n.rtl,this.x,this.width);for(e.x=Zo(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=cr(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<r;++a)t.fillText(s[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,s){const{xAlign:r,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=or(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===i&&this.drawCaret(e,t,n,s),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===i&&"right"===r&&this.drawCaret(e,t,n,s),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===i&&this.drawCaret(e,t,n,s),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===r&&this.drawCaret(e,t,n,s),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const n=Wo[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=Yo(this,e),a=Object.assign({},n,this._size),o=$o(t,e,a),l=Jo(e,a,o,t);s._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=lr(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,s,t),Yr(e,t.textDirection),r.y+=i.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Xr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,s=e.map(e=>{let{datasetIndex:t,index:n}=e;const s=this.chart.getDatasetMeta(t);if(!s)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:s.data[n],index:n}}),r=!jn(n,s),i=this._positionChanged(s,t);(r||i)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],i=this._getActiveElements(e,r,t,n),a=this._positionChanged(i,e),o=t||!jn(i,r)||a;return o&&(this._active=i,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,s){const r=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:s,options:r}=this,i=Wo[r.position].call(this,e,t);return!1!==i&&(n!==i.x||s!==i.y)}}(0,Rt.A)(rl,"positioners",Wo);var il={id:"tooltip",_element:rl,positioners:Wo,afterInit(e,t,n){n&&(e.tooltip=new rl({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,a.A)((0,a.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function al(e,t,n,s){const r=e.indexOf(t);if(-1===r)return((e,t,n,s)=>("string"===typeof t?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,s);return r!==e.lastIndexOf(t)?n:r}function ol(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ll extends Oa{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:s}of t)e[n]===s&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(vn(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:os(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:al(n,e,_n(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)s.push({value:i});return s}getLabelForValue(e){return ol.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cl(e,t){const n=[],{bounds:s,step:r,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,f=c-1,{min:m,max:p}=t,g=!vn(i),v=!vn(a),y=!vn(l),b=(p-m)/(u+1);let x,w,_,S,k=Xn((p-m)/f/h)*h;if(k<1e-14&&!g&&!v)return[{value:m},{value:p}];S=Math.ceil(p/k)-Math.floor(m/k),S>f&&(k=Xn(S*k/f/h)*h),vn(o)||(x=Math.pow(10,o),k=Math.ceil(k*x)/x),"ticks"===s?(w=Math.floor(m/k)*k,_=Math.ceil(p/k)*k):(w=m,_=p),g&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/r,k/1e3)?(S=Math.round(Math.min((a-i)/k,c)),k=(a-i)/S,w=i,_=a):y?(w=g?i:w,_=v?a:_,S=l-1,k=(_-w)/S):(S=(_-w)/k,S=Yn(S,Math.round(S),k/1e3)?Math.round(S):Math.ceil(S));const N=Math.max(ts(k),ts(w));x=Math.pow(10,vn(o)?N:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let j=0;for(g&&(d&&w!==i?(n.push({value:i}),w<i&&j++,Yn(Math.round((w+j*k)*x)/x,i,ul(i,b,e))&&j++):w<i&&j++);j<S;++j){const e=Math.round((w+j*k)*x)/x;if(v&&e>a)break;n.push({value:e})}return v&&d&&_!==a?n.length&&Yn(n[n.length-1].value,a,ul(a,b,e))?n[n.length-1].value=a:n.push({value:a}):v&&_!==a||n.push({value:_}),n}function ul(e,t,n){let{horizontal:s,minRotation:r}=n;const i=Zn(r),a=(s?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,Rt.A)(ll,"id","category"),(0,Rt.A)(ll,"defaults",{ticks:{callback:ol}});class dl extends Oa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return vn(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const i=e=>s=t?s:e,a=e=>r=n?r:e;if(e){const e=Qn(s),t=Qn(r);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(s===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||i(s-t)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:s}=e;return s?(t=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(s," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s=cl({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Jn(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-t)/Math.max(e.length-1,1)/2;t-=s,n+=s}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Is(e,this.chart.options.locale,this.options.ticks.format)}}class hl extends dl{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=xn(e)?e:0,this.max=xn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Zn(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Rt.A)(hl,"id","linear"),(0,Rt.A)(hl,"defaults",{ticks:{callback:Ps.formatters.numeric}});const fl=e=>Math.floor(Gn(e)),ml=(e,t)=>Math.pow(10,fl(e)+t);function pl(e){return 1===e/Math.pow(10,fl(e))}function gl(e,t,n){const s=Math.pow(10,n),r=Math.floor(e/s);return Math.ceil(t/s)-r}function vl(e,t){let{min:n,max:s}=t;n=wn(e.min,n);const r=[],i=fl(n);let a=function(e,t){let n=fl(t-e);for(;gl(e,t,n)>10;)n++;for(;gl(e,t,n)<10;)n--;return Math.min(n,fl(e))}(n,s),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=i>a?Math.pow(10,i):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,a)),f=wn(e.min,Math.round((c+d+h*Math.pow(10,a))*o)/o);for(;f<s;)r.push({value:f,major:pl(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+d+h*Math.pow(10,a))*o)/o;const m=wn(e.max,f);return r.push({value:m,major:pl(m),significand:h}),r}class yl extends Oa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=dl.prototype.parse.apply(this,[e,t]);if(0!==n)return xn(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=xn(e)?Math.max(0,e):null,this.max=xn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xn(this._userMin)&&(this.min=e===ml(this.min,0)?ml(this.min,-1):ml(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,s=this.max;const r=t=>n=e?n:t,i=e=>s=t?s:e;n===s&&(n<=0?(r(1),i(10)):(r(ml(n,-1)),i(ml(s,1)))),n<=0&&r(ml(s,-1)),s<=0&&i(ml(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,t=vl({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Jn(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Is(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Gn(e),this._valueRange=Gn(this.max)-Gn(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Gn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function bl(e){const t=e.ticks;if(t.display&&e.display){const e=lr(t.backdropPadding);return _n(t.font&&t.font.size,Vs.font.size)+e.height}return 0}function xl(e,t,n){return n=yn(n)?n:[n],{w:Us(e,t.string,n),h:n.length*t.lineHeight}}function wl(e,t,n,s,r){return e===s||e===r?{start:t-n/2,end:t+n/2}:e<s||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function _l(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],r=[],i=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Vn/i:0;for(let l=0;l<i;l++){const i=a.setContext(e.getPointLabelContext(l));r[l]=i.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],o),u=cr(i.font),d=xl(e.ctx,u,e._pointLabels[l]);s[l]=d;const h=is(e.getIndexAngle(l)+o),f=Math.round(es(h));Sl(n,t,h,wl(f,c.x,d.w,0,180),wl(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const s=[],r=e._pointLabels.length,i=e.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:bl(i)/2,additionalAngle:a?Vn/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=kl(e,u,l);s.push(r),"auto"===o&&(r.visible=Nl(r,c),r.visible&&(c=r))}return s}(e,s,r)}function Sl(e,t,n,s,r){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;s.start<t.l?(o=(t.l-s.start)/i,e.l=Math.min(e.l,t.l-o)):s.end>t.r&&(o=(s.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function kl(e,t,n){const s=e.drawingArea,{extra:r,additionalAngle:i,padding:a,size:o}=n,l=e.getPointPosition(t,s+r+a,i),c=Math.round(es(is(l.angle+Hn))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function Nl(e,t){if(!t)return!0;const{left:n,top:s,right:r,bottom:i}=e;return!(Ks({x:n,y:s},t)||Ks({x:n,y:i},t)||Ks({x:r,y:s},t)||Ks({x:r,y:i},t))}function jl(e,t,n){const{left:s,top:r,right:i,bottom:a}=n,{backdropColor:o}=t;if(!vn(o)){const n=or(t.borderRadius),l=lr(t.backdropPadding);e.fillStyle=o;const c=s-l.left,u=r-l.top,d=i-s+l.width,h=a-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),er(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function El(e,t,n,s){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,zn);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let i=1;i<s;i++)n=e.getPointPosition(i,t),r.lineTo(n.x,n.y)}}(0,Rt.A)(yl,"id","logarithmic"),(0,Rt.A)(yl,"defaults",{ticks:{callback:Ps.formatters.logarithmic,major:{enabled:!0}}});class Cl extends dl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=lr(bl(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=xn(e)&&!isNaN(e)?e:0,this.max=xn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bl(this.options))}generateTickLabels(e){dl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=kn(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?_l(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,s))}getIndexAngle(e){return is(e*(zn/(this._pointLabels.length||1))+Zn(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(vn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(vn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return dr(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=this.getIndexAngle(e)-Hn+n;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),El(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:s,border:r}=t,i=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const i=s.setContext(e.getPointLabelContext(r));jl(n,i,t);const a=cr(i.font),{x:o,y:l,textAlign:c}=t;Zs(n,e._pointLabels[r],o,l+a.lineHeight/2,a,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),s.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=s.setContext(n),l=r.setContext(n);!function(e,t,n,s,r){const i=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!s||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),El(e,n,a,s),i.closePath(),i.stroke(),i.restore())}(this,a,o,i,l)}}),n.display){for(e.save(),a=i-1;a>=0;a--){const s=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:i}=s;i&&r&&(e.lineWidth=i,e.strokeStyle=r,e.setLineDash(s.borderDash),e.lineDashOffset=s.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let r,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((s,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=cr(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(s.label).width,e.fillStyle=o.backdropColor;const t=lr(o.backdropPadding);e.fillRect(-i/2-t.left,-r-l.size/2-t.top,i+t.width,l.size+t.height)}Zs(e,s.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Rt.A)(Cl,"id","radialLinear"),(0,Rt.A)(Cl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ps.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Rt.A)(Cl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Rt.A)(Cl,"descriptors",{angleLines:{_fallback:"grid"}});const Al={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tl=Object.keys(Al);function Il(e,t){return e-t}function Dl(e,t){if(vn(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof s&&(a=s(a)),xn(a)||(a="string"===typeof s?n.parse(a,s):n.parse(a)),null===a?null:(r&&(a="week"!==r||!$n(i)&&!0!==i?n.startOf(a,r):n.startOf(a,"isoWeek",i)),+a)}function Pl(e,t,n,s){const r=Tl.length;for(let i=Tl.indexOf(e);i<r-1;++i){const e=Al[Tl[i]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=s)return Tl[i]}return Tl[r-1]}function Rl(e,t,n){if(n){if(n.length){const{lo:s,hi:r}=cs(n,t);e[n[s]>=t?n[s]:n[r]]=!0}}else e[t]=!0}function Ml(e,t,n){const s=[],r={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],r[o]=a,s.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+r.add(o,1,s))l=n[o],l>=0&&(t[l].major=!0);return t}(e,s,r,n):s}class Ol extends Oa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),s=this._adapter=new Bi(e.adapters.date);s.init(t),In(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Dl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:s,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(s=Math.min(s,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),s=xn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),n),r=xn(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,s="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,i=function(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}(s,r,this.max);return this._unit=t.unit||(n.autoSkip?Pl(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,s,r){for(let i=Tl.length-1;i>=Tl.indexOf(n);i--){const n=Tl[i];if(Al[n].common&&e._adapter.diff(r,s,n)>=t-1)return n}return Tl[n?Tl.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Tl.indexOf(e)+1,n=Tl.length;t<n;++t)if(Al[Tl[t]].common)return Tl[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&i.reverse(),Ml(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),s=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;s=os(s,0,i),r=os(r,0,i),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,s=this.options,r=s.time,i=r.unit||Pl(r.minUnit,t,n,this._getLabelCapacity(t)),a=_n(s.ticks.stepSize,1),o="week"===i&&r.isoWeekday,l=$n(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const f="data"===s.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,i),d++)Rl(c,u,f);return u!==n&&"ticks"!==s.bounds&&1!==d||Rl(c,u,f),Object.keys(c).sort(Il).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,s=this._unit,r=t||n[s];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,s){const r=this.options,i=r.ticks.callback;if(i)return kn(i,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,s||(h?u:c))}generateTickLabels(e){let t,n,s;for(t=0,n=e.length;t<n;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,s=Zn(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),i=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*i,h:n*i+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,s=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Ml(this,[e],this._majorUnit),s),i=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,t=s.length;e<t;++e)n=n.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const s=this.getLabels();for(t=0,n=s.length;t<n;++t)e.push(Dl(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ms(e.sort(Il))}}function Ll(e,t,n){let s,r,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=us(e,"pos",t)),({pos:s,time:i}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=us(e,"time",t)),({time:s,pos:i}=e[o]),({time:r,pos:a}=e[l]));const c=r-s;return c?i+(a-i)*(t-s)/c:i}(0,Rt.A)(Ol,"id","time"),(0,Rt.A)(Ol,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Fl extends Ol{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Ll(t,this.min),this._tableRange=Ll(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,s=[],r=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&s.push(l);if(s.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=s.length;i<a;++i)c=s[i+1],o=s[i-1],l=s[i],Math.round((c+o)/2)!==l&&r.push({time:l,pos:i/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ll(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Ll(this._table,n*this._tableRange+this._minPos,!0)}}(0,Rt.A)(Fl,"id","timeseries"),(0,Rt.A)(Fl,"defaults",Ol.defaults);const Vl=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],zl="label";function Ul(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Bl(e,t){e.labels=t}function ql(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zl;const s=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!s.includes(r)?(s.push(r),Object.assign(r,t),r):(0,a.A)({},t)})}function Hl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zl;const n={labels:[],datasets:[]};return Bl(n,e.labels),ql(n,e.datasets,t),n}function Wl(e,t){const{height:n=150,width:r=300,redraw:o=!1,datasetIdKey:l,type:c,data:u,options:d,plugins:h=[],fallbackContent:f,updateMode:m}=e,p=(0,i.A)(e,Vl),g=(0,s.useRef)(null),v=(0,s.useRef)(null),y=()=>{g.current&&(v.current=new mo(g.current,{type:c,data:Hl(u,l),options:d&&(0,a.A)({},d),plugins:h}),Ul(t,v.current))},b=()=>{Ul(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,s.useEffect)(()=>{!o&&v.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(v.current,d)},[o,d]),(0,s.useEffect)(()=>{!o&&v.current&&Bl(v.current.config.data,u.labels)},[o,u.labels]),(0,s.useEffect)(()=>{!o&&v.current&&u.datasets&&ql(v.current.config.data,u.datasets,l)},[o,u.datasets]),(0,s.useEffect)(()=>{v.current&&(o?(b(),setTimeout(y)):v.current.update(m))},[o,d,u.labels,u.datasets,m]),(0,s.useEffect)(()=>{v.current&&(b(),setTimeout(y))},[c]),(0,s.useEffect)(()=>(y(),()=>b()),[]),s.createElement("canvas",(0,a.A)({ref:g,role:"img",height:n,width:r},p),f)}const Kl=(0,s.forwardRef)(Wl);function Gl(e,t){return mo.register(t),(0,s.forwardRef)((t,n)=>s.createElement(Kl,(0,a.A)((0,a.A)({},t),{},{ref:n,type:e})))}const Ql=Gl("line",Mi),Yl=Gl("bar",Di),Xl=Gl("pie",Li);mo.register(ll,hl,Fo,Ho,il,Bo,xo,Io,Ao);const $l=()=>{const e=de(),[t,n]=(0,s.useState)("daily"),[r,i]=(0,s.useState)((new Date).toISOString().split("T")[0]),[o,l]=(0,s.useState)((new Date).toISOString().substring(0,7)),[c,u]=(0,s.useState)((new Date).getFullYear().toString()),[d,h]=(0,s.useState)(null),[f,m]=(0,s.useState)(!1),[p,g]=(0,s.useState)(""),v=(0,s.useCallback)(async()=>{if(("monthly"!==t||o)&&("yearly"!==t||c)&&("daily"!==t||r)){m(!0),g("");try{let e;switch(t){case"daily":default:e=await y();break;case"monthly":e=await b();break;case"yearly":e=await x()}h(e)}catch(p){g("Erreur lors de la g\xe9n\xe9ration du rapport"),console.error("Report generation error:",p)}finally{m(!1)}}},[t,r,o,c]);(0,s.useEffect)(()=>{h(null);const e=setTimeout(()=>{v()},100);return()=>clearTimeout(e)},[v]);const y=async()=>{if(!r)throw new Error("Date non s\xe9lectionn\xe9e");const[e,t,n,s]=await Promise.all([(0,St.Nr)("expenses",[{field:"date",operator:"==",value:r}]),(0,St.Nr)("stock",[{field:"date",operator:"==",value:r}]),(0,St.gP)("products"),(0,St.gP)("categories")]),i=e.reduce((e,t)=>e+(t.totalExpense||0),0);let a=0,o=0,l=[];t.forEach(e=>{const t=n.find(t=>t.id===e.productId);if(t){const n=e.soldQuantity||0,s=e.currentStock||0;a+=n*t.price,o+=s*t.price,n>0&&l.push({name:t.name,quantity:n,value:n*t.price})}});const c=a-i,u={};e.forEach(e=>{const t=e.category||"Autres";u[t]=(u[t]||0)+e.totalExpense});const d={};return t.forEach(e=>{const t=n.find(t=>t.id===e.productId);if(t&&e.soldQuantity>0){const n=s.find(e=>e.id===t.categoryId),r=(null===n||void 0===n?void 0:n.name)||"Autres";d[r]=(d[r]||0)+e.soldQuantity*t.price}}),{type:"daily",date:r,summary:{totalExpenses:i,totalSales:a,totalStockValue:o,profit:c,profitMargin:a>0?c/a*100:0},soldItems:l,charts:{expenses:{labels:Object.keys(u),data:Object.values(u)},sales:{labels:Object.keys(d),data:Object.values(d)}}}},b=async()=>{if(!o)throw new Error("Mois non s\xe9lectionn\xe9");const e="".concat(o,"-01"),t="".concat(o,"-31"),[n,s,r]=await Promise.all([(0,St.gP)("expenses"),(0,St.gP)("stock"),(0,St.gP)("products")]),i=n.filter(n=>!!n.date&&(n.date>=e&&n.date<=t)),a=s.filter(n=>!!n.date&&(n.date>=e&&n.date<=t)),l={};i.forEach(e=>{e.date&&(l[e.date]||(l[e.date]={expenses:0,sales:0}),l[e.date].expenses+=e.totalExpense||0)}),a.forEach(e=>{if(!e.date)return;const t=r.find(t=>t.id===e.productId);t&&e.soldQuantity>0&&(l[e.date]||(l[e.date]={expenses:0,sales:0}),l[e.date].sales+=e.soldQuantity*t.price)});const c=i.reduce((e,t)=>e+(t.totalExpense||0),0);let u=0;a.forEach(e=>{const t=r.find(t=>t.id===e.productId);t&&(u+=(e.soldQuantity||0)*t.price)});const d=u-c;return{type:"monthly",period:o,summary:{totalExpenses:c,totalSales:u,profit:d,profitMargin:u>0?d/u*100:0,daysActive:Object.keys(l).length},charts:{daily:{labels:Object.keys(l).sort(),expenses:Object.keys(l).sort().map(e=>l[e].expenses),sales:Object.keys(l).sort().map(e=>l[e].sales),profit:Object.keys(l).sort().map(e=>l[e].sales-l[e].expenses)}}}},x=async()=>{if(!c)throw new Error("Ann\xe9e non s\xe9lectionn\xe9e");const[e,t,n]=await Promise.all([(0,St.gP)("expenses"),(0,St.gP)("stock"),(0,St.gP)("products")]),s=e.filter(e=>!!e.date&&e.date.startsWith(c)),r=t.filter(e=>!!e.date&&e.date.startsWith(c)),i={};s.forEach(e=>{if(!e.date)return;const t=e.date.substring(0,7);i[t]||(i[t]={expenses:0,sales:0}),i[t].expenses+=e.totalExpense||0}),r.forEach(e=>{if(!e.date)return;const t=n.find(t=>t.id===e.productId);if(t&&e.soldQuantity>0){const n=e.date.substring(0,7);i[n]||(i[n]={expenses:0,sales:0}),i[n].sales+=e.soldQuantity*t.price}});const a=s.reduce((e,t)=>e+(t.totalExpense||0),0);let o=0;r.forEach(e=>{const t=n.find(t=>t.id===e.productId);t&&(o+=(e.soldQuantity||0)*t.price)});const l=o-a;return{type:"yearly",period:c,summary:{totalExpenses:a,totalSales:o,profit:l,profitMargin:o>0?l/o*100:0,monthsActive:Object.keys(i).length},charts:{monthly:{labels:Object.keys(i).sort(),expenses:Object.keys(i).sort().map(e=>i[e].expenses),sales:Object.keys(i).sort().map(e=>i[e].sales),profit:Object.keys(i).sort().map(e=>i[e].sales-i[e].expenses)}}}};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"R\xe9capitulatifs et Rapports"}),(0,xt.jsx)("button",{className:"add-button",onClick:v,disabled:f,children:"\ud83d\udd04 Actualiser"})]}),p&&(0,xt.jsx)("div",{className:"error-message",children:p}),(0,xt.jsxs)("div",{className:"filters",children:[(0,xt.jsxs)("div",{className:"report-type-selector",children:[(0,xt.jsx)("label",{children:"Type de rapport:"}),(0,xt.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"report-type-select",children:[(0,xt.jsx)("option",{value:"daily",children:"Quotidien"}),(0,xt.jsx)("option",{value:"monthly",children:"Mensuel"}),(0,xt.jsx)("option",{value:"yearly",children:"Annuel"})]})]}),"daily"===t&&(0,xt.jsxs)("div",{className:"date-filter",children:[(0,xt.jsx)("label",{children:"Date:"}),(0,xt.jsx)("input",{type:"date",value:r,onChange:e=>i(e.target.value),className:"date-input"})]}),"monthly"===t&&(0,xt.jsxs)("div",{className:"date-filter",children:[(0,xt.jsx)("label",{children:"Mois:"}),(0,xt.jsx)("input",{type:"month",value:o,onChange:e=>l(e.target.value),className:"date-input"})]}),"yearly"===t&&(0,xt.jsxs)("div",{className:"date-filter",children:[(0,xt.jsx)("label",{children:"Ann\xe9e:"}),(0,xt.jsx)("select",{value:c,onChange:e=>u(e.target.value),className:"date-input",children:Array.from({length:5},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,xt.jsx)("option",{value:e,children:e},e))})]})]}),(0,xt.jsx)("main",{className:"admin-main",children:f?(0,xt.jsx)("div",{className:"loading",children:"G\xe9n\xe9ration du rapport..."}):d?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("div",{className:"summary-cards",children:[(0,xt.jsxs)("div",{className:"summary-card expenses",children:[(0,xt.jsx)("h3",{children:"D\xe9penses Totales"}),(0,xt.jsxs)("div",{className:"amount",children:[d.summary.totalExpenses.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"summary-card sales",children:[(0,xt.jsx)("h3",{children:"Ventes Totales"}),(0,xt.jsxs)("div",{className:"amount",children:[d.summary.totalSales.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"summary-card profit ".concat(d.summary.profit>=0?"positive":"negative"),children:[(0,xt.jsx)("h3",{children:d.summary.profit>=0?"B\xe9n\xe9fice":"Perte"}),(0,xt.jsxs)("div",{className:"amount",children:[d.summary.profit.toFixed(2)," Ar"]}),(0,xt.jsxs)("div",{className:"margin",children:["Marge: ",d.summary.profitMargin.toFixed(1),"%"]})]}),void 0!==d.summary.totalStockValue&&(0,xt.jsxs)("div",{className:"summary-card stock",children:[(0,xt.jsx)("h3",{children:"Valeur Stock Restant"}),(0,xt.jsxs)("div",{className:"amount",children:[d.summary.totalStockValue.toFixed(2)," Ar"]})]})]}),d.soldItems&&d.soldItems.length>0&&(0,xt.jsxs)("div",{className:"sold-items-section",children:[(0,xt.jsx)("h3",{children:"Produits Vendus"}),(0,xt.jsx)("div",{className:"sold-items-grid",children:d.soldItems.map((e,t)=>(0,xt.jsxs)("div",{className:"sold-item",children:[(0,xt.jsx)("span",{className:"item-name",children:e.name}),(0,xt.jsxs)("span",{className:"item-quantity",children:["Qt\xe9: ",e.quantity]}),(0,xt.jsxs)("span",{className:"item-value",children:[e.value.toFixed(2)," Ar"]})]},t))})]}),d&&d.summary&&(()=>{if(!d||!d.charts)return null;const e={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Rapport ".concat("daily"===t?"Quotidien":"monthly"===t?"Mensuel":"Annuel")}}},n={responsive:!0,plugins:{legend:{position:"right"}}};if("daily"===t)return(0,xt.jsxs)("div",{className:"charts-grid",children:[d.charts.expenses&&d.charts.expenses.labels&&d.charts.expenses.labels.length>0&&(0,xt.jsxs)("div",{className:"chart-container",children:[(0,xt.jsx)("h3",{children:"D\xe9penses par Cat\xe9gorie"}),(0,xt.jsx)(Xl,{data:{labels:d.charts.expenses.labels,datasets:[{data:d.charts.expenses.data,backgroundColor:["#8B4513","#A0522D","#D2B48C","#228B22","#696969","#90EE90","#F5F5DC","#FFB6C1"]}]},options:n})]}),d.charts.sales&&d.charts.sales.labels&&d.charts.sales.labels.length>0&&(0,xt.jsxs)("div",{className:"chart-container",children:[(0,xt.jsx)("h3",{children:"Ventes par Cat\xe9gorie"}),(0,xt.jsx)(Xl,{data:{labels:d.charts.sales.labels,datasets:[{data:d.charts.sales.data,backgroundColor:["#228B22","#90EE90","#8B4513","#A0522D","#D2B48C","#696969","#F5F5DC","#FFB6C1"]}]},options:n})]})]});if("monthly"===t||"yearly"===t){const n="monthly"===t?d.charts.daily:d.charts.monthly;return n&&n.labels&&n.sales&&n.expenses&&n.profit?(0,xt.jsxs)("div",{className:"charts-grid",children:[(0,xt.jsxs)("div",{className:"chart-container full-width",children:[(0,xt.jsxs)("h3",{children:["\xc9volution ","monthly"===t?"Quotidienne":"Mensuelle"]}),(0,xt.jsx)(Ql,{data:{labels:n.labels,datasets:[{label:"Ventes",data:n.sales,borderColor:"#228B22",backgroundColor:"rgba(34, 139, 34, 0.1)",tension:.1},{label:"D\xe9penses",data:n.expenses,borderColor:"#8B4513",backgroundColor:"rgba(139, 69, 19, 0.1)",tension:.1},{label:"Profit",data:n.profit,borderColor:"#696969",backgroundColor:"rgba(105, 105, 105, 0.1)",tension:.1}]},options:(0,a.A)((0,a.A)({},e),{},{scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e+" Ar"}}}}})})]}),(0,xt.jsxs)("div",{className:"chart-container",children:[(0,xt.jsx)("h3",{children:"R\xe9partition des Ventes vs D\xe9penses"}),(0,xt.jsx)(Yl,{data:{labels:n.labels,datasets:[{label:"Ventes",data:n.sales,backgroundColor:"rgba(34, 139, 34, 0.8)"},{label:"D\xe9penses",data:n.expenses,backgroundColor:"rgba(139, 69, 19, 0.8)"}]},options:(0,a.A)((0,a.A)({},e),{},{scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e+" Ar"}}}}})})]})]}):(0,xt.jsx)("div",{className:"loading",children:"G\xe9n\xe9ration des graphiques..."})}})()]}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune donn\xe9e disponible"}),(0,xt.jsx)("p",{children:"S\xe9lectionnez une p\xe9riode pour g\xe9n\xe9rer un rapport"})]})})]})},Jl=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",position:"",department:"",salary:"",hireDate:"",address:"",emergencyContact:"",emergencyPhone:"",status:"active"}),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)("");(0,s.useEffect)(()=>{p()},[]);const p=async()=>{try{h(!0);const e=await(0,St.gP)("employees");n(e)}catch(f){m("Erreur lors du chargement des employ\xe9s")}finally{h(!1)}},g=e=>{u((0,a.A)((0,a.A)({},c),{},{[e.target.name]:e.target.value}))},v=async(e,t)=>{try{h(!0),await(0,St.lU)("employees",e,{status:t}),await p()}catch(f){m("Erreur lors de la mise \xe0 jour du statut")}finally{h(!1)}},y=()=>{u({firstName:"",lastName:"",email:"",phone:"",position:"",department:"",salary:"",hireDate:"",address:"",emergencyContact:"",emergencyPhone:"",status:"active"}),l(null),i(!1)},b=e=>t.filter(t=>t.status===e),x=e=>{switch(e){case"active":return"var(--accent-green)";case"inactive":return"#ff9800";case"terminated":return"#c62828";default:return"var(--primary-gray)"}},w=e=>{switch(e){case"active":return"Actif";case"inactive":return"Inactif";case"terminated":return"Licenci\xe9";default:return"Inconnu"}};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des Employ\xe9s"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Nouvel Employ\xe9"})]}),f&&(0,xt.jsx)("div",{className:"error-message",children:f}),(0,xt.jsxs)("div",{className:"employee-stats",children:[(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Employ\xe9s Actifs"}),(0,xt.jsx)("div",{className:"stat-number",children:b("active").length})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Employ\xe9s Inactifs"}),(0,xt.jsx)("div",{className:"stat-number",children:b("inactive").length})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Total Employ\xe9s"}),(0,xt.jsx)("div",{className:"stat-number",children:t.length})]})]}),r&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal large",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[o?"Modifier":"Ajouter"," un Employ\xe9"]}),(0,xt.jsx)("button",{className:"close-button",onClick:y,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),m("");try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email))throw new Error("Format d'email invalide");const e=(0,a.A)((0,a.A)({},c),{},{salary:parseFloat(c.salary)||0,fullName:"".concat(c.firstName," ").concat(c.lastName),createdAt:new Date,updatedAt:new Date});if(o)await(0,St.lU)("employees",o.id,(0,a.A)((0,a.A)({},e),{},{createdAt:o.createdAt}));else try{const t="Employee123",n=await(0,St.DY)(c.email,t);await(0,St.createDocument)("employees",(0,a.A)((0,a.A)({},e),{},{uid:n.uid,hasDefaultPassword:!0})),await(0,St.createDocument)("users",{uid:n.uid,email:c.email,role:"employee",firstName:c.firstName,lastName:c.lastName,phone:c.phone||"",isActive:!0,permissions:["employee_access"],employeeId:null,createdAt:new Date,lastLogin:null})}catch(t){console.error("Error creating employee auth:",t);let e="Erreur lors de la cr\xe9ation du compte";switch(t.code){case"auth/email-already-in-use":e="Cette adresse email est d\xe9j\xe0 utilis\xe9e";break;case"auth/invalid-email":e="Format d'email invalide";break;case"auth/weak-password":e="Le mot de passe est trop faible";break;case"auth/network-request-failed":e="Erreur de connexion r\xe9seau";break;default:e="Erreur lors de la cr\xe9ation du compte: ".concat(t.message)}throw new Error(e)}await p(),y()}catch(f){m("Erreur lors de la sauvegarde")}finally{h(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"firstName",children:"Pr\xe9nom *"}),(0,xt.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:c.firstName,onChange:g,required:!0,placeholder:"Pr\xe9nom de l'employ\xe9"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"lastName",children:"Nom *"}),(0,xt.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:c.lastName,onChange:g,required:!0,placeholder:"Nom de l'employ\xe9"})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"email",children:"Email *"}),(0,xt.jsx)("input",{type:"email",id:"email",name:"email",value:c.email,onChange:g,required:!0,placeholder:"email@example.com",disabled:o})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,xt.jsx)("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:g,placeholder:"Num\xe9ro de t\xe9l\xe9phone"})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"position",children:"Poste *"}),(0,xt.jsxs)("select",{id:"position",name:"position",value:c.position,onChange:g,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un poste"}),["Cuisinier","Commis de cuisine","Chef de cuisine","Serveur","Responsable salle","Caissier","Plongeur","Manager","Aide de cuisine"].map(e=>(0,xt.jsx)("option",{value:e,children:e},e))]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"department",children:"D\xe9partement *"}),(0,xt.jsxs)("select",{id:"department",name:"department",value:c.department,onChange:g,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un d\xe9partement"}),["Cuisine","Service","Administration","Nettoyage"].map(e=>(0,xt.jsx)("option",{value:e,children:e},e))]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"salary",children:"Salaire mensuel (Ar)"}),(0,xt.jsx)("input",{type:"number",id:"salary",name:"salary",value:c.salary,onChange:g,step:"0.01",min:"0",placeholder:"0.00"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"hireDate",children:"Date d'embauche"}),(0,xt.jsx)("input",{type:"date",id:"hireDate",name:"hireDate",value:c.hireDate,onChange:g})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"address",children:"Adresse"}),(0,xt.jsx)("textarea",{id:"address",name:"address",value:c.address,onChange:g,placeholder:"Adresse compl\xe8te",rows:"2"})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"emergencyContact",children:"Contact d'urgence"}),(0,xt.jsx)("input",{type:"text",id:"emergencyContact",name:"emergencyContact",value:c.emergencyContact,onChange:g,placeholder:"Nom du contact d'urgence"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"emergencyPhone",children:"T\xe9l\xe9phone d'urgence"}),(0,xt.jsx)("input",{type:"tel",id:"emergencyPhone",name:"emergencyPhone",value:c.emergencyPhone,onChange:g,placeholder:"Num\xe9ro d'urgence"})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,xt.jsxs)("select",{id:"status",name:"status",value:c.status,onChange:g,children:[(0,xt.jsx)("option",{value:"active",children:"Actif"}),(0,xt.jsx)("option",{value:"inactive",children:"Inactif"}),(0,xt.jsx)("option",{value:"terminated",children:"Licenci\xe9"})]})]}),!o&&(0,xt.jsx)("div",{className:"info-message",children:"Un compte sera automatiquement cr\xe9\xe9 avec le mot de passe par d\xe9faut: Employee123"}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:y,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:d,className:"save-button",children:d?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsx)("main",{className:"admin-main",children:d&&0===t.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des employ\xe9s..."}):(0,xt.jsxs)("div",{className:"employees-grid",children:[t.map(e=>{var n,s;return(0,xt.jsxs)("div",{className:"employee-card",children:[(0,xt.jsxs)("div",{className:"employee-header",children:[(0,xt.jsx)("div",{className:"employee-avatar",children:((null===(n=e.firstName)||void 0===n?void 0:n[0])||"")+((null===(s=e.lastName)||void 0===s?void 0:s[0])||"")}),(0,xt.jsx)("div",{className:"employee-status-badge",style:{backgroundColor:x(e.status)},children:w(e.status)})]}),(0,xt.jsxs)("div",{className:"employee-content",children:[(0,xt.jsx)("h3",{children:e.fullName||"".concat(e.firstName," ").concat(e.lastName)}),(0,xt.jsx)("div",{className:"employee-position",children:e.position}),(0,xt.jsx)("div",{className:"employee-department",children:e.department}),(0,xt.jsxs)("div",{className:"employee-details",children:[(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Email:"}),(0,xt.jsx)("span",{children:e.email})]}),e.phone&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"T\xe9l\xe9phone:"}),(0,xt.jsx)("span",{children:e.phone})]}),e.salary&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Salaire:"}),(0,xt.jsxs)("span",{children:[e.salary," Ar/mois"]})]}),e.hireDate&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Embauch\xe9 le:"}),(0,xt.jsx)("span",{children:new Date(e.hireDate).toLocaleDateString("fr-FR")})]})]}),e.hasDefaultPassword&&(0,xt.jsx)("div",{className:"warning-message",children:"Mot de passe par d\xe9faut - Changement requis"})]}),(0,xt.jsxs)("div",{className:"employee-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{var t;l(e),u({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",position:e.position||"",department:e.department||"",salary:(null===(t=e.salary)||void 0===t?void 0:t.toString())||"",hireDate:e.hireDate||"",address:e.address||"",emergencyContact:e.emergencyContact||"",emergencyPhone:e.emergencyPhone||"",status:e.status||"active"}),i(!0)})(e),children:"\u270f\ufe0f Modifier"}),"active"===e.status?(0,xt.jsx)("button",{className:"deactivate-button",onClick:()=>v(e.id,"inactive"),children:"\u23f8\ufe0f D\xe9sactiver"}):(0,xt.jsx)("button",{className:"activate-button",onClick:()=>v(e.id,"active"),children:"\u25b6\ufe0f Activer"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet employ\xe9 ? Cette action supprimera \xe9galement son acc\xe8s au syst\xe8me."))try{h(!0);const n=t.find(t=>t.id===e);if(await(0,St.Nn)("employees",e),n&&n.uid){const e=await(0,St.Nr)("users",[{field:"uid",operator:"==",value:n.uid}]);e.length>0&&await(0,St.Nn)("users",e[0].id)}else if(n&&n.email){const e=await(0,St.Nr)("users",[{field:"email",operator:"==",value:n.email}]);e.length>0&&await(0,St.Nn)("users",e[0].id)}await p()}catch(f){m("Erreur lors de la suppression"),console.error("Delete employee error:",f)}finally{h(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)}),0===t.length&&!d&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucun employ\xe9 trouv\xe9"}),(0,xt.jsx)("p",{children:"Commencez par ajouter votre premier employ\xe9"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>i(!0),children:"+ Ajouter un employ\xe9"})]})]})})]})},Zl=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(null),[p,g]=(0,s.useState)(""),[v,y]=(0,s.useState)((new Date).toISOString().substring(0,7)),[b,x]=(0,s.useState)([]),[w,_]=(0,s.useState)(null),[S,k]=(0,s.useState)({name:"",description:"",maxScore:20,weight:1}),[N,j]=(0,s.useState)({employeeId:"",month:(new Date).toISOString().substring(0,7),ratings:{},comments:""}),[E,C]=(0,s.useState)(!1),[A,T]=(0,s.useState)("");(0,s.useEffect)(()=>{I()},[v,p]),(0,s.useEffect)(()=>{p&&D()},[p]);const I=async()=>{try{C(!0);const[e,t]=await Promise.all([(0,St.gP)("employees"),(0,St.gP)("ratingCriteria")]);n(e.filter(e=>"active"===e.status)),i(t);const s=[{field:"month",operator:"==",value:v}];p&&s.push({field:"employeeId",operator:"==",value:p});const r=await(0,St.Nr)("employeeRatings",s);l(r)}catch(A){T("Erreur lors du chargement des donn\xe9es")}finally{C(!1)}},D=async()=>{if(p)try{const e=await U(p);x(e)}catch(A){console.error("Error loading employee history:",A)}},P=e=>{const{name:t,value:n,type:s}=e.target;k((0,a.A)((0,a.A)({},S),{},{[t]:"number"===s?parseFloat(n)||0:n}))},R=e=>{_(e),j({employeeId:e.employeeId,month:e.month,ratings:e.ratings||{},comments:e.comments||""}),h(!0)},M=async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette notation ?"))try{C(!0),await(0,St.Nn)("employeeRatings",e),await I()}catch(A){T("Erreur lors de la suppression")}finally{C(!1)}},O=()=>{k({name:"",description:"",maxScore:20,weight:1}),m(null),u(!1)},L=()=>{j({employeeId:"",month:(new Date).toISOString().substring(0,7),ratings:{},comments:""}),_(null),h(!1)},F=e=>{if(0===r.length)return 0;let t=0,n=0;return r.forEach(s=>{const r=e[s.id]||0,i=s.weight||1;t+=r*i,n+=i}),n>0?t/n:0},V=(e,t)=>o.find(n=>n.employeeId===e&&n.month===t),z=e=>{const t=o.filter(t=>t.employeeId===e);if(0===t.length)return 0;return t.reduce((e,t)=>e+(t.totalScore||0),0)/t.length},U=async e=>{try{return(await(0,St.Nr)("employeeRatings",[{field:"employeeId",operator:"==",value:e}])).sort((e,t)=>new Date(t.month)-new Date(e.month))}catch(A){return console.error("Error fetching rating history:",A),[]}},B=e=>e>=16?"var(--accent-green)":e>=12?"#ff9800":e>=8?"#ff5722":"#c62828";return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Notes des Employ\xe9s"}),(0,xt.jsxs)("div",{className:"header-actions",children:[(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Crit\xe8re"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>h(!0),children:"+ Noter"})]})]}),A&&(0,xt.jsx)("div",{className:"error-message",children:A}),(0,xt.jsxs)("div",{className:"filters",children:[(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Mois:"}),(0,xt.jsx)("input",{type:"month",value:v,onChange:e=>y(e.target.value),className:"date-input"})]}),(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Employ\xe9:"}),(0,xt.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"employee-filter",children:[(0,xt.jsx)("option",{value:"",children:"Tous les employ\xe9s"}),t.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.fullName},e.id))]})]})]}),c&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[f?"Modifier":"Ajouter"," un Crit\xe8re"]}),(0,xt.jsx)("button",{className:"close-button",onClick:O,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0),T("");try{f?await(0,St.lU)("ratingCriteria",f.id,S):await(0,St.createDocument)("ratingCriteria",S),await I(),O()}catch(A){T("Erreur lors de la sauvegarde du crit\xe8re")}finally{C(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"criteriaName",children:"Nom du crit\xe8re *"}),(0,xt.jsx)("input",{type:"text",id:"criteriaName",name:"name",value:S.name,onChange:P,required:!0,placeholder:"Ex: Ponctualit\xe9, Qualit\xe9 du travail..."})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"criteriaDescription",children:"Description"}),(0,xt.jsx)("textarea",{id:"criteriaDescription",name:"description",value:S.description,onChange:P,placeholder:"Description du crit\xe8re d'\xe9valuation",rows:"3"})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"maxScore",children:"Score maximum"}),(0,xt.jsx)("input",{type:"number",id:"maxScore",name:"maxScore",value:S.maxScore,onChange:P,min:"1",max:"20",step:"1"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"weight",children:"Poids (coefficient)"}),(0,xt.jsx)("input",{type:"number",id:"weight",name:"weight",value:S.weight,onChange:P,min:"0.1",max:"5",step:"0.1"})]})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:O,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:E,className:"save-button",children:E?"Sauvegarde...":"Sauvegarder"})]})]})]})}),d&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal large",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsx)("h2",{children:w?"Modifier la Notation":"Noter un Employ\xe9"}),(0,xt.jsx)("button",{className:"close-button",onClick:L,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0),T("");try{const e=F(N.ratings),t=(0,a.A)((0,a.A)({},N),{},{totalScore:e,ratingDate:(new Date).toISOString()});if(w)await(0,St.lU)("employeeRatings",w.id,t);else{if(o.find(e=>e.employeeId===N.employeeId&&e.month===N.month))return T('Une notation existe d\xe9j\xe0 pour cet employ\xe9 ce mois-ci. Utilisez le bouton "Modifier" pour la mettre \xe0 jour.'),void C(!1);await(0,St.createDocument)("employeeRatings",t)}await I(),L()}catch(A){T("Erreur lors de la sauvegarde de la notation")}finally{C(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"ratingEmployee",children:"Employ\xe9 *"}),(0,xt.jsxs)("select",{id:"ratingEmployee",name:"employeeId",value:N.employeeId,onChange:e=>j((0,a.A)((0,a.A)({},N),{},{employeeId:e.target.value})),required:!0,disabled:w,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),t.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.fullName},e.id))]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"ratingMonth",children:"Mois *"}),(0,xt.jsx)("input",{type:"month",id:"ratingMonth",name:"month",value:N.month,onChange:e=>j((0,a.A)((0,a.A)({},N),{},{month:e.target.value})),required:!0,disabled:w})]})]}),(0,xt.jsxs)("div",{className:"criteria-ratings",children:[(0,xt.jsx)("h3",{children:"\xc9valuation par crit\xe8res"}),r.map(e=>(0,xt.jsxs)("div",{className:"criteria-rating-row",children:[(0,xt.jsxs)("div",{className:"criteria-info",children:[(0,xt.jsx)("h4",{children:e.name}),e.description&&(0,xt.jsx)("p",{className:"criteria-description",children:e.description}),(0,xt.jsxs)("span",{className:"criteria-details",children:["Max: ",e.maxScore,"/20 | Poids: ",e.weight]})]}),(0,xt.jsxs)("div",{className:"rating-input",children:[(0,xt.jsx)("input",{type:"number",min:"0",max:"20",step:"0.5",value:N.ratings[e.id]||"",onChange:t=>((e,t)=>{const n=Math.min(Math.max(parseFloat(t)||0,0),20);j((0,a.A)((0,a.A)({},N),{},{ratings:(0,a.A)((0,a.A)({},N.ratings),{},{[e]:n})}))})(e.id,t.target.value),placeholder:"0-20"}),(0,xt.jsx)("span",{children:"/20"})]})]},e.id))]}),(0,xt.jsx)("div",{className:"total-score",children:(0,xt.jsxs)("strong",{children:["Score total: ",F(N.ratings).toFixed(1),"/20"]})}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"comments",children:"Commentaires"}),(0,xt.jsx)("textarea",{id:"comments",name:"comments",value:N.comments,onChange:e=>j((0,a.A)((0,a.A)({},N),{},{comments:e.target.value})),placeholder:"Commentaires sur la performance de l'employ\xe9",rows:"4"})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:L,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:E,className:"save-button",children:E?"Sauvegarde...":w?"Modifier":"Sauvegarder"})]})]})]})}),(0,xt.jsxs)("main",{className:"admin-main",children:[(0,xt.jsxs)("section",{className:"criteria-section",children:[(0,xt.jsx)("h2",{children:"Crit\xe8res d'\xc9valuation"}),r.length>0?(0,xt.jsx)("div",{className:"criteria-grid",children:r.map(e=>(0,xt.jsxs)("div",{className:"criteria-card",children:[(0,xt.jsx)("h3",{children:e.name}),e.description&&(0,xt.jsx)("p",{className:"criteria-description",children:e.description}),(0,xt.jsxs)("div",{className:"criteria-meta",children:[(0,xt.jsxs)("span",{children:["Max: ",e.maxScore,"/20"]}),(0,xt.jsxs)("span",{children:["Poids: ",e.weight]})]}),(0,xt.jsxs)("div",{className:"criteria-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{m(e),k({name:e.name,description:e.description||"",maxScore:e.maxScore||20,weight:e.weight||1}),u(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce crit\xe8re ?"))try{C(!0),await(0,St.Nn)("ratingCriteria",e),await I()}catch(A){T("Erreur lors de la suppression")}finally{C(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id))}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("p",{children:"Aucun crit\xe8re d'\xe9valuation d\xe9fini"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Ajouter un crit\xe8re"})]})]}),(0,xt.jsxs)("section",{className:"ratings-section",children:[(0,xt.jsxs)("h2",{children:["\xc9valuations - ",new Date(v).toLocaleDateString("fr-FR",{year:"numeric",month:"long"})]}),p?(0,xt.jsx)("div",{className:"employee-ratings",children:(()=>{const e=t.find(e=>e.id===p),n=V(p,v),s=z(p);return(0,xt.jsxs)("div",{className:"employee-rating-card",children:[(0,xt.jsxs)("div",{className:"employee-info",children:[(0,xt.jsx)("h3",{children:null===e||void 0===e?void 0:e.fullName}),(0,xt.jsxs)("div",{className:"rating-summary",children:[(0,xt.jsxs)("div",{className:"current-rating",children:[(0,xt.jsx)("span",{children:"Note du mois:"}),(0,xt.jsxs)("span",{className:"rating-score",style:{color:B((null===n||void 0===n?void 0:n.totalScore)||0)},children:[n?n.totalScore.toFixed(1):"Non not\xe9","/20"]})]}),(0,xt.jsxs)("div",{className:"average-rating",children:[(0,xt.jsx)("span",{children:"Moyenne g\xe9n\xe9rale:"}),(0,xt.jsxs)("span",{className:"rating-score",style:{color:B(s)},children:[s.toFixed(1),"/20"]})]})]})]}),n&&(0,xt.jsxs)("div",{className:"rating-details",children:[(0,xt.jsxs)("h4",{children:["D\xe9tails de l'\xe9valuation - ",new Date(v).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]}),r.map(e=>(0,xt.jsxs)("div",{className:"rating-detail-row",children:[(0,xt.jsxs)("span",{children:[e.name,":"]}),(0,xt.jsxs)("span",{style:{color:B(n.ratings[e.id]||0)},children:[(n.ratings[e.id]||0).toFixed(1),"/20"]})]},e.id)),n.comments&&(0,xt.jsxs)("div",{className:"rating-comments",children:[(0,xt.jsx)("h5",{children:"Commentaires:"}),(0,xt.jsx)("p",{children:n.comments})]}),(0,xt.jsxs)("div",{className:"rating-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>R(n),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>M(n.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]}),b.length>0&&(0,xt.jsxs)("div",{className:"rating-history",children:[(0,xt.jsx)("h4",{children:"Historique des \xe9valuations"}),(0,xt.jsx)("div",{className:"history-grid",children:b.map(e=>(0,xt.jsxs)("div",{className:"history-card",children:[(0,xt.jsxs)("div",{className:"history-header",children:[(0,xt.jsx)("h5",{children:new Date(e.month).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),(0,xt.jsxs)("span",{className:"history-total-score",style:{color:B(e.totalScore)},children:[e.totalScore.toFixed(1),"/20"]})]}),(0,xt.jsx)("div",{className:"history-criteria",children:r.map(t=>(0,xt.jsxs)("div",{className:"history-criteria-row",children:[(0,xt.jsxs)("span",{className:"criteria-name",children:[t.name,":"]}),(0,xt.jsxs)("span",{className:"criteria-score",style:{color:B(e.ratings[t.id]||0)},children:[(e.ratings[t.id]||0).toFixed(1),"/20"]})]},t.id))}),e.comments&&(0,xt.jsxs)("div",{className:"history-comments",children:[(0,xt.jsx)("strong",{children:"Commentaires:"})," ",e.comments]}),(0,xt.jsxs)("div",{className:"history-actions",children:[(0,xt.jsx)("button",{className:"edit-button small",onClick:()=>R(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button small",onClick:()=>M(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id))})]})]})})()}):(0,xt.jsx)("div",{className:"all-employees-ratings",children:t.map(e=>{const t=V(e.id,v),n=z(e.id);return(0,xt.jsxs)("div",{className:"employee-summary-card",children:[(0,xt.jsxs)("div",{className:"employee-header",children:[(0,xt.jsx)("h3",{children:e.fullName}),(0,xt.jsx)("span",{className:"employee-position",children:e.position})]}),(0,xt.jsxs)("div",{className:"rating-summary",children:[(0,xt.jsxs)("div",{className:"rating-item",children:[(0,xt.jsx)("span",{children:"Note du mois:"}),(0,xt.jsxs)("span",{className:"rating-score",style:{color:B((null===t||void 0===t?void 0:t.totalScore)||0)},children:[t?t.totalScore.toFixed(1):"Non not\xe9","/20"]})]}),(0,xt.jsxs)("div",{className:"rating-item",children:[(0,xt.jsx)("span",{children:"Moyenne g\xe9n\xe9rale:"}),(0,xt.jsxs)("span",{className:"rating-score",style:{color:B(n)},children:[n.toFixed(1),"/20"]})]}),(0,xt.jsx)("div",{className:"rating-status",children:(s=(null===t||void 0===t?void 0:t.totalScore)||n,s>=16?"Excellent":s>=12?"Bon":s>=8?"Passable":"Insuffisant")})]}),t&&(0,xt.jsxs)("div",{className:"criteria-scores",children:[(0,xt.jsxs)("h4",{children:["Notes par crit\xe8re (",new Date(v).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),"):"]}),(0,xt.jsx)("div",{className:"criteria-scores-grid",children:r.map(e=>(0,xt.jsxs)("div",{className:"criteria-score-item",children:[(0,xt.jsxs)("span",{className:"criteria-name",children:[e.name,":"]}),(0,xt.jsxs)("span",{className:"criteria-score",style:{color:B(t.ratings[e.id]||0)},children:[(t.ratings[e.id]||0).toFixed(1),"/20"]})]},e.id))}),t.comments&&(0,xt.jsxs)("div",{className:"monthly-comments",children:[(0,xt.jsx)("strong",{children:"Commentaires:"})," ",t.comments]})]}),(0,xt.jsxs)("div",{className:"employee-quick-actions",children:[(0,xt.jsx)("button",{className:"view-details-button",onClick:()=>g(e.id),children:"\ud83d\udc41\ufe0f Voir d\xe9tails"}),t&&(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("button",{className:"edit-button small",onClick:()=>R(t),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button small",onClick:()=>M(t.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]})]},e.id);var s})})]})]})]})},ec=()=>{var e;const t=de(),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)((new Date).toISOString().substring(0,7)),[m,p]=(0,s.useState)(""),[g,v]=(0,s.useState)("salaries"),[y,b]=(0,s.useState)({employeeId:"",month:(new Date).toISOString().substring(0,7),baseSalary:"",bonuses:0,deductions:0,overtime:0,overtimeRate:0,notes:""}),[x,w]=(0,s.useState)(!1),[_,S]=(0,s.useState)("");(0,s.useEffect)(()=>{k()},[h,m]);const k=async()=>{try{w(!0);const[e,t]=await Promise.all([(0,St.gP)("employees"),(0,St.gP)("advances")]);r(e.filter(e=>"active"===e.status));const n=[{field:"month",operator:"==",value:h}];m&&n.push({field:"employeeId",operator:"==",value:m});const s=await(0,St.Nr)("salaries",n);o(s);const i=t.filter(e=>{var t,n;const s=((null===(t=e.requestedDate)||void 0===t?void 0:t.substring(0,7))||(null===(n=e.requestDate)||void 0===n?void 0:n.substring(0,7)))===h,r=!m||e.employeeId===m;return s&&r});c(i)}catch(_){S("Erreur lors du chargement des donn\xe9es")}finally{w(!1)}},N=e=>{const{name:t,value:s,type:r}=e.target;if("employeeId"===t&&s){const e=n.find(e=>e.id===s);b((0,a.A)((0,a.A)({},y),{},{[t]:s,baseSalary:(null===e||void 0===e?void 0:e.salary)||0}))}else b((0,a.A)((0,a.A)({},y),{},{[t]:"number"===r?parseFloat(s)||0:s}))},j=e=>{const t=parseFloat(e.baseSalary)||0,n=parseFloat(e.bonuses)||0,s=parseFloat(e.deductions)||0;return t+n+(parseFloat(e.overtime)||0)*(parseFloat(e.overtimeRate)||0)-s},E=async(e,t)=>{try{w(!0);const a=l.find(t=>t.id===e);if(!a)return void S("Avance non trouv\xe9e");if(await(0,St.lU)("advances",e,{status:t,processedDate:(new Date).toISOString(),processedBy:"admin"}),"approved"===t){var s;const e=null===(s=a.requestedDate)||void 0===s?void 0:s.substring(0,7);console.log("Approbation avance - mois:",e,"employeeId:",a.employeeId,"montant:",a.amount);let t=i.find(t=>t.employeeId===a.employeeId&&t.month===e);if(console.log("Salaire existant trouv\xe9:",t),t){const e=t.netSalary,n=t.netSalary-a.amount;console.log("Mise \xe0 jour salaire existant - ancien:",e,"nouveau:",n),await(0,St.lU)("salaries",t.id,{netSalary:n,lastUpdated:(new Date).toISOString()}),console.log("Salaire mis \xe0 jour")}else{const t=n.find(e=>e.id===a.employeeId);if(console.log("Employ\xe9 trouv\xe9:",t),t&&t.salary){const n={employeeId:a.employeeId,month:e,baseSalary:t.salary,bonuses:0,deductions:0,overtime:0,overtimeRate:0,netSalary:t.salary-a.amount,paymentStatus:"pending",notes:"Salaire automatique avec avance de ".concat(a.amount," Ar d\xe9duite")};console.log("Cr\xe9ation nouveau salaire:",n),await(0,St.createDocument)("salaries",n),console.log("Nouveau salaire cr\xe9\xe9 avec avance d\xe9duite")}}}if("rejected"===t){var r;const e=null===(r=a.requestedDate)||void 0===r?void 0:r.substring(0,7),t=i.find(t=>t.employeeId===a.employeeId&&t.month===e);if(t&&"approved"===a.status){const e=t.netSalary+a.amount;await(0,St.lU)("salaries",t.id,{netSalary:e,lastUpdated:(new Date).toISOString()})}}await k()}catch(_){S("Erreur lors de la mise \xe0 jour de la demande")}finally{w(!1)}},C=async(e,t)=>{try{w(!0),await(0,St.lU)("salaries",e,{paymentStatus:t,paymentDate:"paid"===t?(new Date).toISOString():null}),await k()}catch(_){S("Erreur lors de la mise \xe0 jour du statut de paiement")}finally{w(!1)}},A=()=>{b({employeeId:"",month:(new Date).toISOString().substring(0,7),baseSalary:"",bonuses:0,deductions:0,overtime:0,overtimeRate:0,notes:""}),d(!1)},T=e=>n.find(t=>t.id===e),I=e=>{switch(e){case"approved":case"paid":return"var(--accent-green)";case"pending":return"#ff9800";case"rejected":return"#c62828";default:return"var(--primary-gray)"}},D=e=>{switch(e){case"approved":return"Approuv\xe9e";case"pending":return"En attente";case"rejected":return"Rejet\xe9e";case"paid":return"Pay\xe9";default:return"Inconnu"}};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>t("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des Salaires"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Nouveau Salaire"})]}),_&&(0,xt.jsx)("div",{className:"error-message",children:_}),(0,xt.jsxs)("div",{className:"filters",children:[(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Mois:"}),(0,xt.jsx)("input",{type:"month",value:h,onChange:e=>f(e.target.value),className:"date-input"})]}),(0,xt.jsxs)("div",{className:"filter-group",children:[(0,xt.jsx)("label",{children:"Employ\xe9:"}),(0,xt.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"employee-filter",children:[(0,xt.jsx)("option",{value:"",children:"Tous les employ\xe9s"}),n.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.fullName},e.id))]})]})]}),(0,xt.jsxs)("div",{className:"stats-cards",children:[(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Total Salaires du Mois"}),(0,xt.jsxs)("div",{className:"stat-number",children:[i.reduce((e,t)=>e+(t.netSalary||0),0).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Avances en Attente"}),(0,xt.jsxs)("div",{className:"stat-number",children:[l.filter(e=>"pending"===e.status).reduce((e,t)=>e+(t.amount||0),0).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Employ\xe9s Actifs"}),(0,xt.jsx)("div",{className:"stat-number",children:n.length})]})]}),u&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal large",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsx)("h2",{children:"Configurer Salaire"}),(0,xt.jsx)("button",{className:"close-button",onClick:A,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),w(!0),S("");try{const e=j(y),t=(0,a.A)((0,a.A)({},y),{},{baseSalary:parseFloat(y.baseSalary)||0,bonuses:parseFloat(y.bonuses)||0,deductions:parseFloat(y.deductions)||0,overtime:parseFloat(y.overtime)||0,overtimeRate:parseFloat(y.overtimeRate)||0,netSalary:e,paymentStatus:"pending"}),n=i.find(e=>e.employeeId===y.employeeId&&e.month===y.month);n?await(0,St.lU)("salaries",n.id,t):await(0,St.createDocument)("salaries",t),await k(),A()}catch(_){S("Erreur lors de la sauvegarde du salaire")}finally{w(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"employeeId",children:"Employ\xe9 *"}),(0,xt.jsxs)("select",{id:"employeeId",name:"employeeId",value:y.employeeId,onChange:N,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),n.map(e=>(0,xt.jsxs)("option",{value:e.id,children:[e.fullName," - ",e.position]},e.id))]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"month",children:"Mois *"}),(0,xt.jsx)("input",{type:"month",id:"month",name:"month",value:y.month,onChange:N,required:!0})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"baseSalary",children:"Salaire de base (Ar) *"}),(0,xt.jsx)("input",{type:"number",id:"baseSalary",name:"baseSalary",value:y.baseSalary,onChange:N,required:!0,step:"0.01",min:"0",placeholder:"0.00"}),y.employeeId&&(0,xt.jsxs)("small",{className:"form-help",children:["Salaire de base de l'employ\xe9: ",(null===(e=n.find(e=>e.id===y.employeeId))||void 0===e?void 0:e.salary)||0," Ar/mois",(0,xt.jsx)("br",{}),(0,xt.jsx)("em",{children:"Vous pouvez modifier ce montant pour ce mois sp\xe9cifique"})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"bonuses",children:"Primes (Ar)"}),(0,xt.jsx)("input",{type:"number",id:"bonuses",name:"bonuses",value:y.bonuses,onChange:N,step:"0.01",min:"0",placeholder:"0.00"})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"overtime",children:"Heures suppl\xe9mentaires"}),(0,xt.jsx)("input",{type:"number",id:"overtime",name:"overtime",value:y.overtime,onChange:N,step:"0.5",min:"0",placeholder:"0"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"overtimeRate",children:"Taux horaire supp. (Ar)"}),(0,xt.jsx)("input",{type:"number",id:"overtimeRate",name:"overtimeRate",value:y.overtimeRate,onChange:N,step:"0.01",min:"0",placeholder:"0.00"})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"deductions",children:"D\xe9ductions (Ar)"}),(0,xt.jsx)("input",{type:"number",id:"deductions",name:"deductions",value:y.deductions,onChange:N,step:"0.01",min:"0",placeholder:"0.00"})]}),(0,xt.jsxs)("div",{className:"salary-preview",children:[(0,xt.jsx)("h3",{children:"Aper\xe7u du Salaire"}),(0,xt.jsxs)("div",{className:"salary-breakdown",children:[(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Salaire de base:"}),(0,xt.jsxs)("span",{children:[(parseFloat(y.baseSalary)||0).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Primes:"}),(0,xt.jsxs)("span",{children:["+",(parseFloat(y.bonuses)||0).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Heures suppl\xe9mentaires:"}),(0,xt.jsxs)("span",{children:["+",((parseFloat(y.overtime)||0)*(parseFloat(y.overtimeRate)||0)).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"D\xe9ductions:"}),(0,xt.jsxs)("span",{children:["-",(parseFloat(y.deductions)||0).toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row total",children:[(0,xt.jsx)("span",{children:"Salaire net:"}),(0,xt.jsxs)("span",{children:[j(y).toFixed(2)," Ar"]})]})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,xt.jsx)("textarea",{id:"notes",name:"notes",value:y.notes,onChange:N,placeholder:"Notes sur le salaire",rows:"3"})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:A,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:x,className:"save-button",children:x?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsxs)("div",{className:"tabs",children:[(0,xt.jsx)("button",{className:"tab ".concat("salaries"===g?"active":""),onClick:()=>v("salaries"),children:"Salaires"}),(0,xt.jsx)("button",{className:"tab ".concat("advances"===g?"active":""),onClick:()=>v("advances"),children:"Demandes d'Avance"})]}),(0,xt.jsxs)("main",{className:"admin-main",children:["salaries"===g&&(0,xt.jsxs)("section",{className:"salaries-section",children:[(0,xt.jsxs)("h2",{children:["Salaires - ",new Date(h).toLocaleDateString("fr-FR",{year:"numeric",month:"long"})]}),(0,xt.jsxs)("div",{className:"salaries-list",children:[(m?n.filter(e=>e.id===m):n).map(e=>{const t=i.find(t=>t.employeeId===e.id),n=((e,t)=>{const n=i.find(n=>n.employeeId===e&&n.month===t);if(n)return{amount:n.netSalary,source:"specific",details:n};const s=T(e);return{amount:(null===s||void 0===s?void 0:s.salary)||0,source:"base",details:{baseSalary:(null===s||void 0===s?void 0:s.salary)||0}}})(e.id,h);return(0,xt.jsxs)("div",{className:"salary-card",children:[(0,xt.jsxs)("div",{className:"salary-header",children:[(0,xt.jsxs)("div",{className:"employee-info",children:[(0,xt.jsx)("h3",{children:e.fullName}),(0,xt.jsx)("span",{className:"employee-position",children:e.position})]}),(0,xt.jsx)("div",{className:"salary-type",children:"specific"===n.source?(0,xt.jsx)("span",{className:"specific-salary",children:"Salaire personnalis\xe9"}):(0,xt.jsx)("span",{className:"base-salary",children:"Salaire de base"})}),t&&(0,xt.jsx)("div",{className:"payment-status",style:{backgroundColor:I(t.paymentStatus)},children:D(t.paymentStatus)})]}),(0,xt.jsxs)("div",{className:"salary-details",children:[(0,xt.jsx)("div",{className:"salary-breakdown",children:"specific"===n.source?(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Salaire de base (employ\xe9):"}),(0,xt.jsxs)("span",{children:[e.salary.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Salaire configur\xe9 ce mois:"}),(0,xt.jsxs)("span",{children:[t.baseSalary.toFixed(2)," Ar"]})]}),t.bonuses>0&&(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"Primes:"}),(0,xt.jsxs)("span",{children:["+",t.bonuses.toFixed(2)," Ar"]})]}),t.overtime>0&&(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsxs)("span",{children:["Heures supp. (",t.overtime,"h x ",t.overtimeRate,"Ar):"]}),(0,xt.jsxs)("span",{children:["+",(t.overtime*t.overtimeRate).toFixed(2)," Ar"]})]}),t.deductions>0&&(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{children:"D\xe9ductions:"}),(0,xt.jsxs)("span",{children:["-",t.deductions.toFixed(2)," Ar"]})]}),(()=>{const n=t.baseSalary+(t.bonuses||0)+(t.overtime||0)*(t.overtimeRate||0)-(t.deductions||0),s=l.filter(t=>{var n;return t.employeeId===e.id&&"approved"===t.status&&(null===(n=t.requestedDate)||void 0===n?void 0:n.substring(0,7))===h}).reduce((e,t)=>e+t.amount,0),r=n-s;return(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("div",{className:"breakdown-row subtotal",children:[(0,xt.jsx)("span",{children:"Salaire du mois (configur\xe9):"}),(0,xt.jsxs)("span",{children:[n.toFixed(2)," Ar"]})]}),s>0&&(0,xt.jsxs)("div",{className:"breakdown-row deduction",children:[(0,xt.jsx)("span",{children:"Avances approuv\xe9es du mois:"}),(0,xt.jsxs)("span",{children:["-",s.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row total",children:[(0,xt.jsx)("span",{children:"Salaire restant \xe0 payer:"}),(0,xt.jsxs)("span",{children:[r.toFixed(2)," Ar"]})]})]})})()]}):(()=>{const t=e.salary,n=l.filter(t=>{var n;return t.employeeId===e.id&&"approved"===t.status&&(null===(n=t.requestedDate)||void 0===n?void 0:n.substring(0,7))===h}).reduce((e,t)=>e+t.amount,0),s=t-n;return(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("div",{className:"breakdown-row subtotal",children:[(0,xt.jsx)("span",{children:"Salaire du mois (par d\xe9faut):"}),(0,xt.jsxs)("span",{children:[t.toFixed(2)," Ar"]})]}),n>0&&(0,xt.jsxs)("div",{className:"breakdown-row deduction",children:[(0,xt.jsx)("span",{children:"Avances approuv\xe9es du mois:"}),(0,xt.jsxs)("span",{children:["-",n.toFixed(2)," Ar"]})]}),(0,xt.jsxs)("div",{className:"breakdown-row total",children:[(0,xt.jsx)("span",{children:"Salaire restant \xe0 payer:"}),(0,xt.jsxs)("span",{children:[s.toFixed(2)," Ar"]})]})]})})()}),(null===t||void 0===t?void 0:t.notes)&&(0,xt.jsxs)("div",{className:"salary-notes",children:[(0,xt.jsx)("strong",{children:"Notes:"})," ",t.notes]})]}),(0,xt.jsxs)("div",{className:"salary-actions",children:[!t&&(0,xt.jsx)("button",{className:"configure-button",onClick:()=>{b((0,a.A)((0,a.A)({},y),{},{employeeId:e.id,month:h,baseSalary:e.salary||0})),d(!0)},children:"\u2699\ufe0f Configurer salaire"}),t&&"pending"===t.paymentStatus&&(0,xt.jsx)("button",{className:"approve-button",onClick:()=>C(t.id,"paid"),children:"\u2705 Marquer comme pay\xe9"}),t&&"paid"===t.paymentStatus&&(0,xt.jsx)("button",{className:"revert-button",onClick:()=>C(t.id,"pending"),children:"\u21a9\ufe0f Annuler paiement"})]})]},e.id)}),0===i.length&&!x&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucun salaire configur\xe9"}),(0,xt.jsx)("p",{children:"Configurez les salaires pour le mois s\xe9lectionn\xe9"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Configurer salaire"})]})]})]}),"advances"===g&&(0,xt.jsxs)("section",{className:"advances-section",children:[(0,xt.jsx)("h2",{children:"Demandes d'Avance"}),(0,xt.jsxs)("div",{className:"advances-list",children:[l.map(e=>{var t;const n=T(e.employeeId);return(0,xt.jsxs)("div",{className:"advance-card",children:[(0,xt.jsxs)("div",{className:"advance-header",children:[(0,xt.jsxs)("div",{className:"employee-info",children:[(0,xt.jsx)("h3",{children:(null===n||void 0===n?void 0:n.fullName)||"Employ\xe9 inconnu"}),(0,xt.jsxs)("span",{className:"advance-date",children:["Demand\xe9 le ",new Date(e.requestDate||(null===(t=e.createdAt)||void 0===t?void 0:t.toDate())).toLocaleDateString("fr-FR")]})]}),(0,xt.jsx)("div",{className:"advance-status",style:{backgroundColor:I(e.status)},children:D(e.status)})]}),(0,xt.jsxs)("div",{className:"advance-details",children:[(0,xt.jsxs)("div",{className:"advance-amount",children:[(0,xt.jsx)("span",{children:"Montant demand\xe9:"}),(0,xt.jsxs)("span",{className:"amount",children:[e.amount.toFixed(2)," Ar"]})]}),e.reason&&(0,xt.jsxs)("div",{className:"advance-reason",children:[(0,xt.jsx)("strong",{children:"Raison:"})," ",e.reason]}),"approved"===e.status&&e.processedDate&&(0,xt.jsxs)("div",{className:"advance-processed",children:["Approuv\xe9 le ",new Date(e.processedDate).toLocaleDateString("fr-FR")]})]}),"pending"===e.status&&(0,xt.jsxs)("div",{className:"advance-actions",children:[(0,xt.jsx)("button",{className:"approve-button",onClick:()=>E(e.id,"approved"),children:"\u2705 Approuver"}),(0,xt.jsx)("button",{className:"reject-button",onClick:()=>E(e.id,"rejected"),children:"\u274c Rejeter"})]})]},e.id)}),0===l.length&&!x&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune demande d'avance"}),(0,xt.jsx)("p",{children:"Les demandes d'avance appara\xeetront ici"})]})]})]})]})]})},tc=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[v,y]=(0,s.useState)("requests"),[b,x]=(0,s.useState)({employeeId:"",year:(new Date).getFullYear(),totalDays:25,usedDays:0,remainingDays:25}),[w,_]=(0,s.useState)({employeeId:"",startDate:"",endDate:"",startPeriod:"morning",endPeriod:"afternoon",type:"vacation",reason:"",status:"pending",days:0}),[S,k]=(0,s.useState)(!1),[N,j]=(0,s.useState)(""),E=[{value:"vacation",label:"Cong\xe9s pay\xe9s"},{value:"sick",label:"Arr\xeat maladie"},{value:"personal",label:"Cong\xe9 personnel"},{value:"maternity",label:"Cong\xe9 maternit\xe9"},{value:"paternity",label:"Cong\xe9 paternit\xe9"},{value:"unpaid",label:"Cong\xe9 sans solde"}];(0,s.useEffect)(()=>{C()},[]);const C=async()=>{try{k(!0);const[e,t,s]=await Promise.all([(0,St.gP)("employees"),(0,St.gP)("leaves"),(0,St.gP)("leaveBalances")]);n(e),i(t),l(s)}catch(N){j("Erreur lors du chargement des donn\xe9es")}finally{k(!1)}},A=(e,t,n,s)=>{if(!e||!t)return 0;const r=new Date(e),i=new Date(t);if(r.toDateString()===i.toDateString())return"morning"===n&&"afternoon"===s?1:.5;const a=i.getTime()-r.getTime(),o=Math.floor(a/864e5);let l=0;return l+="morning"===n?1:.5,o>1&&(l+=o-1),l+="afternoon"===s?1:.5,l},T=e=>{const{name:t,value:n}=e.target;x(e=>{const s=(0,a.A)((0,a.A)({},e),{},{[t]:n});if("totalDays"===t||"usedDays"===t){const e=parseFloat(s.totalDays)||0,t=parseFloat(s.usedDays)||0;s.remainingDays=Math.max(0,e-t)}return s})},I=e=>{const{name:t,value:n}=e.target;_(e=>{const s=(0,a.A)((0,a.A)({},e),{},{[t]:n});return"startDate"!==t&&"endDate"!==t&&"startPeriod"!==t&&"endPeriod"!==t||(s.days=A(s.startDate,s.endDate,s.startPeriod,s.endPeriod)),s})},D=async(e,t)=>{try{k(!0);const n=r.find(t=>t.id===e);if(await(0,St.lU)("leaves",e,{status:t,reviewDate:(new Date).toISOString()}),"approved"===t&&"vacation"===n.type){const e=o.find(e=>e.employeeId===n.employeeId&&e.year===new Date(n.startDate).getFullYear());if(e){const t=e.usedDays+n.days,s=e.totalDays-t;await(0,St.lU)("leaveBalances",e.id,{usedDays:t,remainingDays:Math.max(0,s)})}}await C()}catch(N){j("Erreur lors de la mise \xe0 jour")}finally{k(!1)}},P=()=>{x({employeeId:"",year:(new Date).getFullYear(),totalDays:25,usedDays:0,remainingDays:25}),m(null),u(!1)},R=()=>{_({employeeId:"",startDate:"",endDate:"",startPeriod:"morning",endPeriod:"afternoon",type:"vacation",reason:"",status:"pending",days:0}),g(null),h(!1)},M=e=>{const n=t.find(t=>t.id===e);return n?n.fullName||"".concat(n.firstName," ").concat(n.lastName):"Employ\xe9 inconnu"},O=e=>{const t=E.find(t=>t.value===e);return t?t.label:e},L=e=>"morning"===e?"Matin":"Apr\xe8s-midi",F=(e,t,n,s)=>{const r=new Date(e).toLocaleDateString("fr-FR"),i=new Date(t).toLocaleDateString("fr-FR");return e===t?"morning"===n&&"afternoon"===s?"".concat(r," (journ\xe9e compl\xe8te)"):"".concat(r," (").concat(L(n===s?n:"morning"),")"):"".concat(r," (").concat(L(n),") - ").concat(i," (").concat(L(s),")")},V=e=>{switch(e){case"approved":return"var(--accent-green)";case"rejected":return"#c62828";case"pending":return"#ff9800";default:return"var(--primary-gray)"}},z=e=>{switch(e){case"approved":return"Approuv\xe9";case"rejected":return"Rejet\xe9";case"pending":return"En attente";default:return"Inconnu"}},U=e=>r.filter(t=>t.status===e);return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Gestion des Cong\xe9s"}),(0,xt.jsxs)("div",{className:"header-actions",children:[(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Solde Cong\xe9s"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>h(!0),children:"+ Demande Cong\xe9"})]})]}),N&&(0,xt.jsx)("div",{className:"error-message",children:N}),(0,xt.jsxs)("div",{className:"tabs",children:[(0,xt.jsxs)("button",{className:"tab ".concat("requests"===v?"active":""),onClick:()=>y("requests"),children:["Demandes de Cong\xe9s (",r.length,")"]}),(0,xt.jsxs)("button",{className:"tab ".concat("balances"===v?"active":""),onClick:()=>y("balances"),children:["Soldes Cong\xe9s (",o.length,")"]})]}),c&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[f?"Modifier":"Ajouter"," un Solde de Cong\xe9s"]}),(0,xt.jsx)("button",{className:"close-button",onClick:P,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),k(!0),j("");try{const e=(0,a.A)((0,a.A)({},b),{},{totalDays:parseFloat(b.totalDays)||0,usedDays:parseFloat(b.usedDays)||0,remainingDays:parseFloat(b.remainingDays)||0,year:parseInt(b.year)});f?await(0,St.lU)("leaveBalances",f.id,e):await(0,St.createDocument)("leaveBalances",e),await C(),P()}catch(N){j("Erreur lors de la sauvegarde")}finally{k(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"employeeId",children:"Employ\xe9 *"}),(0,xt.jsxs)("select",{id:"employeeId",name:"employeeId",value:b.employeeId,onChange:T,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),t.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.fullName||"".concat(e.firstName," ").concat(e.lastName)},e.id))]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"year",children:"Ann\xe9e *"}),(0,xt.jsx)("input",{type:"number",id:"year",name:"year",value:b.year,onChange:T,min:"2020",max:"2030",required:!0})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"totalDays",children:"Total Jours *"}),(0,xt.jsx)("input",{type:"number",id:"totalDays",name:"totalDays",value:b.totalDays,onChange:T,min:"0",step:"0.5",required:!0})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"usedDays",children:"Jours Utilis\xe9s"}),(0,xt.jsx)("input",{type:"number",id:"usedDays",name:"usedDays",value:b.usedDays,onChange:T,min:"0",step:"0.5"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"remainingDays",children:"Jours Restants"}),(0,xt.jsx)("input",{type:"number",id:"remainingDays",name:"remainingDays",value:b.remainingDays,readOnly:!0,className:"readonly"})]})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:P,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:S,className:"save-button",children:S?"Sauvegarde...":"Sauvegarder"})]})]})]})}),d&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsxs)("h2",{children:[p?"Modifier":"Ajouter"," une Demande de Cong\xe9"]}),(0,xt.jsx)("button",{className:"close-button",onClick:R,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),k(!0),j("");try{const e=(0,a.A)((0,a.A)({},w),{},{days:A(w.startDate,w.endDate,w.startPeriod,w.endPeriod),requestDate:(new Date).toISOString()});p?await(0,St.lU)("leaves",p.id,e):await(0,St.createDocument)("leaves",e),await C(),R()}catch(N){j("Erreur lors de la sauvegarde")}finally{k(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"employeeId",children:"Employ\xe9 *"}),(0,xt.jsxs)("select",{id:"employeeId",name:"employeeId",value:w.employeeId,onChange:I,required:!0,children:[(0,xt.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),t.map(e=>(0,xt.jsx)("option",{value:e.id,children:e.fullName||"".concat(e.firstName," ").concat(e.lastName)},e.id))]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"startDate",children:"Date de D\xe9but *"}),(0,xt.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:w.startDate,onChange:I,required:!0})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"startPeriod",children:"P\xe9riode de D\xe9but *"}),(0,xt.jsxs)("select",{id:"startPeriod",name:"startPeriod",value:w.startPeriod,onChange:I,required:!0,children:[(0,xt.jsx)("option",{value:"morning",children:"Matin"}),(0,xt.jsx)("option",{value:"afternoon",children:"Apr\xe8s-midi"})]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"endDate",children:"Date de Fin *"}),(0,xt.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:w.endDate,onChange:I,required:!0})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"endPeriod",children:"P\xe9riode de Fin *"}),(0,xt.jsxs)("select",{id:"endPeriod",name:"endPeriod",value:w.endPeriod,onChange:I,required:!0,children:[(0,xt.jsx)("option",{value:"morning",children:"Matin"}),(0,xt.jsx)("option",{value:"afternoon",children:"Apr\xe8s-midi"})]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"type",children:"Type de Cong\xe9 *"}),(0,xt.jsx)("select",{id:"type",name:"type",value:w.type,onChange:I,required:!0,children:E.map(e=>(0,xt.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"days",children:"Nombre de Jours"}),(0,xt.jsx)("input",{type:"number",id:"days",name:"days",value:w.days,readOnly:!0,className:"readonly"})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"reason",children:"Motif"}),(0,xt.jsx)("textarea",{id:"reason",name:"reason",value:w.reason,onChange:I,rows:"3",placeholder:"Motif de la demande de cong\xe9"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,xt.jsxs)("select",{id:"status",name:"status",value:w.status,onChange:I,children:[(0,xt.jsx)("option",{value:"pending",children:"En attente"}),(0,xt.jsx)("option",{value:"approved",children:"Approuv\xe9"}),(0,xt.jsx)("option",{value:"rejected",children:"Rejet\xe9"})]})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:R,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:S,className:"save-button",children:S?"Sauvegarde...":"Sauvegarder"})]})]})]})}),(0,xt.jsxs)("main",{className:"admin-main",children:["requests"===v&&(0,xt.jsxs)("div",{className:"leaves-section",children:[(0,xt.jsxs)("div",{className:"leave-stats",children:[(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"En Attente"}),(0,xt.jsx)("div",{className:"stat-number",children:U("pending").length})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Approuv\xe9es"}),(0,xt.jsx)("div",{className:"stat-number",children:U("approved").length})]}),(0,xt.jsxs)("div",{className:"stat-card",children:[(0,xt.jsx)("h3",{children:"Rejet\xe9es"}),(0,xt.jsx)("div",{className:"stat-number",children:U("rejected").length})]})]}),S&&0===r.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des demandes..."}):(0,xt.jsxs)("div",{className:"cards-grid",children:[r.map(e=>(0,xt.jsxs)("div",{className:"card",children:[(0,xt.jsxs)("div",{className:"card-header",children:[(0,xt.jsx)("h3",{children:M(e.employeeId)}),(0,xt.jsx)("div",{className:"status-badge",style:{backgroundColor:V(e.status)},children:z(e.status)})]}),(0,xt.jsxs)("div",{className:"card-content",children:[(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Type:"}),(0,xt.jsx)("span",{children:O(e.type)})]}),(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"P\xe9riode:"}),(0,xt.jsx)("span",{children:F(e.startDate,e.endDate,e.startPeriod||"morning",e.endPeriod||"afternoon")})]}),(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Dur\xe9e:"}),(0,xt.jsxs)("span",{children:[e.days," jour",e.days>1?"s":""]})]}),e.reason&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Motif:"}),(0,xt.jsx)("span",{children:e.reason})]}),e.requestDate&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{children:"Demand\xe9 le:"}),(0,xt.jsx)("span",{children:new Date(e.requestDate).toLocaleDateString("fr-FR")})]})]}),(0,xt.jsxs)("div",{className:"card-actions",children:["pending"===e.status&&(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("button",{className:"approve-button",onClick:()=>D(e.id,"approved"),children:"\u2713 Approuver"}),(0,xt.jsx)("button",{className:"reject-button",onClick:()=>D(e.id,"rejected"),children:"\u2717 Rejeter"})]}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette demande ?"))try{k(!0),await(0,St.Nn)("leaves",e),await C()}catch(N){j("Erreur lors de la suppression")}finally{k(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)),0===r.length&&!S&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune demande de cong\xe9"}),(0,xt.jsx)("p",{children:"Les demandes de cong\xe9s appara\xeetront ici"})]})]})]}),"balances"===v&&(0,xt.jsx)("div",{className:"balances-section",children:S&&0===o.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des soldes..."}):(0,xt.jsxs)("div",{className:"cards-grid",children:[o.map(e=>(0,xt.jsxs)("div",{className:"card",children:[(0,xt.jsxs)("div",{className:"card-header",children:[(0,xt.jsx)("h3",{children:M(e.employeeId)}),(0,xt.jsx)("div",{className:"year-badge",children:e.year})]}),(0,xt.jsxs)("div",{className:"card-content",children:[(0,xt.jsxs)("div",{className:"balance-summary",children:[(0,xt.jsxs)("div",{className:"balance-item",children:[(0,xt.jsx)("span",{className:"balance-label",children:"Total:"}),(0,xt.jsxs)("span",{className:"balance-value",children:[e.totalDays," jours"]})]}),(0,xt.jsxs)("div",{className:"balance-item",children:[(0,xt.jsx)("span",{className:"balance-label",children:"Utilis\xe9s:"}),(0,xt.jsxs)("span",{className:"balance-value used",children:[e.usedDays," jours"]})]}),(0,xt.jsxs)("div",{className:"balance-item",children:[(0,xt.jsx)("span",{className:"balance-label",children:"Restants:"}),(0,xt.jsxs)("span",{className:"balance-value remaining",children:[e.remainingDays," jours"]})]})]}),(0,xt.jsx)("div",{className:"progress-bar",children:(0,xt.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.usedDays/e.totalDays*100,"%")}})})]}),(0,xt.jsxs)("div",{className:"card-actions",children:[(0,xt.jsx)("button",{className:"edit-button",onClick:()=>(e=>{m(e),x({employeeId:e.employeeId,year:e.year,totalDays:e.totalDays,usedDays:e.usedDays,remainingDays:e.remainingDays}),u(!0)})(e),children:"\u270f\ufe0f Modifier"}),(0,xt.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce solde de cong\xe9s ?"))try{k(!0),await(0,St.Nn)("leaveBalances",e),await C()}catch(N){j("Erreur lors de la suppression")}finally{k(!1)}})(e.id),children:"\ud83d\uddd1\ufe0f Supprimer"})]})]},e.id)),0===o.length&&!S&&(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucun solde de cong\xe9s"}),(0,xt.jsx)("p",{children:"Commencez par ajouter des soldes de cong\xe9s pour vos employ\xe9s"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>u(!0),children:"+ Ajouter un solde"})]})]})})]})]})};var nc=n(823),sc=n(227);const rc=()=>{const e=de(),[t,n]=(0,s.useState)("admin@scandalebouffe.com"),[r,i]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[f,m]=(0,s.useState)("");(0,s.useEffect)(()=>{p();const e=sc.j2.onAuthStateChanged(e=>{l(e),console.log("Auth state changed:",e?e.email:"No user")});return()=>e()},[]);const p=async()=>{try{u(!0);const e=localStorage.getItem("userEmail")||"admin@scandalebouffe.com",t=await(0,St.ht)(e);t&&n(t.email)}catch(d){h("Erreur lors du chargement du compte")}finally{u(!1)}},g=e=>{i((0,a.A)((0,a.A)({},r),{},{[e.target.name]:e.target.value}))};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("header",{className:"admin-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/admin/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Param\xe8tres du Compte"}),(0,xt.jsx)("div",{className:"user-info",children:t})]}),d&&(0,xt.jsx)("div",{className:"error-message",children:d}),f&&(0,xt.jsx)("div",{className:"success-message",children:f}),(0,xt.jsx)("main",{className:"admin-main",children:(0,xt.jsx)("div",{className:"profile-container",children:(0,xt.jsxs)("div",{className:"password-card",children:[(0,xt.jsx)("h3",{children:"Changer le Mot de Passe"}),(0,xt.jsx)("p",{className:"security-note",children:"Pour des raisons de s\xe9curit\xe9, veuillez entrer votre mot de passe actuel avant de d\xe9finir un nouveau mot de passe."}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u(!0),h(""),m(""),!o)return h("Utilisateur non authentifi\xe9"),void u(!1);if(r.newPassword!==r.confirmPassword)return h("Les nouveaux mots de passe ne correspondent pas"),void u(!1);if(r.newPassword.length<6)return h("Le nouveau mot de passe doit contenir au moins 6 caract\xe8res"),void u(!1);try{const e=nc.IX.credential(o.email,r.currentPassword);await(0,nc.kZ)(o,e),await(0,nc.f3)(o,r.newPassword);const t=await(0,St.Nr)("adminAccount",[{field:"role",operator:"==",value:"admin"}]),n={lastPasswordChange:(new Date).toISOString()};t.length>0&&await(0,St.lU)("adminAccount",t[0].id,(0,a.A)((0,a.A)({},t[0]),n)),m("Mot de passe mis \xe0 jour avec succ\xe8s"),i({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>m(""),3e3)}catch(d){console.error("Erreur mise \xe0 jour mot de passe:",d),"auth/wrong-password"===d.code?h("Mot de passe actuel incorrect"):"auth/weak-password"===d.code?h("Le nouveau mot de passe est trop faible"):"auth/requires-recent-login"===d.code?h("Veuillez vous reconnecter pour modifier votre mot de passe"):h("Erreur lors de la mise \xe0 jour du mot de passe: "+d.message)}finally{u(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"currentPassword",children:"Mot de passe actuel *"}),(0,xt.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",value:r.currentPassword,onChange:g,required:!0,placeholder:"Entrez votre mot de passe actuel"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"newPassword",children:"Nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:r.newPassword,onChange:g,required:!0,minLength:"6",placeholder:"Entrez votre nouveau mot de passe"}),(0,xt.jsx)("small",{className:"form-help",children:"Le mot de passe doit contenir au moins 6 caract\xe8res"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:g,required:!0,placeholder:"Confirmez votre nouveau mot de passe"})]}),(0,xt.jsxs)("div",{className:"password-requirements",children:[(0,xt.jsx)("h4",{children:"Exigences du mot de passe :"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{className:r.newPassword.length>=6?"valid":"",children:"Au moins 6 caract\xe8res"}),(0,xt.jsx)("li",{className:r.newPassword===r.confirmPassword&&r.confirmPassword?"valid":"",children:"Les mots de passe correspondent"})]})]}),(0,xt.jsx)("div",{className:"form-actions",children:(0,xt.jsx)("button",{type:"submit",disabled:c,className:"save-button",children:c?"Mise \xe0 jour...":"Changer le Mot de Passe"})})]})]})})})]})},ic=()=>{const[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)("all"),[d,h]=(0,s.useState)({});(0,s.useEffect)(()=>{f()},[]);const f=async()=>{try{i(!0);const e=await(0,St.gP)("orders");e.sort((e,t)=>new Date(t.orderDate)-new Date(e.orderDate)),t(e)}catch(o){l("Erreur lors du chargement des commandes")}finally{i(!1)}},m=async function(t,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{h(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!0}));const i=e.find(e=>e.id===t);if(!i)return;let l={};switch(s){case"deliver":console.log("\ud83d\ude9a D\xe9but de la livraison pour la commande:",i.id),console.log("\ud83d\udccb Articles \xe0 traiter:",i.items),l={status:"delivered",deliveredAt:(new Date).toISOString(),deliveredBy:localStorage.getItem("userEmail")||"admin"},console.log("\ud83d\udce6 R\xe9duction du stock en cours...");const e=await async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=await(0,St.gP)("products"),s=await(0,St.gP)("stock");console.log("\ud83d\udd0d Produits disponibles:",n.map(e=>({id:e.id,name:e.name}))),console.log("\ud83d\udcca Stocks disponibles:",s.map(e=>({id:e.id,productId:e.productId,currentStock:e.currentStock}))),console.log("\ud83d\udce6 Articles de la commande:",e);const r=[];for(const i of e){console.log("\n\ud83d\udd0e Traitement de l'article: \"".concat(i.name,'"'));let e=n.find(e=>e.name===i.name);if(e||(e=n.find(e=>e.name.toLowerCase().trim()===i.name.toLowerCase().trim())),e||(e=n.find(e=>e.name.toLowerCase().includes(i.name.toLowerCase())||i.name.toLowerCase().includes(e.name.toLowerCase()))),e){console.log('\u2705 Produit trouv\xe9: "'.concat(e.name,'" (ID: ').concat(e.id,")"));const n=s.find(t=>t.productId===e.id);if(n){const s=Number(n.currentStock)||0,a=Number(i.quantity)||0;if(t){const t=Math.max(0,s-a),i=(Number(n.soldQuantity)||0)+a;console.log("\ud83d\udcca ".concat(e.name,": currentStock ").concat(s," - ").concat(a," = ").concat(t)),console.log("\ud83d\udcca ".concat(e.name,": soldQuantity ").concat(n.soldQuantity||0," + ").concat(a," = ").concat(i)),await(0,St.lU)("stock",n.id,{currentStock:t,soldQuantity:i,updatedAt:new Date}),r.push({productId:e.id,productName:e.name,stockId:n.id,oldCurrentStock:s,newCurrentStock:t,soldQuantity:i,change:-a})}else{const t=s+a,i=(Number(n.addedStock)||0)+a;console.log("\ud83d\udcca ".concat(e.name,": currentStock ").concat(s," + ").concat(a," = ").concat(t)),await(0,St.lU)("stock",n.id,{currentStock:t,addedStock:i,updatedAt:new Date}),r.push({productId:e.id,productName:e.name,stockId:n.id,oldCurrentStock:s,newCurrentStock:t,change:a})}}else console.warn('\u26a0\ufe0f Entr\xe9e de stock non trouv\xe9e pour le produit: "'.concat(e.name,'" (ID: ').concat(e.id,")"))}else console.warn('\u26a0\ufe0f Produit non trouv\xe9: "'.concat(i.name,'"')),console.log("\ud83d\udd0d Noms de produits disponibles:",n.map(e=>e.name))}return console.log("\u2705 Mises \xe0 jour du stock termin\xe9es:",r),r}catch(o){throw console.error("\u274c Erreur lors de la mise \xe0 jour du stock:",o),o}}(i.items,!0);l.stockUpdates=e,console.log("\ud83d\udcb0 Ajout aux ventes en cours..."),await(async e=>{try{const t={orderId:e.id,clientName:e.clientName,clientEmail:e.clientEmail,items:e.items,totalAmount:e.subtotal,saleDate:(new Date).toISOString(),originalOrderDate:e.orderDate};await(0,St.gP)("sales").then(async s=>{if(!s.find(t=>t.orderId===e.id)){const{createDocument:e}=await Promise.resolve().then(n.bind(n,22));await e("sales",t)}})}catch(o){throw console.error("Erreur lors de l'ajout aux ventes:",o),o}})(i),console.log("\u2705 Livraison termin\xe9e avec succ\xe8s");break;case"refuse":l={status:"cancelled",cancelledAt:(new Date).toISOString(),cancelledBy:localStorage.getItem("userEmail")||"admin",cancellationReason:r||"Refus\xe9e par l'administration"};break;case"pending":l={status:"pending",pendingReason:r||"En attente de traitement"};break;case"confirm":l={status:"confirmed",confirmedAt:(new Date).toISOString(),confirmedBy:localStorage.getItem("userEmail")||"admin"};break;case"prepare":l={status:"preparing",preparingAt:(new Date).toISOString()};break;case"ready":l={status:"ready",readyAt:(new Date).toISOString()};break;default:return}await(0,St.lU)("orders",t,l),await f()}catch(o){l("Erreur lors de l'action: ".concat(o.message))}finally{h(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!1}))}},p=(0,s.useCallback)(async e=>{try{const t=await(0,St.gP)("products"),n=await(0,St.gP)("stock"),s=[],r=[];for(const i of e){let e=t.find(e=>e.name===i.name);if(e||(e=t.find(e=>e.name.toLowerCase().trim()===i.name.toLowerCase().trim())),e||(e=t.find(e=>e.name.toLowerCase().includes(i.name.toLowerCase())||i.name.toLowerCase().includes(e.name.toLowerCase()))),e){const t=n.find(t=>t.productId===e.id);if(t){const n=Number(t.currentStock)||0,a=Number(i.quantity)||0;r.push({itemName:i.name,productName:e.name,productId:e.id,requested:a,available:n,sufficient:n>=a}),n<a&&s.push({name:i.name,productName:e.name,requested:a,available:n,shortage:a-n})}else s.push({name:i.name,productName:e.name,requested:i.quantity,available:0,shortage:i.quantity,noStockEntry:!0})}else s.push({name:i.name,requested:i.quantity,available:0,shortage:i.quantity,notFound:!0})}if(s.length>0){const e=s.map(e=>e.notFound?"".concat(e.name,": produit non trouv\xe9"):e.noStockEntry?"".concat(e.name,": entr\xe9e de stock manquante"):"".concat(e.name,": stock insuffisant (demand\xe9: ").concat(e.requested,", disponible: ").concat(e.available,")"));return{available:!1,message:"Stock insuffisant:\n".concat(e.join("\n")),details:s}}return{available:!0,message:"Stock suffisant pour tous les articles",details:r}}catch(o){return console.error("\u274c Erreur lors de la v\xe9rification du stock:",o),{available:!1,message:"Erreur lors de la v\xe9rification du stock: "+o.message}}},[]),g=e=>new Intl.NumberFormat("fr-FR").format(e)+" Ar",v=e=>{switch(e){case"pending":return"#f39c12";case"confirmed":return"#3498db";case"preparing":return"#9b59b6";case"ready":return"#2ecc71";case"delivered":return"#27ae60";case"cancelled":return"#e74c3c";default:return"#95a5a6"}},y=e=>{switch(e){case"pending":return"En attente";case"confirmed":return"Confirm\xe9e";case"preparing":return"En pr\xe9paration";case"ready":return"Pr\xeate";case"delivered":return"Livr\xe9e";case"cancelled":return"Annul\xe9e";default:return e}},b=e.filter(e=>"all"===c||e.status===c),x=e=>{let{order:t}=e;const[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[u,h]=(0,s.useState)({available:!0,message:""});(0,s.useEffect)(()=>{if("ready"===t.status){(async()=>{const e=await p(t.items);h(e)})()}},[t.status,t.items,t.id]);const f=e=>{c(e),r(!0)};return(0,xt.jsxs)("div",{className:"order-actions",children:["pending"===t.status&&(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("button",{className:"action-btn confirm-btn",onClick:()=>m(t.id,"confirm"),disabled:d[t.id],children:"\u2713 Confirmer"}),(0,xt.jsx)("button",{className:"action-btn refuse-btn",onClick:()=>f("refuse"),disabled:d[t.id],children:"\u2717 Refuser"})]}),"confirmed"===t.status&&(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("button",{className:"action-btn prepare-btn",onClick:()=>m(t.id,"prepare"),disabled:d[t.id],children:"\ud83d\udc68\u200d\ud83c\udf73 Pr\xe9parer"}),(0,xt.jsx)("button",{className:"action-btn refuse-btn",onClick:()=>f("refuse"),disabled:d[t.id],children:"\u2717 Annuler"})]}),"preparing"===t.status&&(0,xt.jsx)(xt.Fragment,{children:(0,xt.jsx)("button",{className:"action-btn ready-btn",onClick:()=>m(t.id,"ready"),disabled:d[t.id],children:"\u2705 Pr\xeat"})}),"ready"===t.status&&(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsx)("button",{className:"action-btn deliver-btn",onClick:async()=>{const e=await p(t.items);e.available?m(t.id,"deliver"):l("Impossible de livrer la commande:\n".concat(e.message))},disabled:d[t.id]||!u.available,children:"\ud83d\ude9a Livrer"}),!u.available&&(0,xt.jsxs)("div",{className:"stock-warning",children:[(0,xt.jsx)("span",{children:"\u26a0\ufe0f Stock insuffisant"}),(0,xt.jsx)("small",{title:u.message,children:"Voir d\xe9tails"})]}),u.available&&(0,xt.jsx)("div",{className:"stock-ok",children:(0,xt.jsx)("span",{children:"\u2705 Stock suffisant"})})]}),["delivered","cancelled"].includes(t.status)&&(0,xt.jsx)("span",{className:"status-final",children:"delivered"===t.status?"\u2705 Livr\xe9e":"\u274c Annul\xe9e"}),d[t.id]&&(0,xt.jsx)("span",{className:"loading-action",children:"\u23f3"}),n&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsx)("h3",{children:"refuse"===o?"Raison du refus":"Raison de la mise en attente"}),(0,xt.jsx)("textarea",{value:i,onChange:e=>a(e.target.value),placeholder:"Saisissez la raison...",rows:3}),(0,xt.jsxs)("div",{className:"modal-actions",children:[(0,xt.jsx)("button",{onClick:()=>r(!1),children:"Annuler"}),(0,xt.jsx)("button",{onClick:()=>{m(t.id,o,i),r(!1),a("")},className:"confirm-btn",children:"Confirmer"})]})]})})]})};return(0,xt.jsxs)("div",{className:"admin-container",children:[(0,xt.jsxs)("div",{className:"admin-header",children:[(0,xt.jsx)("h1",{children:"\ud83d\udccb Gestion des Commandes"}),(0,xt.jsxs)("div",{className:"order-filters",children:[(0,xt.jsxs)("select",{value:c,onChange:e=>u(e.target.value),children:[(0,xt.jsx)("option",{value:"all",children:"Toutes les commandes"}),(0,xt.jsx)("option",{value:"pending",children:"En attente"}),(0,xt.jsx)("option",{value:"confirmed",children:"Confirm\xe9es"}),(0,xt.jsx)("option",{value:"preparing",children:"En pr\xe9paration"}),(0,xt.jsx)("option",{value:"ready",children:"Pr\xeates"}),(0,xt.jsx)("option",{value:"delivered",children:"Livr\xe9es"}),(0,xt.jsx)("option",{value:"cancelled",children:"Annul\xe9es"})]}),(0,xt.jsx)("button",{onClick:f,className:"refresh-btn",children:"\ud83d\udd04 Actualiser"})]})]}),o&&(0,xt.jsx)("div",{className:"error-message",children:o}),(0,xt.jsx)("div",{className:"admin-content",children:r?(0,xt.jsx)("div",{className:"loading",children:"Chargement des commandes..."}):b.length>0?(0,xt.jsx)("div",{className:"orders-management-list",children:b.map(e=>{return(0,xt.jsxs)("div",{className:"order-management-card",children:[(0,xt.jsxs)("div",{className:"order-header",children:[(0,xt.jsxs)("div",{className:"order-info",children:[(0,xt.jsxs)("h3",{children:["#",e.id.slice(-8).toUpperCase()]}),(0,xt.jsx)("p",{className:"order-date",children:(t=e.orderDate,new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,xt.jsx)("div",{className:"status-badge",style:{backgroundColor:v(e.status)},children:y(e.status)})]}),(0,xt.jsx)("div",{className:"order-amount",children:(0,xt.jsx)("span",{className:"amount",children:g(e.subtotal)})})]}),(0,xt.jsxs)("div",{className:"client-info",children:[(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"Client:"})," ",e.clientName]}),(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"Email:"})," ",e.clientEmail]})]}),(0,xt.jsxs)("div",{className:"order-items",children:[(0,xt.jsx)("h4",{children:"Articles command\xe9s:"}),(0,xt.jsx)("ul",{children:e.items.map((e,t)=>(0,xt.jsxs)("li",{children:[e.quantity,"x ",e.name," - ",g(e.price*e.quantity)]},t))})]}),e.note&&(0,xt.jsxs)("div",{className:"order-note",children:[(0,xt.jsx)("strong",{children:"Note:"})," ",e.note]}),(0,xt.jsx)(x,{order:e})]},e.id);var t})}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h2",{children:"Aucune commande trouv\xe9e"}),(0,xt.jsx)("p",{children:"all"===c?"Aucune commande n'a \xe9t\xe9 pass\xe9e pour le moment":"Aucune commande ".concat(y(c).toLowerCase())})]})})]})},ac=()=>{var e,t;const n=de(),r=localStorage.getItem("userEmail"),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[m,p]=(0,s.useState)("");(0,s.useEffect)(()=>{g()},[]);const g=async()=>{try{if(d(!0),!r)return f("Session utilisateur non trouv\xe9e. Veuillez vous reconnecter."),void d(!1);console.log("Loading employee data for email:",r);const e=await(0,St.Nr)("employees",[{field:"email",operator:"==",value:r}]);if(console.log("Found employees:",e),e.length>0){const t=e[0];o(t),console.log("Employee loaded:",t)}else f("Employ\xe9 non trouv\xe9 avec cet email: "+r)}catch(h){console.error("Error loading employee data:",h),f("Erreur lors du chargement des donn\xe9es: "+h.message)}finally{d(!1)}},v=e=>{c((0,a.A)((0,a.A)({},l),{},{[e.target.name]:e.target.value}))};return u?(0,xt.jsx)("div",{className:"employee-container",children:(0,xt.jsx)("div",{className:"loading",children:"Chargement du profil employ\xe9..."})}):h&&!i?(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsx)("div",{className:"error-message",children:h}),(0,xt.jsx)("button",{onClick:()=>n("/employee/dashboard"),className:"back-button",children:"\u2190 Retour au tableau de bord"})]}):i?(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsxs)("header",{className:"employee-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>n("/employee/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Param\xe8tres du Compte"}),(0,xt.jsx)("div",{className:"user-info",children:i.email})]}),h&&(0,xt.jsx)("div",{className:"error-message",children:h}),m&&(0,xt.jsx)("div",{className:"success-message",children:m}),(0,xt.jsx)("div",{className:"employee-profile-header",children:(0,xt.jsxs)("div",{className:"profile-summary",children:[(0,xt.jsx)("div",{className:"employee-avatar",children:((null===(e=i.firstName)||void 0===e?void 0:e[0])||"")+((null===(t=i.lastName)||void 0===t?void 0:t[0])||"")}),(0,xt.jsxs)("div",{className:"employee-info",children:[(0,xt.jsx)("h2",{children:i.fullName||"".concat(i.firstName," ").concat(i.lastName)}),(0,xt.jsx)("p",{className:"position",children:i.position}),(0,xt.jsx)("p",{className:"department",children:i.department}),(0,xt.jsx)("p",{className:"email",children:i.email}),i.phone&&(0,xt.jsxs)("p",{className:"phone",children:["\ud83d\udcde ",i.phone]}),i.hireDate&&(0,xt.jsxs)("p",{className:"hire-date",children:["Embauch\xe9 le ",new Date(i.hireDate).toLocaleDateString("fr-FR")]})]}),(0,xt.jsx)("div",{className:"status-badge",style:{backgroundColor:"active"===i.status?"var(--accent-green)":"#ff9800"},children:"active"===i.status?"Actif":"Inactif"})]})}),(0,xt.jsx)("main",{className:"employee-main",children:(0,xt.jsx)("div",{className:"profile-container",children:(0,xt.jsxs)("div",{className:"password-card",children:[(0,xt.jsx)("h3",{children:"Changer le Mot de Passe"}),(0,xt.jsx)("p",{className:"security-note",children:"Pour des raisons de s\xe9curit\xe9, veuillez entrer votre mot de passe actuel avant de d\xe9finir un nouveau mot de passe."}),i.hasDefaultPassword&&(0,xt.jsx)("div",{className:"warning-message",children:"\u26a0\ufe0f Vous utilisez encore le mot de passe par d\xe9faut. Il est recommand\xe9 de le changer pour s\xe9curiser votre compte."}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(!0),f(""),p(""),!l.currentPassword||!l.newPassword||!l.confirmPassword)return f("Tous les champs sont requis"),void d(!1);if(l.newPassword!==l.confirmPassword)return f("Les nouveaux mots de passe ne correspondent pas"),void d(!1);if(l.newPassword.length<6)return f("Le nouveau mot de passe doit contenir au moins 6 caract\xe8res"),void d(!1);if(l.currentPassword===l.newPassword)return f("Le nouveau mot de passe doit \xeatre diff\xe9rent de l'actuel"),void d(!1);try{const e=sc.j2.currentUser;if(!e)return f("Vous devez \xeatre connect\xe9 pour changer votre mot de passe"),void d(!1);const t=nc.IX.credential(e.email,l.currentPassword);await(0,nc.kZ)(e,t),await(0,nc.f3)(e,l.newPassword),await(0,St.lU)("employees",i.id,{lastPasswordChange:(new Date).toISOString(),hasDefaultPassword:!1}),p("Mot de passe mis \xe0 jour avec succ\xe8s"),c({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>p(""),3e3)}catch(h){console.error("Password update error:",h),"auth/wrong-password"===h.code||"auth/invalid-credential"===h.code?f("Mot de passe actuel incorrect"):"auth/weak-password"===h.code?f("Le nouveau mot de passe est trop faible"):"auth/requires-recent-login"===h.code?f("Veuillez vous reconnecter pour modifier votre mot de passe"):f("Erreur lors de la mise \xe0 jour du mot de passe: "+h.message)}finally{d(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"currentPassword",children:"Mot de passe actuel *"}),(0,xt.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",value:l.currentPassword,onChange:v,required:!0,placeholder:"Entrez votre mot de passe actuel"}),i.hasDefaultPassword&&(0,xt.jsx)("small",{className:"form-help",children:"Mot de passe par d\xe9faut : Employee123"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"newPassword",children:"Nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:l.newPassword,onChange:v,required:!0,minLength:"6",placeholder:"Entrez votre nouveau mot de passe"}),(0,xt.jsx)("small",{className:"form-help",children:"Le mot de passe doit contenir au moins 6 caract\xe8res"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:v,required:!0,placeholder:"Confirmez votre nouveau mot de passe"})]}),(0,xt.jsxs)("div",{className:"password-requirements",children:[(0,xt.jsx)("h4",{children:"Exigences du mot de passe :"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{className:l.newPassword.length>=6?"valid":"",children:"Au moins 6 caract\xe8res"}),(0,xt.jsx)("li",{className:l.newPassword===l.confirmPassword&&l.confirmPassword?"valid":"",children:"Les mots de passe correspondent"})]})]}),(0,xt.jsx)("div",{className:"form-actions",children:(0,xt.jsx)("button",{type:"submit",disabled:u,className:"save-button",children:u?"Mise \xe0 jour...":"Changer le Mot de Passe"})})]})]})})})]}):(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsx)("div",{className:"error-message",children:"Aucune donn\xe9e employ\xe9 trouv\xe9e"}),(0,xt.jsx)("button",{onClick:()=>n("/employee/dashboard"),className:"back-button",children:"\u2190 Retour au tableau de bord"})]})},oc=()=>{const e=de(),t=localStorage.getItem("userEmail"),[n,r]=(0,s.useState)(null),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)({startDate:"",endDate:"",startPeriod:"morning",endPeriod:"afternoon",type:"vacation",reason:"",days:0}),[m,p]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),[x,w]=(0,s.useState)(""),_=[{value:"vacation",label:"Cong\xe9s pay\xe9s"},{value:"sick",label:"Arr\xeat maladie"},{value:"personal",label:"Cong\xe9 personnel"},{value:"maternity",label:"Cong\xe9 maternit\xe9"},{value:"paternity",label:"Cong\xe9 paternit\xe9"},{value:"unpaid",label:"Cong\xe9 sans solde"}];(0,s.useEffect)(()=>{S()},[]);const S=async()=>{try{const e=await(0,St.Nr)("employees",[{field:"email",operator:"==",value:t}]);if(0===e.length)return b("Employ\xe9 non trouv\xe9"),void p(!1);const n=e[0];r(n);const s=await(0,St.Nr)("leaves",[{field:"employeeId",operator:"==",value:n.id}]);o(s.sort((e,t)=>new Date(t.requestDate)-new Date(e.requestDate)));const i=(new Date).getFullYear(),a=(await(0,St.Nr)("leaveBalances",[{field:"employeeId",operator:"==",value:n.id}])).find(e=>e.year===i);c(a)}catch(y){b("Erreur lors du chargement des donn\xe9es")}finally{p(!1)}},k=e=>{const{name:t,value:n}=e.target;f(e=>{const s=(0,a.A)((0,a.A)({},e),{},{[t]:n});return"startDate"!==t&&"endDate"!==t&&"startPeriod"!==t&&"endPeriod"!==t||(s.days=((e,t,n,s)=>{if(!e||!t)return 0;const r=new Date(e),i=new Date(t);if(r.toDateString()===i.toDateString())return"morning"===n&&"afternoon"===s?1:.5;const a=i.getTime()-r.getTime(),o=Math.floor(a/864e5);let l=0;return l+="morning"===n?1:.5,o>1&&(l+=o-1),l+="afternoon"===s?1:.5,l})(s.startDate,s.endDate,s.startPeriod,s.endPeriod)),s})},N=()=>{f({startDate:"",endDate:"",startPeriod:"morning",endPeriod:"afternoon",type:"vacation",reason:"",days:0}),d(!1)},j=e=>{const t=_.find(t=>t.value===e);return t?t.label:e},E=e=>"morning"===e?"Matin":"Apr\xe8s-midi",C=(e,t,n,s)=>{const r=new Date(e).toLocaleDateString("fr-FR"),i=new Date(t).toLocaleDateString("fr-FR");return e===t?"morning"===n&&"afternoon"===s?"".concat(r," (journ\xe9e compl\xe8te)"):"".concat(r," (").concat(E(n===s?n:"morning"),")"):"".concat(r," (").concat(E(n),") - ").concat(i," (").concat(E(s),")")},A=e=>{switch(e){case"approved":return"var(--accent-green)";case"rejected":return"#c62828";case"pending":return"#ff9800";default:return"var(--primary-gray)"}},T=e=>{switch(e){case"approved":return"Approuv\xe9";case"rejected":return"Rejet\xe9";case"pending":return"En attente";default:return"Inconnu"}},I=e=>{switch(e){case"approved":return"\u2705";case"rejected":return"\u274c";case"pending":return"\u23f3";default:return"\u2753"}};return m?(0,xt.jsx)("div",{className:"employee-container",children:(0,xt.jsx)("div",{className:"loading",children:"Chargement..."})}):n||m?(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsxs)("header",{className:"employee-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/employee/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Mes Cong\xe9s"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Nouvelle Demande"})]}),y&&(0,xt.jsx)("div",{className:"error-message",children:y}),x&&(0,xt.jsx)("div",{className:"success-message",children:x}),(0,xt.jsxs)("div",{className:"leave-summary",children:[(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsxs)("h3",{children:["Solde Cong\xe9s ",(new Date).getFullYear()]}),l?(0,xt.jsxs)("div",{className:"balance-details",children:[(0,xt.jsxs)("div",{className:"balance-row",children:[(0,xt.jsx)("span",{children:"Total allou\xe9:"}),(0,xt.jsxs)("span",{className:"balance-total",children:[l.totalDays," jours"]})]}),(0,xt.jsxs)("div",{className:"balance-row",children:[(0,xt.jsx)("span",{children:"Utilis\xe9:"}),(0,xt.jsxs)("span",{className:"balance-used",children:[l.usedDays," jours"]})]}),(0,xt.jsxs)("div",{className:"balance-row",children:[(0,xt.jsx)("span",{children:"Restant:"}),(0,xt.jsxs)("span",{className:"balance-remaining",children:[l.remainingDays," jours"]})]}),(0,xt.jsx)("div",{className:"progress-bar",children:(0,xt.jsx)("div",{className:"progress-fill",style:{width:"".concat(l.usedDays/l.totalDays*100,"%")}})})]}):(0,xt.jsx)("p",{className:"no-balance",children:"Aucun solde configur\xe9 pour cette ann\xe9e"})]}),(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsx)("h3",{children:"Mes Demandes"}),(0,xt.jsxs)("div",{className:"leave-stats",children:[(0,xt.jsxs)("div",{className:"stat-item",children:[(0,xt.jsx)("span",{className:"stat-number pending",children:i.filter(e=>"pending"===e.status).length}),(0,xt.jsx)("span",{className:"stat-label",children:"En attente"})]}),(0,xt.jsxs)("div",{className:"stat-item",children:[(0,xt.jsx)("span",{className:"stat-number approved",children:i.filter(e=>"approved"===e.status).length}),(0,xt.jsx)("span",{className:"stat-label",children:"Approuv\xe9es"})]}),(0,xt.jsxs)("div",{className:"stat-item",children:[(0,xt.jsx)("span",{className:"stat-number rejected",children:i.filter(e=>"rejected"===e.status).length}),(0,xt.jsx)("span",{className:"stat-label",children:"Rejet\xe9es"})]})]})]})]}),u&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsx)("h2",{children:"Nouvelle Demande de Cong\xe9"}),(0,xt.jsx)("button",{className:"close-button",onClick:N,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b(""),w(""),h.days<=0)b("Veuillez s\xe9lectionner des dates valides");else if("vacation"===h.type&&l&&h.days>l.remainingDays)b("Vous n'avez que ".concat(l.remainingDays," jours de cong\xe9s disponibles"));else try{v(!0);const e={employeeId:n.id,startDate:h.startDate,endDate:h.endDate,startPeriod:h.startPeriod,endPeriod:h.endPeriod,type:h.type,reason:h.reason,days:h.days,status:"pending",requestDate:(new Date).toISOString()};await(0,St.createDocument)("leaves",e),await S(),N(),w("Demande de cong\xe9 soumise avec succ\xe8s"),setTimeout(()=>w(""),3e3)}catch(y){b("Erreur lors de la soumission de la demande")}finally{v(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"startDate",children:"Date de D\xe9but *"}),(0,xt.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:h.startDate,onChange:k,required:!0,min:(new Date).toISOString().split("T")[0]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"startPeriod",children:"P\xe9riode de D\xe9but *"}),(0,xt.jsxs)("select",{id:"startPeriod",name:"startPeriod",value:h.startPeriod,onChange:k,required:!0,children:[(0,xt.jsx)("option",{value:"morning",children:"Matin"}),(0,xt.jsx)("option",{value:"afternoon",children:"Apr\xe8s-midi"})]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"endDate",children:"Date de Fin *"}),(0,xt.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:h.endDate,onChange:k,required:!0,min:h.startDate||(new Date).toISOString().split("T")[0]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"endPeriod",children:"P\xe9riode de Fin *"}),(0,xt.jsxs)("select",{id:"endPeriod",name:"endPeriod",value:h.endPeriod,onChange:k,required:!0,children:[(0,xt.jsx)("option",{value:"morning",children:"Matin"}),(0,xt.jsx)("option",{value:"afternoon",children:"Apr\xe8s-midi"})]})]})]}),(0,xt.jsxs)("div",{className:"form-row",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"type",children:"Type de Cong\xe9 *"}),(0,xt.jsx)("select",{id:"type",name:"type",value:h.type,onChange:k,required:!0,children:_.map(e=>(0,xt.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"days",children:"Nombre de Jours"}),(0,xt.jsx)("input",{type:"number",id:"days",name:"days",value:h.days,readOnly:!0,className:"readonly"})]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"reason",children:"Motif"}),(0,xt.jsx)("textarea",{id:"reason",name:"reason",value:h.reason,onChange:k,rows:"3",placeholder:"Motif de votre demande de cong\xe9 (optionnel)"})]}),"vacation"===h.type&&l&&(0,xt.jsxs)("div",{className:"leave-info",children:[(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"Jours disponibles:"})," ",l.remainingDays," jours"]}),h.days>l.remainingDays&&(0,xt.jsx)("p",{className:"warning",children:"\u26a0\ufe0f Vous demandez plus de jours que disponible"})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:N,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:g,className:"save-button",children:g?"Soumission...":"Soumettre la Demande"})]})]})]})}),(0,xt.jsx)("main",{className:"employee-main",children:(0,xt.jsxs)("div",{className:"leaves-container",children:[(0,xt.jsx)("h2",{children:"Historique des Demandes"}),m?(0,xt.jsx)("div",{className:"loading",children:"Chargement des demandes..."}):i.length>0?(0,xt.jsx)("div",{className:"leaves-list",children:i.map(e=>(0,xt.jsxs)("div",{className:"leave-card",children:[(0,xt.jsxs)("div",{className:"leave-header",children:[(0,xt.jsxs)("div",{className:"leave-type",children:[(0,xt.jsx)("h3",{children:j(e.type)}),(0,xt.jsxs)("span",{className:"leave-duration",children:[e.days," jour",e.days>1?"s":""]})]}),(0,xt.jsx)("div",{className:"leave-status",children:(0,xt.jsxs)("span",{className:"status-badge",style:{backgroundColor:A(e.status)},children:[I(e.status)," ",T(e.status)]})})]}),(0,xt.jsxs)("div",{className:"leave-details",children:[(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"P\xe9riode:"}),(0,xt.jsx)("span",{className:"detail-value",children:C(e.startDate,e.endDate,e.startPeriod||"morning",e.endPeriod||"afternoon")})]}),e.reason&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Motif:"}),(0,xt.jsx)("span",{className:"detail-value",children:e.reason})]}),(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Demand\xe9 le:"}),(0,xt.jsx)("span",{className:"detail-value",children:new Date(e.requestDate).toLocaleDateString("fr-FR")})]}),e.reviewDate&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Trait\xe9 le:"}),(0,xt.jsx)("span",{className:"detail-value",children:new Date(e.reviewDate).toLocaleDateString("fr-FR")})]})]})]},e.id))}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune demande de cong\xe9"}),(0,xt.jsx)("p",{children:"Vous n'avez pas encore fait de demande de cong\xe9"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Faire une demande"})]})]})})]}):(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsx)("div",{className:"error-message",children:"Employ\xe9 non trouv\xe9. Veuillez vous reconnecter."}),(0,xt.jsx)("button",{onClick:()=>e("/login"),className:"back-button",children:"Retour \xe0 la connexion"})]})},lc=()=>{const e=de(),t=localStorage.getItem("userEmail"),[n,r]=(0,s.useState)(null),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)({amount:"",reason:"",requestedDate:(new Date).toISOString().split("T")[0]}),[m,p]=(0,s.useState)(!1),[g,v]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[x,w]=(0,s.useState)("salaries");(0,s.useEffect)(()=>{_()},[]);const _=async()=>{try{p(!0);const e=await(0,St.Nr)("employees",[{field:"email",operator:"==",value:t}]);if(0===e.length)return v("Employ\xe9 non trouv\xe9"),void p(!1);const n=e[0];r(n);const s=await(0,St.Nr)("salaries",[{field:"employeeId",operator:"==",value:n.id}]);o(s.sort((e,t)=>new Date(t.month)-new Date(e.month)));const i=await(0,St.Nr)("advances",[{field:"employeeId",operator:"==",value:n.id}]);c(i.sort((e,t)=>new Date(t.requestDate)-new Date(e.requestDate)))}catch(g){v("Erreur lors du chargement des donn\xe9es")}finally{p(!1)}},S=e=>{f((0,a.A)((0,a.A)({},h),{},{[e.target.name]:e.target.value}))},k=()=>{f({amount:"",reason:"",requestedDate:(new Date).toISOString().split("T")[0]}),d(!1)},N=e=>new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" Ar",j=e=>{switch(e){case"approved":return"var(--accent-green)";case"rejected":return"#c62828";case"pending":return"#ff9800";case"paid":return"var(--primary-brown)";default:return"var(--primary-gray)"}},E=e=>{switch(e){case"approved":return"Approuv\xe9";case"rejected":return"Rejet\xe9";case"pending":return"En attente";case"paid":return"Pay\xe9";default:return"Inconnu"}},C=e=>{switch(e){case"approved":return"\u2705";case"rejected":return"\u274c";case"pending":return"\u23f3";case"paid":return"\ud83d\udcb0";default:return"\u2753"}},A=()=>{const e=(new Date).toISOString().slice(0,7);return i.find(t=>t.month===e)};return n?(0,xt.jsxs)("div",{className:"employee-container",children:[(0,xt.jsxs)("header",{className:"employee-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/employee/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Mon Salaire"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Demande d'Avance"})]}),g&&(0,xt.jsx)("div",{className:"error-message",children:g}),y&&(0,xt.jsx)("div",{className:"success-message",children:y}),(0,xt.jsxs)("div",{className:"salary-summary",children:[(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsx)("h3",{children:"Salaire de Base"}),(0,xt.jsx)("div",{className:"salary-amount",children:n.salary?N(n.salary):"Non d\xe9fini"}),(0,xt.jsx)("p",{className:"salary-period",children:"Par mois"})]}),(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsx)("h3",{children:"Ce Mois-ci"}),A()?(0,xt.jsxs)("div",{className:"current-salary",children:[(0,xt.jsx)("div",{className:"salary-amount",children:N(A().netSalary)}),(0,xt.jsxs)("p",{className:"salary-status",style:{color:j(A().paymentStatus)},children:[C(A().paymentStatus)," ",E(A().paymentStatus)]})]}):(0,xt.jsx)("div",{className:"no-salary",children:(0,xt.jsx)("p",{children:"Pas encore configur\xe9"})})]}),(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsx)("h3",{children:"Avances en Cours"}),(0,xt.jsxs)("div",{className:"advances-summary",children:[(0,xt.jsx)("div",{className:"salary-amount",children:N(l.filter(e=>"approved"===e.status).reduce((e,t)=>e+t.amount,0))}),(0,xt.jsxs)("p",{className:"advances-count",children:[l.filter(e=>"pending"===e.status).length," demande(s) en attente"]})]})]})]}),(0,xt.jsxs)("div",{className:"tabs",children:[(0,xt.jsxs)("button",{className:"tab ".concat("salaries"===x?"active":""),onClick:()=>w("salaries"),children:["Historique Salaires (",i.length,")"]}),(0,xt.jsxs)("button",{className:"tab ".concat("advances"===x?"active":""),onClick:()=>w("advances"),children:["Demandes d'Avance (",l.length,")"]})]}),u&&(0,xt.jsx)("div",{className:"modal-overlay",children:(0,xt.jsxs)("div",{className:"modal",children:[(0,xt.jsxs)("div",{className:"modal-header",children:[(0,xt.jsx)("h2",{children:"Demande d'Avance sur Salaire"}),(0,xt.jsx)("button",{className:"close-button",onClick:k,children:"\xd7"})]}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),p(!0),v(""),b(""),!h.amount||parseFloat(h.amount)<=0)return v("Veuillez entrer un montant valide"),void p(!1);if(!h.reason.trim())return v("Veuillez indiquer le motif de votre demande"),void p(!1);try{const e={employeeId:n.id,employeeName:n.fullName||"".concat(n.firstName," ").concat(n.lastName),amount:parseFloat(h.amount),reason:h.reason,requestedDate:h.requestedDate,requestDate:(new Date).toISOString(),status:"pending"};await(0,St.createDocument)("advances",e),await _(),k(),b("Demande d'avance soumise avec succ\xe8s"),setTimeout(()=>b(""),3e3)}catch(g){v("Erreur lors de la soumission de la demande")}finally{p(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"amount",children:"Montant demand\xe9 (Ar) *"}),(0,xt.jsx)("input",{type:"number",id:"amount",name:"amount",value:h.amount,onChange:S,required:!0,min:"1",step:"1",placeholder:"0"}),n.salary&&(0,xt.jsxs)("small",{className:"form-help",children:["Salaire mensuel : ",N(n.salary)]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"requestedDate",children:"Date souhait\xe9e *"}),(0,xt.jsx)("input",{type:"date",id:"requestedDate",name:"requestedDate",value:h.requestedDate,onChange:S,required:!0,min:(new Date).toISOString().split("T")[0]})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"reason",children:"Motif de la demande *"}),(0,xt.jsx)("textarea",{id:"reason",name:"reason",value:h.reason,onChange:S,required:!0,rows:"4",placeholder:"Expliquez la raison de votre demande d'avance..."})]}),(0,xt.jsxs)("div",{className:"advance-info",children:[(0,xt.jsx)("h4",{children:"Information importante :"}),(0,xt.jsx)("p",{children:"L'avance sera d\xe9duite de votre prochain salaire apr\xe8s approbation."})]}),(0,xt.jsxs)("div",{className:"form-actions",children:[(0,xt.jsx)("button",{type:"button",onClick:k,className:"cancel-button",children:"Annuler"}),(0,xt.jsx)("button",{type:"submit",disabled:m,className:"save-button",children:m?"Soumission...":"Soumettre la Demande"})]})]})]})}),(0,xt.jsx)("main",{className:"employee-main",children:(0,xt.jsxs)("div",{className:"salary-container",children:["salaries"===x&&(0,xt.jsxs)("div",{className:"salaries-section",children:[(0,xt.jsx)("h2",{children:"Historique des Salaires"}),m&&0===i.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des salaires..."}):i.length>0?(0,xt.jsx)("div",{className:"salaries-list",children:i.map(e=>{return(0,xt.jsxs)("div",{className:"salary-card",children:[(0,xt.jsxs)("div",{className:"salary-header",children:[(0,xt.jsxs)("div",{className:"salary-month",children:[(0,xt.jsx)("h3",{children:(t=e.month,new Date(t+"-01").toLocaleDateString("fr-FR",{year:"numeric",month:"long"}))}),(0,xt.jsx)("span",{className:"salary-net",children:N(e.netSalary)})]}),(0,xt.jsx)("div",{className:"salary-status",children:(0,xt.jsxs)("span",{className:"status-badge",style:{backgroundColor:j(e.paymentStatus)},children:[C(e.paymentStatus)," ",E(e.paymentStatus)]})})]}),(0,xt.jsxs)("div",{className:"salary-breakdown",children:[(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Salaire de base (employ\xe9):"}),(0,xt.jsx)("span",{className:"breakdown-value",children:N(n.salary)})]}),(0,xt.jsxs)("div",{className:"breakdown-row",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Salaire configur\xe9 ce mois:"}),(0,xt.jsx)("span",{className:"breakdown-value",children:N(e.baseSalary)})]}),e.bonuses>0&&(0,xt.jsxs)("div",{className:"breakdown-row bonus",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Primes:"}),(0,xt.jsxs)("span",{className:"breakdown-value",children:["+",N(e.bonuses)]})]}),e.overtime>0&&(0,xt.jsxs)("div",{className:"breakdown-row bonus",children:[(0,xt.jsxs)("span",{className:"breakdown-label",children:["Heures sup. (",e.overtime,"h \xe0 ",N(e.overtimeRate),"/h):"]}),(0,xt.jsxs)("span",{className:"breakdown-value",children:["+",N(e.overtime*e.overtimeRate)]})]}),e.deductions>0&&(0,xt.jsxs)("div",{className:"breakdown-row deduction",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"D\xe9ductions:"}),(0,xt.jsxs)("span",{className:"breakdown-value",children:["-",N(e.deductions)]})]}),(()=>{const t=e.baseSalary+(e.bonuses||0)+(e.overtime||0)*(e.overtimeRate||0)-(e.deductions||0),n=e.month,s=l.filter(e=>{var t;return"approved"===e.status&&(null===(t=e.requestedDate)||void 0===t?void 0:t.substring(0,7))===n}).reduce((e,t)=>e+t.amount,0),r=t-s;return(0,xt.jsxs)(xt.Fragment,{children:[(0,xt.jsxs)("div",{className:"breakdown-row subtotal",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Salaire du mois:"}),(0,xt.jsx)("span",{className:"breakdown-value",children:N(t)})]}),s>0&&(0,xt.jsxs)("div",{className:"breakdown-row deduction",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Avances approuv\xe9es du mois:"}),(0,xt.jsxs)("span",{className:"breakdown-value",children:["-",N(s)]})]}),(0,xt.jsxs)("div",{className:"breakdown-row total",children:[(0,xt.jsx)("span",{className:"breakdown-label",children:"Salaire restant \xe0 payer:"}),(0,xt.jsx)("span",{className:"breakdown-value",children:N(r)})]})]})})()]}),e.notes&&(0,xt.jsxs)("div",{className:"salary-notes",children:[(0,xt.jsx)("strong",{children:"Notes:"})," ",e.notes]})]},e.id);var t})}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucun salaire enregistr\xe9"}),(0,xt.jsx)("p",{children:"Vos fiches de paie appara\xeetront ici une fois configur\xe9es par l'administration"})]})]}),"advances"===x&&(0,xt.jsxs)("div",{className:"advances-section",children:[(0,xt.jsx)("h2",{children:"Demandes d'Avance"}),m&&0===l.length?(0,xt.jsx)("div",{className:"loading",children:"Chargement des demandes..."}):l.length>0?(0,xt.jsx)("div",{className:"advances-list",children:l.map(e=>(0,xt.jsxs)("div",{className:"advance-card",children:[(0,xt.jsxs)("div",{className:"advance-header",children:[(0,xt.jsxs)("div",{className:"advance-amount",children:[(0,xt.jsx)("h3",{children:N(e.amount)}),(0,xt.jsxs)("span",{className:"advance-date",children:["Demand\xe9 le ",new Date(e.requestDate).toLocaleDateString("fr-FR")]})]}),(0,xt.jsx)("div",{className:"advance-status",children:(0,xt.jsxs)("span",{className:"status-badge",style:{backgroundColor:j(e.status)},children:[C(e.status)," ",E(e.status)]})})]}),(0,xt.jsxs)("div",{className:"advance-details",children:[(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Date souhait\xe9e:"}),(0,xt.jsx)("span",{className:"detail-value",children:new Date(e.requestedDate).toLocaleDateString("fr-FR")})]}),(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Motif:"}),(0,xt.jsx)("span",{className:"detail-value",children:e.reason})]}),e.reviewDate&&(0,xt.jsxs)("div",{className:"detail-row",children:[(0,xt.jsx)("span",{className:"detail-label",children:"Trait\xe9 le:"}),(0,xt.jsx)("span",{className:"detail-value",children:new Date(e.reviewDate).toLocaleDateString("fr-FR")})]}),e.adminNotes&&(0,xt.jsxs)("div",{className:"admin-notes",children:[(0,xt.jsx)("strong",{children:"Notes de l'administration:"})," ",e.adminNotes]})]})]},e.id))}):(0,xt.jsxs)("div",{className:"empty-state",children:[(0,xt.jsx)("h3",{children:"Aucune demande d'avance"}),(0,xt.jsx)("p",{children:"Vous n'avez pas encore fait de demande d'avance sur salaire"}),(0,xt.jsx)("button",{className:"add-button",onClick:()=>d(!0),children:"+ Faire une demande"})]})]})]})})]}):(0,xt.jsx)("div",{className:"employee-container",children:(0,xt.jsx)("div",{className:"loading",children:"Chargement..."})})},cc=()=>{var e,t;const n=de(),r=localStorage.getItem("userEmail"),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[m,p]=(0,s.useState)("");(0,s.useEffect)(()=>{g()},[]);const g=async()=>{try{d(!0);const e=await(0,St.Nr)("clients",[{field:"email",operator:"==",value:r}]);if(e.length>0){const t=e[0];o(t)}else f("Client non trouv\xe9")}catch(h){f("Erreur lors du chargement des donn\xe9es")}finally{d(!1)}},v=e=>{c((0,a.A)((0,a.A)({},l),{},{[e.target.name]:e.target.value}))};return i?(0,xt.jsxs)("div",{className:"client-container",children:[(0,xt.jsxs)("header",{className:"client-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>n("/client/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Mon Profil"}),(0,xt.jsx)("div",{className:"user-info",children:i.fullName||"".concat(i.firstName," ").concat(i.lastName)})]}),h&&(0,xt.jsx)("div",{className:"error-message",children:h}),m&&(0,xt.jsx)("div",{className:"success-message",children:m}),(0,xt.jsx)("div",{className:"client-profile-header",children:(0,xt.jsxs)("div",{className:"profile-summary",children:[(0,xt.jsx)("div",{className:"client-avatar",children:((null===(e=i.firstName)||void 0===e?void 0:e[0])||"")+((null===(t=i.lastName)||void 0===t?void 0:t[0])||"")}),(0,xt.jsxs)("div",{className:"client-info",children:[(0,xt.jsx)("h2",{children:i.fullName||"".concat(i.firstName," ").concat(i.lastName)}),(0,xt.jsx)("p",{className:"email",children:i.email}),i.phone&&(0,xt.jsxs)("p",{className:"phone",children:["\ud83d\udcde ",i.phone]}),i.address&&(0,xt.jsxs)("p",{className:"address",children:["\ud83d\udccd ",i.address]}),i.registrationDate&&(0,xt.jsxs)("p",{className:"registration-date",children:["Client depuis le ",new Date(i.registrationDate).toLocaleDateString("fr-FR")]})]}),(0,xt.jsx)("div",{className:"status-badge",style:{backgroundColor:"var(--accent-green)"},children:"Actif"})]})}),(0,xt.jsx)("main",{className:"client-main",children:(0,xt.jsx)("div",{className:"profile-container",children:(0,xt.jsx)("div",{className:"password-section",children:(0,xt.jsxs)("div",{className:"password-card",children:[(0,xt.jsx)("h3",{children:"Changer le Mot de Passe"}),(0,xt.jsx)("p",{className:"security-note",children:"Pour des raisons de s\xe9curit\xe9, d\xe9finissez un nouveau mot de passe s\xe9curis\xe9."}),(0,xt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(!0),f(""),p(""),l.newPassword!==l.confirmPassword)return f("Les nouveaux mots de passe ne correspondent pas"),void d(!1);if(l.newPassword.length<6)return f("Le nouveau mot de passe doit contenir au moins 6 caract\xe8res"),void d(!1);try{const e=sc.j2.currentUser;e&&await(0,nc.f3)(e,l.newPassword),p("Mot de passe mis \xe0 jour avec succ\xe8s"),c({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>p(""),3e3)}catch(h){f("Erreur lors de la mise \xe0 jour du mot de passe")}finally{d(!1)}},className:"form",children:[(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"newPassword",children:"Nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:l.newPassword,onChange:v,required:!0,minLength:"6",placeholder:"Entrez votre nouveau mot de passe"}),(0,xt.jsx)("small",{className:"form-help",children:"Le mot de passe doit contenir au moins 6 caract\xe8res"})]}),(0,xt.jsxs)("div",{className:"form-group",children:[(0,xt.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe *"}),(0,xt.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:v,required:!0,placeholder:"Confirmez votre nouveau mot de passe"})]}),(0,xt.jsxs)("div",{className:"password-requirements",children:[(0,xt.jsx)("h4",{children:"Exigences du mot de passe :"}),(0,xt.jsxs)("ul",{children:[(0,xt.jsx)("li",{className:l.newPassword.length>=6?"valid":"",children:"Au moins 6 caract\xe8res"}),(0,xt.jsx)("li",{className:l.newPassword===l.confirmPassword&&l.confirmPassword?"valid":"",children:"Les mots de passe correspondent"})]})]}),(0,xt.jsx)("div",{className:"form-actions",children:(0,xt.jsx)("button",{type:"submit",disabled:u,className:"save-button",children:u?"Mise \xe0 jour...":"Changer le Mot de Passe"})})]})]})})})})]}):(0,xt.jsx)("div",{className:"client-container",children:(0,xt.jsx)("div",{className:"loading",children:"Chargement du profil..."})})},uc=()=>{const e=de(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)("all"),[d,h]=(0,s.useState)(""),[f,m]=(0,s.useState)("all"),[p,g]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[b,x]=(0,s.useState)([]);(0,s.useEffect)(()=>{w(),_()},[]);const w=async()=>{try{g(!0);const[e,t,s]=await Promise.all([(0,St.gP)("products"),(0,St.gP)("categories"),(0,St.gP)("stock")]);n(e),i(t),l(s)}catch(v){y("Erreur lors du chargement du menu")}finally{g(!1)}},_=()=>{const e=localStorage.getItem("cart");e&&x(JSON.parse(e))},S=e=>{localStorage.setItem("cart",JSON.stringify(e)),x(e)},k=e=>{const t=(new Date).toISOString().split("T")[0],n=o.find(n=>n.productId===e&&n.date===t);return n?n.availableQuantity:0},N=e=>{const t=r.find(t=>t.id===e);return t?t.name:"Cat\xe9gorie inconnue"},j=e=>{const t=r.find(t=>t.id===e);return t?t.color:"#gray"},E=()=>{let e=t.filter(e=>e.available);return"commandable"===f?e=e.filter(e=>0!==k(e.id)):"non-commandable"===f&&(e=e.filter(e=>0===k(e.id))),"all"!==c&&(e=e.filter(e=>e.categoryId===c)),d&&(e=e.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.description.toLowerCase().includes(d.toLowerCase()))),e.sort((e,t)=>{const n=k(e.id);return k(t.id)-n})},C=()=>b.reduce((e,t)=>e+t.quantity,0),A=e=>new Intl.NumberFormat("fr-FR").format(e)+" Ar";return(0,xt.jsxs)("div",{className:"client-container",children:[(0,xt.jsxs)("header",{className:"client-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/client/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Menu du Jour"}),(0,xt.jsx)("div",{className:"header-actions",children:(0,xt.jsxs)("button",{className:"cart-button",onClick:()=>e("/client/cart"),children:["\ud83d\uded2 Panier (",C(),")"]})})]}),v&&(0,xt.jsx)("div",{className:"error-message",children:v}),(0,xt.jsxs)("div",{className:"menu-filters",children:[(0,xt.jsx)("div",{className:"search-bar",children:(0,xt.jsx)("input",{type:"text",placeholder:"Rechercher un plat...",value:d,onChange:e=>h(e.target.value),className:"search-input"})}),(0,xt.jsxs)("div",{className:"stock-filters",children:[(0,xt.jsx)("button",{className:"filter-button ".concat("all"===f?"active":""),onClick:()=>m("all"),children:"Tous les plats"}),(0,xt.jsx)("button",{className:"filter-button ".concat("commandable"===f?"active":""),onClick:()=>m("commandable"),children:"Commandable"}),(0,xt.jsx)("button",{className:"filter-button ".concat("non-commandable"===f?"active":""),onClick:()=>m("non-commandable"),children:"Non commandable"})]}),(0,xt.jsxs)("div",{className:"category-filters",children:[(0,xt.jsx)("button",{className:"filter-button ".concat("all"===c?"active":""),onClick:()=>u("all"),children:"Tous"}),r.map(e=>(0,xt.jsx)("button",{className:"filter-button ".concat(c===e.id?"active":""),onClick:()=>u(e.id),style:{backgroundColor:c===e.id?e.color:"transparent",borderColor:e.color,color:c===e.id?"white":e.color},children:e.name},e.id))]})]}),(0,xt.jsx)("main",{className:"client-main",children:(0,xt.jsx)("div",{className:"menu-container",children:p?(0,xt.jsx)("div",{className:"loading",children:"Chargement du menu..."}):E().length>0?(0,xt.jsx)("div",{className:"products-grid",children:E().map(e=>{const t=k(e.id),n=(e=>{const t=b.find(t=>t.productId===e);return t?t.quantity:0})(e.id),s=t<=0,r=t>0&&t<=5;return(0,xt.jsxs)("div",{className:"product-card ".concat(s?"out-of-stock":""),children:[e.image&&(0,xt.jsxs)("div",{className:"product-image",children:[(0,xt.jsx)("img",{src:e.image,alt:e.name}),s&&(0,xt.jsx)("div",{className:"stock-overlay",children:(0,xt.jsx)("span",{children:"Rupture de stock"})})]}),(0,xt.jsxs)("div",{className:"product-content",children:[(0,xt.jsxs)("div",{className:"product-header",children:[(0,xt.jsx)("h3",{children:e.name}),(0,xt.jsx)("div",{className:"category-badge",style:{backgroundColor:j(e.categoryId)},children:N(e.categoryId)})]}),(0,xt.jsx)("p",{className:"product-description",children:e.description}),e.ingredients&&(0,xt.jsxs)("div",{className:"product-ingredients",children:[(0,xt.jsx)("strong",{children:"Ingr\xe9dients:"})," ",e.ingredients]}),e.allergens&&(0,xt.jsxs)("div",{className:"product-allergens",children:[(0,xt.jsx)("strong",{children:"Allerg\xe8nes:"})," ",e.allergens]}),(0,xt.jsxs)("div",{className:"product-footer",children:[(0,xt.jsx)("div",{className:"product-price",children:A(e.price)}),(0,xt.jsx)("div",{className:"stock-info",children:s?(0,xt.jsx)("span",{className:"stock-status out",children:"Rupture de stock"}):r?(0,xt.jsxs)("span",{className:"stock-status low",children:["Plus que ",t," disponible",t>1?"s":""]}):(0,xt.jsxs)("span",{className:"stock-status available",children:[t," disponible",t>1?"s":""]})}),(0,xt.jsxs)("div",{className:"product-actions",children:[n>0&&(0,xt.jsxs)("div",{className:"cart-quantity",children:["Dans le panier: ",n]}),(0,xt.jsx)("button",{className:"add-to-cart-button",onClick:()=>(e=>{const t=k(e.id),n=b.find(t=>t.productId===e.id);if(t<=0)return y("Ce produit n'est plus disponible"),void setTimeout(()=>y(""),3e3);if(n){if(n.quantity+1>t)return y("Stock insuffisant - Stock: ".concat(t,", Dans panier: ").concat(n.quantity)),void setTimeout(()=>y(""),3e3);const s=b.map(t=>t.productId===e.id?(0,a.A)((0,a.A)({},t),{},{quantity:t.quantity+1}):t);S(s)}else{const t={productId:e.id,name:e.name,price:e.price,quantity:1,image:e.image};S([...b,t])}})(e),disabled:s||n>=t,children:s?"Indisponible":n>=t?"Stock max atteint":"+ Ajouter au panier"})]})]})]})]},e.id)})}):(0,xt.jsxs)("div",{className:"empty-menu",children:[(0,xt.jsx)("h3",{children:"Aucun plat disponible"}),(0,xt.jsx)("p",{children:d||"all"!==c?"Aucun plat ne correspond \xe0 vos crit\xe8res de recherche":"Le menu n'est pas encore disponible pour aujourd'hui"}),(d||"all"!==c)&&(0,xt.jsx)("button",{className:"reset-filters-button",onClick:()=>{h(""),u("all")},children:"R\xe9initialiser les filtres"})]})})}),b.length>0&&(0,xt.jsx)("div",{className:"quick-cart-summary",children:(0,xt.jsxs)("div",{className:"cart-summary-content",children:[(0,xt.jsxs)("span",{className:"cart-summary-text",children:[C()," article",C()>1?"s":""," dans le panier"]}),(0,xt.jsx)("span",{className:"cart-summary-total",children:A(b.reduce((e,t)=>e+t.price*t.quantity,0))}),(0,xt.jsx)("button",{className:"view-cart-button",onClick:()=>e("/client/cart"),children:"Voir le panier"})]})})]})},dc=()=>{const e=de(),t=localStorage.getItem("userEmail"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[g,v]=(0,s.useState)("");(0,s.useEffect)(()=>{y()},[]);const y=async()=>{try{d(!0);const e=localStorage.getItem("cart");e&&r(JSON.parse(e));const n=await(0,St.Nr)("clients",[{field:"email",operator:"==",value:t}]);n.length>0&&o(n[0]);const s=await(0,St.gP)("stock");c(s)}catch(h){f("Erreur lors du chargement des donn\xe9es")}finally{d(!1)}},b=e=>{localStorage.setItem("cart",JSON.stringify(e)),r(e)},x=e=>{const t=(new Date).toISOString().split("T")[0],n=l.find(n=>n.productId===e&&n.date===t);return n?n.availableQuantity:0},w=(e,t)=>{if(t<=0)return void _(e);const s=x(e);if(t>s)return f("Stock insuffisant"),void setTimeout(()=>f(""),3e3);const r=n.map(n=>n.productId===e?(0,a.A)((0,a.A)({},n),{},{quantity:t}):n);b(r)},_=e=>{const t=n.filter(t=>t.productId!==e);b(t)},S=()=>{b([])},k=()=>n.reduce((e,t)=>e+t.price*t.quantity,0),N=()=>k(),j=e=>new Intl.NumberFormat("fr-FR").format(e)+" Ar";return u&&0===n.length?(0,xt.jsx)("div",{className:"client-container",children:(0,xt.jsx)("div",{className:"loading",children:"Chargement du panier..."})}):(0,xt.jsxs)("div",{className:"client-container",children:[(0,xt.jsxs)("header",{className:"client-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/client/menu"),children:"\u2190 Continuer mes achats"}),(0,xt.jsx)("h1",{children:"Mon Panier"}),n.length>0&&(0,xt.jsx)("button",{className:"clear-cart-button",onClick:S,children:"Vider le panier"})]}),h&&(0,xt.jsx)("div",{className:"error-message",children:h}),m&&(0,xt.jsx)("div",{className:"success-message",children:m}),(0,xt.jsx)("main",{className:"client-main",children:(0,xt.jsx)("div",{className:"cart-container",children:0===n.length?(0,xt.jsxs)("div",{className:"empty-cart",children:[(0,xt.jsx)("div",{className:"empty-cart-icon",children:"\ud83d\uded2"}),(0,xt.jsx)("h2",{children:"Votre panier est vide"}),(0,xt.jsx)("p",{children:"D\xe9couvrez notre d\xe9licieux menu et ajoutez vos plats pr\xe9f\xe9r\xe9s"}),(0,xt.jsx)("button",{className:"browse-menu-button",onClick:()=>e("/client/menu"),children:"Parcourir le menu"})]}):(0,xt.jsxs)("div",{className:"cart-content",children:[(0,xt.jsxs)("div",{className:"cart-items",children:[(0,xt.jsxs)("h2",{children:["Articles dans votre panier (",n.length,")"]}),(0,xt.jsx)("div",{className:"cart-list",children:n.map(e=>{const t=x(e.productId),n=t<e.quantity;return(0,xt.jsxs)("div",{className:"cart-item ".concat(n?"stock-warning":""),children:[e.image&&(0,xt.jsx)("div",{className:"cart-item-image",children:(0,xt.jsx)("img",{src:e.image,alt:e.name})}),(0,xt.jsxs)("div",{className:"cart-item-details",children:[(0,xt.jsx)("h3",{children:e.name}),(0,xt.jsxs)("div",{className:"cart-item-price",children:[j(e.price)," ",(0,xt.jsx)("span",{children:"/ unit\xe9"})]}),n&&(0,xt.jsxs)("div",{className:"stock-warning-text",children:["\u26a0\ufe0f Stock limit\xe9 (",t," disponible",t>1?"s":"",")"]})]}),(0,xt.jsxs)("div",{className:"cart-item-controls",children:[(0,xt.jsxs)("div",{className:"quantity-controls",children:[(0,xt.jsx)("button",{className:"quantity-button",onClick:()=>w(e.productId,e.quantity-1),disabled:u,children:"-"}),(0,xt.jsx)("span",{className:"quantity-display",children:e.quantity}),(0,xt.jsx)("button",{className:"quantity-button",onClick:()=>w(e.productId,e.quantity+1),disabled:u||e.quantity>=t,children:"+"})]}),(0,xt.jsx)("div",{className:"cart-item-total",children:j(e.price*e.quantity)}),(0,xt.jsx)("button",{className:"remove-button",onClick:()=>_(e.productId),disabled:u,children:"\ud83d\uddd1\ufe0f"})]})]},e.productId)})}),(0,xt.jsxs)("div",{className:"order-note-section",children:[(0,xt.jsx)("h3",{children:"Note pour votre commande"}),(0,xt.jsx)("textarea",{className:"order-note-input",placeholder:"Instructions sp\xe9ciales, allergies, pr\xe9f\xe9rences... (optionnel)",value:g,onChange:e=>v(e.target.value),rows:"3"})]})]}),(0,xt.jsx)("div",{className:"cart-summary",children:(0,xt.jsxs)("div",{className:"summary-card",children:[(0,xt.jsx)("h3",{children:"R\xe9sum\xe9 de la commande"}),(0,xt.jsxs)("div",{className:"summary-line",children:[(0,xt.jsxs)("span",{children:["Sous-total (",n.reduce((e,t)=>e+t.quantity,0)," article",n.reduce((e,t)=>e+t.quantity,0)>1?"s":"",")"]}),(0,xt.jsx)("span",{children:j(k())})]}),(0,xt.jsxs)("div",{className:"summary-line total",children:[(0,xt.jsx)("span",{children:"Total"}),(0,xt.jsx)("span",{children:j(N())})]}),(0,xt.jsxs)("div",{className:"delivery-info",children:[(0,xt.jsx)("h4",{children:"\ud83d\udccd Livraison"}),(0,xt.jsx)("p",{children:"Retrait en magasin aujourd'hui"}),(0,xt.jsx)("p",{className:"delivery-time",children:"Pr\xeat dans 10-30 minutes"})]}),(0,xt.jsx)("button",{className:"checkout-button",onClick:async()=>{if(0!==n.length){for(const e of n){const t=x(e.productId);if(e.quantity>t)return void f("Stock insuffisant pour ".concat(e.name,". Disponible: ").concat(t))}try{d(!0),f("");const t={clientId:i.id,clientName:i.fullName||"".concat(i.firstName," ").concat(i.lastName),clientEmail:i.email,items:n,subtotal:k(),total:N(),note:g,status:"pending",orderDate:(new Date).toISOString(),deliveryDate:(new Date).toISOString().split("T")[0]};await(0,St.createDocument)("orders",t);for(const e of n){const t=(new Date).toISOString().split("T")[0];l.find(n=>n.productId===e.productId&&n.date===t)&&console.log("Updating stock for ".concat(e.name,": -").concat(e.quantity))}S(),p("Commande pass\xe9e avec succ\xe8s !"),setTimeout(()=>{e("/client/orders")},2e3)}catch(h){f("Erreur lors de la validation de la commande")}finally{d(!1)}}else f("Votre panier est vide")},disabled:u||n.some(e=>x(e.productId)<e.quantity),children:u?"Validation...":"Valider la commande"}),(0,xt.jsxs)("div",{className:"payment-info",children:[(0,xt.jsx)("p",{children:"\ud83d\udcb3 Paiement \xe0 la livraison"}),(0,xt.jsx)("p",{children:"Esp\xe8ces ou Mobile Money accept\xe9s"})]})]})})]})})})]})},hc=()=>{const e=de(),t=localStorage.getItem("userEmail"),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)("");(0,s.useEffect)(()=>{d()},[]);const d=async()=>{try{l(!0);const e=await(0,St.Nr)("clients",[{field:"email",operator:"==",value:t}]);if(e.length>0){const t=e[0];a(t);const n=(await(0,St.gP)("orders")).filter(e=>e.clientId===t.id);n.sort((e,t)=>new Date(t.orderDate)-new Date(e.orderDate)),r(n)}else u("Client non trouv\xe9")}catch(c){u("Erreur lors du chargement des commandes")}finally{l(!1)}},h=e=>new Intl.NumberFormat("fr-FR").format(e)+" Ar",f=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=e=>{switch(e){case"pending":return"#f39c12";case"confirmed":return"#3498db";case"preparing":return"#9b59b6";case"ready":return"#2ecc71";case"delivered":return"#27ae60";case"cancelled":return"#e74c3c";default:return"#95a5a6"}},p=e=>{switch(e){case"pending":return"En attente de confirmation";case"confirmed":return"Confirm\xe9e par le restaurant";case"preparing":return"En cours de pr\xe9paration";case"ready":return"Pr\xeate pour retrait";case"delivered":return"Commande livr\xe9e";case"cancelled":return"Commande annul\xe9e";default:return e}},g=e=>{switch(e){case"pending":return"\u23f3";case"confirmed":return"\u2705";case"preparing":return"\ud83d\udc68\u200d\ud83c\udf73";case"ready":return"\ud83c\udf7d\ufe0f";case"delivered":return"\ud83c\udf89";case"cancelled":return"\u274c";default:return"\ud83d\udccb"}},v=e=>{switch(e.status){case"pending":return"Votre commande est en attente de confirmation par notre \xe9quipe.";case"confirmed":return"Excellente nouvelle ! Votre commande a \xe9t\xe9 confirm\xe9e et sera bient\xf4t pr\xe9par\xe9e.";case"preparing":return"Nos chefs pr\xe9parent votre commande avec soin. Plus que quelques minutes !";case"ready":return"Votre commande est pr\xeate ! Vous pouvez venir la r\xe9cup\xe9rer au restaurant.";case"delivered":return"Commande livr\xe9e le ".concat(e.deliveredAt?f(e.deliveredAt):"N/A",". Merci pour votre confiance !");case"cancelled":return"Commande annul\xe9e. ".concat(e.cancellationReason||"Aucune raison sp\xe9cifi\xe9e.");default:return"Statut de la commande non d\xe9fini."}};return(0,xt.jsxs)("div",{className:"client-container",children:[(0,xt.jsxs)("header",{className:"client-header",children:[(0,xt.jsx)("button",{className:"back-button",onClick:()=>e("/client/dashboard"),children:"\u2190 Retour"}),(0,xt.jsx)("h1",{children:"Mes Commandes"}),(0,xt.jsx)("div",{className:"user-info",children:i&&(i.fullName||"".concat(i.firstName," ").concat(i.lastName))})]}),c&&(0,xt.jsx)("div",{className:"error-message",children:c}),(0,xt.jsx)("main",{className:"client-main",children:(0,xt.jsx)("div",{className:"orders-container",children:o?(0,xt.jsx)("div",{className:"loading",children:"Chargement des commandes..."}):n.length>0?(0,xt.jsx)("div",{className:"orders-list",children:n.map(e=>(0,xt.jsxs)("div",{className:"invoice-card",children:[(0,xt.jsxs)("div",{className:"invoice-header",children:[(0,xt.jsxs)("div",{className:"restaurant-info",children:[(0,xt.jsx)("h2",{children:"\ud83c\udf7d\ufe0f Scandale Bouffe"}),(0,xt.jsx)("p",{children:"L'Art Culinaire Malgache"})]}),(0,xt.jsxs)("div",{className:"invoice-details",children:[(0,xt.jsxs)("h3",{children:["FACTURE #",e.id.slice(-8).toUpperCase()]}),(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"Date:"})," ",f(e.orderDate)]}),(0,xt.jsxs)("div",{className:"status-badge",style:{backgroundColor:m(e.status)},children:[g(e.status)," ",p(e.status)]})]})]}),(0,xt.jsxs)("div",{className:"invoice-client-info",children:[(0,xt.jsxs)("div",{className:"client-section",children:[(0,xt.jsx)("h4",{children:"Factur\xe9 \xe0 :"}),(0,xt.jsx)("p",{children:(0,xt.jsx)("strong",{children:e.clientName})}),(0,xt.jsx)("p",{children:e.clientEmail})]}),(0,xt.jsxs)("div",{className:"delivery-section",children:[(0,xt.jsx)("h4",{children:"Livraison :"}),(0,xt.jsx)("p",{children:"\ud83d\udccd Retrait en magasin"}),e.deliveryDate&&(0,xt.jsxs)("p",{children:["\ud83d\udcc5 ",new Date(e.deliveryDate).toLocaleDateString("fr-FR")]})]})]}),(0,xt.jsx)("div",{className:"invoice-items",children:(0,xt.jsxs)("table",{className:"items-table",children:[(0,xt.jsx)("thead",{children:(0,xt.jsxs)("tr",{children:[(0,xt.jsx)("th",{children:"Article"}),(0,xt.jsx)("th",{children:"Prix unitaire"}),(0,xt.jsx)("th",{children:"Quantit\xe9"}),(0,xt.jsx)("th",{children:"Total"})]})}),(0,xt.jsx)("tbody",{children:e.items.map((e,t)=>(0,xt.jsxs)("tr",{children:[(0,xt.jsx)("td",{className:"item-name",children:e.name}),(0,xt.jsx)("td",{className:"item-unit-price",children:h(e.price)}),(0,xt.jsx)("td",{className:"item-quantity",children:e.quantity}),(0,xt.jsx)("td",{className:"item-total",children:h(e.price*e.quantity)})]},t))})]})}),(0,xt.jsxs)("div",{className:"order-status-section",children:[(0,xt.jsx)("h4",{children:"\ud83d\udccb Statut de votre commande :"}),(0,xt.jsxs)("div",{className:"status-message",children:[(0,xt.jsx)("div",{className:"status-icon-large",children:g(e.status)}),(0,xt.jsx)("p",{children:v(e)})]}),(0,xt.jsxs)("div",{className:"status-timeline",children:[(0,xt.jsxs)("div",{className:"timeline-step ".concat(["pending","confirmed","preparing","ready","delivered"].includes(e.status)?"completed":""),children:[(0,xt.jsx)("div",{className:"step-icon",children:"\u23f3"}),(0,xt.jsx)("span",{children:"Commande re\xe7ue"})]}),(0,xt.jsxs)("div",{className:"timeline-step ".concat(["confirmed","preparing","ready","delivered"].includes(e.status)?"completed":"cancelled"===e.status?"cancelled":""),children:[(0,xt.jsx)("div",{className:"step-icon",children:"\u2705"}),(0,xt.jsx)("span",{children:"Confirm\xe9e"})]}),(0,xt.jsxs)("div",{className:"timeline-step ".concat(["preparing","ready","delivered"].includes(e.status)?"completed":"cancelled"===e.status?"cancelled":""),children:[(0,xt.jsx)("div",{className:"step-icon",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,xt.jsx)("span",{children:"En pr\xe9paration"})]}),(0,xt.jsxs)("div",{className:"timeline-step ".concat(["ready","delivered"].includes(e.status)?"completed":"cancelled"===e.status?"cancelled":""),children:[(0,xt.jsx)("div",{className:"step-icon",children:"\ud83c\udf7d\ufe0f"}),(0,xt.jsx)("span",{children:"Pr\xeate"})]}),(0,xt.jsxs)("div",{className:"timeline-step ".concat("delivered"===e.status?"completed":"cancelled"===e.status?"cancelled":""),children:[(0,xt.jsx)("div",{className:"step-icon",children:"\ud83c\udf89"}),(0,xt.jsx)("span",{children:"Livr\xe9e"})]})]}),"confirmed"===e.status&&e.confirmedAt&&(0,xt.jsx)("div",{className:"status-detail",children:(0,xt.jsxs)("small",{children:["\u2705 Confirm\xe9e le ",f(e.confirmedAt)," par ",e.confirmedBy]})}),"preparing"===e.status&&e.preparingAt&&(0,xt.jsx)("div",{className:"status-detail",children:(0,xt.jsxs)("small",{children:["\ud83d\udc68\u200d\ud83c\udf73 Mise en pr\xe9paration le ",f(e.preparingAt)]})}),"ready"===e.status&&e.readyAt&&(0,xt.jsx)("div",{className:"status-detail",children:(0,xt.jsxs)("small",{children:["\ud83c\udf7d\ufe0f Pr\xeate depuis le ",f(e.readyAt)]})}),"delivered"===e.status&&e.deliveredAt&&(0,xt.jsx)("div",{className:"status-detail",children:(0,xt.jsxs)("small",{children:["\ud83c\udf89 Livr\xe9e le ",f(e.deliveredAt)," par ",e.deliveredBy]})}),"cancelled"===e.status&&e.cancelledAt&&(0,xt.jsxs)("div",{className:"status-detail cancelled",children:[(0,xt.jsxs)("small",{children:["\u274c Annul\xe9e le ",f(e.cancelledAt)," par ",e.cancelledBy]}),e.cancellationReason&&(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"Raison :"})," ",e.cancellationReason]})]}),e.pendingReason&&(0,xt.jsx)("div",{className:"status-detail pending",children:(0,xt.jsxs)("small",{children:["\u23f3 ",(0,xt.jsx)("strong",{children:"Note :"})," ",e.pendingReason]})})]}),e.note&&(0,xt.jsxs)("div",{className:"invoice-note",children:[(0,xt.jsx)("h4",{children:"Instructions sp\xe9ciales :"}),(0,xt.jsx)("p",{children:e.note})]}),(0,xt.jsx)("div",{className:"invoice-summary",children:(0,xt.jsxs)("div",{className:"summary-section",children:[(0,xt.jsxs)("div",{className:"summary-line",children:[(0,xt.jsxs)("span",{children:["Sous-total (",e.items.reduce((e,t)=>e+t.quantity,0)," article",e.items.reduce((e,t)=>e+t.quantity,0)>1?"s":"",")"]}),(0,xt.jsx)("span",{children:h(e.subtotal)})]}),(0,xt.jsxs)("div",{className:"summary-line total-line",children:[(0,xt.jsx)("span",{children:(0,xt.jsx)("strong",{children:"TOTAL \xc0 PAYER"})}),(0,xt.jsx)("span",{children:(0,xt.jsx)("strong",{children:h(e.subtotal)})})]})]})}),(0,xt.jsxs)("div",{className:"invoice-footer",children:[(0,xt.jsxs)("div",{className:"payment-info",children:[(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"\ud83d\udcb3 Mode de paiement :"})," \xc0 la livraison"]}),(0,xt.jsxs)("p",{children:[(0,xt.jsx)("strong",{children:"\u23f1\ufe0f Temps de pr\xe9paration :"})," 10-30 minutes"]})]}),(0,xt.jsxs)("div",{className:"thank-you",children:[(0,xt.jsx)("p",{children:(0,xt.jsx)("em",{children:"Merci pour votre confiance !"})}),(0,xt.jsx)("p",{children:(0,xt.jsx)("small",{children:"Pour toute question, contactez-nous au restaurant."})})]})]})]},e.id))}):(0,xt.jsxs)("div",{className:"empty-orders",children:[(0,xt.jsx)("div",{className:"empty-orders-icon",children:"\ud83d\udccb"}),(0,xt.jsx)("h2",{children:"Aucune commande"}),(0,xt.jsx)("p",{children:"Vous n'avez pas encore pass\xe9 de commande"}),(0,xt.jsx)("button",{className:"browse-menu-button",onClick:()=>e("/client/menu"),children:"Parcourir le menu"})]})})})]})},fc=e=>{let{children:t,allowedRoles:n}=e;const s=localStorage.getItem("userRole");return s&&n.includes(s)?t:(0,xt.jsx)(Ce,{to:"/",replace:!0})};const mc=function(){return(0,xt.jsx)(ut,{basename:"/scandale_bouffe_website",children:(0,xt.jsx)("div",{className:"App",children:(0,xt.jsxs)(Ie,{children:[(0,xt.jsx)(Ae,{path:"/",element:(0,xt.jsx)(wt,{})}),(0,xt.jsx)(Ae,{path:"/staff",element:(0,xt.jsx)(_t,{})}),(0,xt.jsx)(Ae,{path:"/client/login",element:(0,xt.jsx)(kt,{})}),(0,xt.jsx)(Ae,{path:"/client/register",element:(0,xt.jsx)(Nt,{})}),(0,xt.jsx)(Ae,{path:"/staff/login",element:(0,xt.jsx)(jt,{})}),(0,xt.jsx)(Ae,{path:"/admin/dashboard",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Et,{})})}),(0,xt.jsx)(Ae,{path:"/admin/categories",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Tt,{})})}),(0,xt.jsx)(Ae,{path:"/admin/products",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(It,{})})}),(0,xt.jsx)(Ae,{path:"/admin/expenses",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Dt,{})})}),(0,xt.jsx)(Ae,{path:"/admin/stock",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Pt,{})})}),(0,xt.jsx)(Ae,{path:"/admin/reports",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)($l,{})})}),(0,xt.jsx)(Ae,{path:"/admin/employees",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Jl,{})})}),(0,xt.jsx)(Ae,{path:"/admin/ratings",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(Zl,{})})}),(0,xt.jsx)(Ae,{path:"/admin/salaries",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(ec,{})})}),(0,xt.jsx)(Ae,{path:"/admin/leaves",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(tc,{})})}),(0,xt.jsx)(Ae,{path:"/admin/orders",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(ic,{})})}),(0,xt.jsx)(Ae,{path:"/admin/profile",element:(0,xt.jsx)(fc,{allowedRoles:["admin"],children:(0,xt.jsx)(rc,{})})}),(0,xt.jsx)(Ae,{path:"/employee/dashboard",element:(0,xt.jsx)(fc,{allowedRoles:["employee"],children:(0,xt.jsx)(Ct,{})})}),(0,xt.jsx)(Ae,{path:"/employee/profile",element:(0,xt.jsx)(fc,{allowedRoles:["employee"],children:(0,xt.jsx)(ac,{})})}),(0,xt.jsx)(Ae,{path:"/employee/leaves",element:(0,xt.jsx)(fc,{allowedRoles:["employee"],children:(0,xt.jsx)(oc,{})})}),(0,xt.jsx)(Ae,{path:"/employee/salary",element:(0,xt.jsx)(fc,{allowedRoles:["employee"],children:(0,xt.jsx)(lc,{})})}),(0,xt.jsx)(Ae,{path:"/client/dashboard",element:(0,xt.jsx)(fc,{allowedRoles:["client"],children:(0,xt.jsx)(At,{})})}),(0,xt.jsx)(Ae,{path:"/client/profile",element:(0,xt.jsx)(fc,{allowedRoles:["client"],children:(0,xt.jsx)(cc,{})})}),(0,xt.jsx)(Ae,{path:"/client/menu",element:(0,xt.jsx)(fc,{allowedRoles:["client"],children:(0,xt.jsx)(uc,{})})}),(0,xt.jsx)(Ae,{path:"/client/cart",element:(0,xt.jsx)(fc,{allowedRoles:["client"],children:(0,xt.jsx)(dc,{})})}),(0,xt.jsx)(Ae,{path:"/client/orders",element:(0,xt.jsx)(fc,{allowedRoles:["client"],children:(0,xt.jsx)(hc,{})})}),(0,xt.jsx)(Ae,{path:"*",element:(0,xt.jsx)(Ce,{to:"/",replace:!0})})]})})})},pc=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:s,getFCP:r,getLCP:i,getTTFB:a}=t;n(e),s(e),r(e),i(e),a(e)})};r.createRoot(document.getElementById("root")).render((0,xt.jsx)(s.StrictMode,{children:(0,xt.jsx)(mc,{})})),pc()})();
//# sourceMappingURL=main.1c741338.js.map